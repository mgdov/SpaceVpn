{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/components/pixel-stars.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\n\ninterface Star {\n  id: number\n  x: number\n  y: number\n  size: number\n  delay: number\n  type: \"dot\" | \"cross\"\n}\n\nexport function PixelStars() {\n  const [stars, setStars] = useState<Star[]>([])\n\n  useEffect(() => {\n    const generateStars = () => {\n      const newStars: Star[] = []\n      for (let i = 0; i < 100; i++) {\n        newStars.push({\n          id: i,\n          x: Math.random() * 100,\n          y: Math.random() * 100,\n          size: Math.random() > 0.8 ? 2 : 1,\n          delay: Math.random() * 3,\n          type: Math.random() > 0.7 ? \"cross\" : \"dot\",\n        })\n      }\n      setStars(newStars)\n    }\n    generateStars()\n  }, [])\n\n  return (\n    <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\n      {stars.map((star) => (\n        <div\n          key={star.id}\n          className=\"absolute star\"\n          style={{\n            left: `${star.x}%`,\n            top: `${star.y}%`,\n            animationDelay: `${star.delay}s`,\n          }}\n        >\n          {star.type === \"cross\" ? (\n            <div className=\"text-blue-300 text-opacity-60\" style={{ fontSize: `${star.size * 6}px` }}>\n              +\n            </div>\n          ) : (\n            <div\n              className=\"bg-cyan-300 rounded-none\"\n              style={{\n                width: `${star.size * 2}px`,\n                height: `${star.size * 2}px`,\n              }}\n            />\n          )}\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAaO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sQAAQ,EAAS,EAAE;IAE7C,IAAA,uQAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,MAAM,WAAmB,EAAE;YAC3B,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,IAAK;gBAC5B,SAAS,IAAI,CAAC;oBACZ,IAAI;oBACJ,GAAG,KAAK,MAAM,KAAK;oBACnB,GAAG,KAAK,MAAM,KAAK;oBACnB,MAAM,KAAK,MAAM,KAAK,MAAM,IAAI;oBAChC,OAAO,KAAK,MAAM,KAAK;oBACvB,MAAM,KAAK,MAAM,KAAK,MAAM,UAAU;gBACxC;YACF;YACA,SAAS;QACX;QACA;IACF,GAAG,EAAE;IAEL,qBACE,mSAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,mSAAC;gBAEC,WAAU;gBACV,OAAO;oBACL,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBAClB,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjB,gBAAgB,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC;gBAClC;0BAEC,KAAK,IAAI,KAAK,wBACb,mSAAC;oBAAI,WAAU;oBAAgC,OAAO;wBAAE,UAAU,GAAG,KAAK,IAAI,GAAG,EAAE,EAAE,CAAC;oBAAC;8BAAG;;;;;yCAI1F,mSAAC;oBACC,WAAU;oBACV,OAAO;wBACL,OAAO,GAAG,KAAK,IAAI,GAAG,EAAE,EAAE,CAAC;wBAC3B,QAAQ,GAAG,KAAK,IAAI,GAAG,EAAE,EAAE,CAAC;oBAC9B;;;;;;eAlBC,KAAK,EAAE;;;;;;;;;;AAyBtB"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/lib/api.ts"],"sourcesContent":["/**\n * API Client for SpaceVPN Backend\n *\n * IMPORTANT: Always use relative paths for API requests\n * to work correctly behind the nginx reverse proxy\n */\n\n// nginx proxies /api/v1/* to the backend\nexport const API_BASE_URL = '/api/v1'\n\nexport interface ApiResponse<T = any> {\n  data?: T\n  error?: string\n  message?: string\n  status?: number\n}\n\nexport interface User {\n  id: number\n  username: string\n  email: string | null\n  full_name: string | null\n  is_active: boolean\n  is_superuser: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport interface TokenResponse {\n  access_token: string\n  token_type: string\n}\n\nexport interface Tariff {\n  id: number\n  name: string\n  description: string | null\n  tagline?: string | null\n  duration_months: number\n  price: number\n  data_limit_gb: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  features?: string | null\n}\n\nexport interface VPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  name: string\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n  marzban_username?: string | null\n  pasarguard_username?: string | null  // Legacy field\n  device_info?: string | null\n  xray_config?: string | null\n  subscription_url?: string | null\n  qr_code?: string | null\n  last_connected_at?: string | null\n  created_at: string\n  updated_at?: string\n}\n\n/**\n * Extended VPN Key status with expiration info\n */\nexport interface VPNKeyStatus {\n  id: number\n  key_id: string  // Short ID like \"TJWMW\"\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n\n  // Expiration\n  expire_date: string | null\n  time_remaining: string | null  // \"19 ч.\", \"3 дня\"\n  time_remaining_seconds: number | null\n  is_expired: boolean\n\n  // Traffic\n  traffic_used_bytes: number\n  traffic_limit_bytes: number | null\n  traffic_used_gb: number\n  traffic_limit_gb: number | null\n  traffic_percentage: number | null\n\n  // VPN connection\n  subscription_url: string | null\n  qr_code: string | null\n  happ_deeplink: string | null\n\n  // Actions\n  can_extend: boolean\n  can_delete: boolean\n}\n\nexport interface VPNKeyListResponse {\n  keys: VPNKeyStatus[]\n  total: number\n}\n\nexport interface ExtendKeyRequest {\n  tariff_id?: number\n  days?: number\n}\n\nexport interface ExtendKeyResponse {\n  success: boolean\n  message: string\n  new_expire_date?: string\n  key_status?: VPNKeyStatus\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface RegenerateVPNClientPayload {\n  bypass_preset?: string\n  fingerprint?: string\n  server_name?: string\n}\n\nexport interface BypassPreset {\n  id: string\n  name: string\n  description: string\n  fingerprint: string\n  server_name: string\n  region: string\n  risk: string\n}\n\nexport interface BypassPresetsResponse {\n  presets: BypassPreset[]\n}\n\nexport interface VPNConfig {\n  client_uuid: string\n  name: string\n  xray_config: any  // JSON object\n  subscription_url: string  // VLESS URL\n  qr_code: string  // Base64 encoded image\n}\n\nexport interface Subscription {\n  id: number\n  user_id?: number\n  tariff_id: number\n  status: 'active' | 'expired' | 'cancelled'  // SubscriptionStatus\n  start_date: string\n  expire_date: string | null\n  data_limit: number  // bytes, 0 = unlimited\n  used_traffic: number  // bytes\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface MySubscriptionsResponse {\n  subscriptions: Subscription[]\n}\n\nexport interface VPNStatus {\n  status: 'none' | 'active' | 'expired' | 'cancelled'\n  expires_at: string | null\n  traffic_used: number | null  // bytes\n  traffic_limit: number | null  // bytes\n  traffic_used_gb: number | null  // GB\n  traffic_limit_gb: number | null  // GB\n  traffic_percentage: number | null  // 0-100\n  vless_uri: string | null\n  qr_code: string | null\n  subscription_id: number | null\n  tariff_name: string | null\n}\n\nexport interface AdminSubscription extends Subscription {\n  user?: User\n}\n\nexport interface HealthResponse {\n  status: string\n  uptime?: number\n  version?: string\n}\n\nexport interface ApiInfoResponse {\n  version: string\n  status: string\n  uptime?: number\n}\n\nexport interface UpdateProfilePayload {\n  email?: string | null\n  username?: string\n  full_name?: string | null\n  password?: string\n  current_password?: string\n}\n\nexport interface CreateSubscriptionPayload {\n  plan: string  // SubscriptionPlan: \"free\" | \"basic\" | \"premium\" | \"unlimited\"\n}\n\nexport interface UpdateSubscriptionPayload {\n  tariff_id?: string\n  end_date?: string\n  is_active?: boolean\n  data_limit_gb?: number\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface UpdateVPNClientPayload {\n  name?: string\n  device_info?: string\n}\n\nexport interface CreateTariffPayload {\n  name: string\n  duration_months: number\n  price: number\n  description?: string | null\n  tagline?: string | null\n  data_limit_gb?: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  sort_order?: number\n  features?: string | null\n}\n\nexport type UpdateTariffPayload = Partial<CreateTariffPayload>\n\nexport interface AdminVPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  marzban_username?: string\n  name?: string\n  device_info?: string\n  status: string\n  subscription_url?: string\n  qr_code?: string\n  created_at: string\n  updated_at?: string\n\n  // Extended info\n  user?: {\n    id: number\n    username: string\n    email?: string\n  }\n  expire_date?: string\n  time_remaining?: string\n  is_expired: boolean\n  traffic_used_gb: number\n  traffic_limit_gb: number\n}\n\nexport interface ExtendPayload {\n  days?: number\n  expires_at?: string\n}\n\nexport interface MarzbanSyncResponse {\n  total: number\n  synced: number\n  orphaned: number\n  errors: number\n  details?: Array<{\n    client_id: number\n    username: string\n    status: string\n    error?: string\n  }>\n}\n\n// Legacy alias\nexport type PasarguardSyncResponse = MarzbanSyncResponse\n\ntype QueryParams = Record<string, string | number | boolean | undefined>\n\nfunction buildEndpoint(endpoint: string): string {\n  const base = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL\n  if (!endpoint || endpoint === '/') {\n    return `${base}/`\n  }\n  const normalized = endpoint.startsWith('/') ? endpoint : `/${endpoint}`\n  return `${base}${normalized}`\n}\n\nfunction withQuery(endpoint: string, params?: QueryParams): string {\n  if (!params) return endpoint\n  const search = new URLSearchParams()\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null) return\n    search.append(key, String(value))\n  })\n  const query = search.toString()\n  return query ? `${endpoint}?${query}` : endpoint\n}\n\n/**\n * Get auth token from localStorage\n */\nexport function getAuthToken(): string | null {\n  if (typeof window === 'undefined') return null\n  return localStorage.getItem('auth_token')\n}\n\n/**\n * Set auth token in localStorage\n */\nexport function setAuthToken(token: string): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('auth_token', token)\n}\n\n/**\n * Remove auth token from localStorage\n */\nexport function removeAuthToken(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('auth_token')\n}\n\n/**\n * Get current user from localStorage\n */\nexport function getCurrentUser(): User | null {\n  if (typeof window === 'undefined') return null\n  const userJson = localStorage.getItem('current_user')\n  return userJson ? JSON.parse(userJson) : null\n}\n\n/**\n * Set current user in localStorage\n */\nexport function setCurrentUser(user: User): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('current_user', JSON.stringify(user))\n}\n\n/**\n * Remove current user from localStorage\n */\nexport function removeCurrentUser(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('current_user')\n}\n\nfunction safeParseJson(payload: string) {\n  try {\n    return JSON.parse(payload)\n  } catch {\n    return payload\n  }\n}\n\n/**\n * Make authenticated API request\n */\nasync function apiRequest<T = any>(endpoint: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\n  const token = getAuthToken()\n  const isFormData = typeof FormData !== 'undefined' && options.body instanceof FormData\n\n  const headers = new Headers(options.headers || {})\n  if (!headers.has('Accept')) {\n    headers.set('Accept', 'application/json')\n  }\n\n  const hasBody = options.body !== undefined && options.body !== null && options.body !== ''\n  if (!isFormData && hasBody && !headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json')\n  }\n\n  if (token && !headers.has('Authorization')) {\n    headers.set('Authorization', `Bearer ${token}`)\n  }\n\n  try {\n    const response = await fetch(buildEndpoint(endpoint), {\n      ...options,\n      headers,\n    })\n\n    const status = response.status\n    const raw = await response.text()\n    const payload = raw ? safeParseJson(raw) : undefined\n\n    if (!response.ok) {\n      if (status === 422 && Array.isArray((payload as any)?.detail)) {\n        const errors = (payload as any).detail\n          .map((err: any) => `${err.loc?.join(' → ') || 'Field'}: ${err.msg}`)\n          .join(', ')\n        return { error: errors, status }\n      }\n\n      const detail =\n        (payload as any)?.detail ||\n        (payload as any)?.message ||\n        (Array.isArray((payload as any)?.errors) ? (payload as any)?.errors.join(', ') : undefined)\n\n      return { error: typeof detail === 'string' ? detail : `HTTP ${status}`, status }\n    }\n\n    return { data: payload as T, status }\n  } catch (error) {\n    return {\n      error: error instanceof Error ? error.message : 'Network error',\n    }\n  }\n}\n\n/**\n * Authentication helpers\n */\nexport async function registerUser(\n  username: string,\n  email: string,\n  password: string,\n  fullName?: string\n): Promise<ApiResponse<User>> {\n  return apiRequest<User>('/auth/register', {\n    method: 'POST',\n    body: JSON.stringify({ username, email, password, full_name: fullName }),\n  })\n}\n\nexport async function loginUser(username: string, password: string): Promise<ApiResponse<TokenResponse>> {\n  const formData = new URLSearchParams()\n  formData.append('username', username)\n  formData.append('password', password)\n\n  const response = await apiRequest<TokenResponse>('/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: formData.toString(),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\n/**\n * OAuth Providers\n */\nexport interface OAuthProvider {\n  id: string\n  name: string\n  enabled: boolean\n  bot_username?: string  // For Telegram\n}\n\nexport interface OAuthProvidersResponse {\n  providers: OAuthProvider[]\n}\n\nexport async function getOAuthProviders(): Promise<ApiResponse<OAuthProvidersResponse>> {\n  return apiRequest<OAuthProvidersResponse>('/auth/oauth-providers')\n}\n\n/**\n * Google OAuth - Get auth URL\n */\nexport interface GoogleAuthResponse {\n  auth_url: string\n  state: string\n}\n\nexport async function getGoogleAuthUrl(): Promise<ApiResponse<GoogleAuthResponse>> {\n  return apiRequest<GoogleAuthResponse>('/auth/google')\n}\n\n/**\n * Telegram OAuth - Get bot info\n */\nexport interface TelegramAuthInfo {\n  bot_username: string\n  redirect_url: string\n}\n\nexport async function getTelegramAuthInfo(): Promise<ApiResponse<TelegramAuthInfo>> {\n  return apiRequest<TelegramAuthInfo>('/auth/telegram')\n}\n\n/**\n * Telegram OAuth - Callback\n */\nexport interface TelegramAuthData {\n  id: number\n  first_name: string\n  last_name?: string\n  username?: string\n  photo_url?: string\n  auth_date: number\n  hash: string\n}\n\nexport async function telegramAuthCallback(data: TelegramAuthData): Promise<ApiResponse<TokenResponse>> {\n  const response = await apiRequest<TokenResponse>('/auth/telegram/callback', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\nexport function logoutUser(): void {\n  removeAuthToken()\n  removeCurrentUser()\n}\n\nexport function isAuthenticated(): boolean {\n  return getAuthToken() !== null\n}\n\n/**\n * User profile endpoints\n */\nexport async function getCurrentUserInfo(): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me')\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n  return response\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: Endpoint /users/me/vpn вызывает 500 error\n// Используйте комбинацию getMySubscriptions() + listUserVPNClients()\n// export async function getUserVPNStatus(): Promise<ApiResponse<VPNStatus>> {\n//   return apiRequest<VPNStatus>('/users/me/vpn')\n// }\n\nexport async function updateCurrentUser(payload: UpdateProfilePayload): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me', {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n\n  return response\n}\n\nexport async function getUserById(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/users/${userId}`)\n}\n\nexport async function deleteUserById(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminListUsers(params?: QueryParams): Promise<ApiResponse<User[]>> {\n  return apiRequest<User[]>(withQuery('/admin/users/', params))  // Add trailing slash\n}\n\nexport async function adminGetUser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}`)\n}\n\nexport async function adminDeleteUser(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleUserActive(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/toggle-active`, { method: 'POST' })\n}\n\nexport async function adminMakeSuperuser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/make-superuser`, { method: 'POST' })\n}\n\n/**\n * Subscription endpoints (user)\n */\nexport async function getUserSubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getMySubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getSubscriptionById(id: string): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`)\n}\n\nexport async function createSubscription(payload: CreateSubscriptionPayload): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>('/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function updateSubscription(\n  id: string,\n  payload: UpdateSubscriptionPayload\n): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/subscriptions/${id}`, { method: 'DELETE' })\n}\n\n/**\n * Subscription endpoints (admin)\n */\nexport async function adminListSubscriptions(): Promise<ApiResponse<AdminSubscription[]>> {\n  return apiRequest<AdminSubscription[]>('/admin/subscriptions/')  // Add trailing slash\n}\n\nexport async function adminGetSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}`)\n}\n\nexport async function adminCreateSubscription(\n  payload: CreateSubscriptionPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>('/admin/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/subscriptions/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendSubscription(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Tariff endpoints\n */\nexport async function getPublicTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/tariffs/')  // Add trailing slash\n}\n\nexport async function getPublicTariffById(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/tariffs/${id}`)\n}\n\nexport async function adminListTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/admin/tariffs/')  // Add trailing slash\n}\n\nexport async function adminCreateTariff(payload: CreateTariffPayload): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>('/admin/tariffs/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateTariff(\n  id: string,\n  payload: UpdateTariffPayload\n): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteTariff(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/tariffs/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleTariff(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}/toggle`, { method: 'POST' })\n}\n\n/**\n * Subscription purchase endpoints\n */\nexport interface PurchaseFreeTariffRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface PurchaseFreeTariffResponse {\n  subscription_id: number\n  vpn_client_id: number\n  vless_uri: string\n  qr_code: string\n  expire_date: string\n  message: string\n}\n\nexport async function purchaseFreeTariff(\n  data: PurchaseFreeTariffRequest\n): Promise<ApiResponse<PurchaseFreeTariffResponse>> {\n  return apiRequest<PurchaseFreeTariffResponse>('/subscriptions/purchase-free', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n}\n\nexport interface CreateVPNClientResponse {\n  id: number\n  client_uuid: string\n  subscription_url: string\n  qr_code: string\n  name: string\n  device_info?: string\n  created_at: string\n}\n\nexport async function createUserVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<CreateVPNClientResponse>> {\n  return apiRequest<CreateVPNClientResponse>('/vpn-clients', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\n/**\n * VPN client endpoints (user)\n */\nexport async function listUserVPNClients(): Promise<ApiResponse<VPNClient[]>> {\n  return apiRequest<VPNClient[]>('/vpn-clients')\n}\n\nexport async function getUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`)\n}\n\nexport async function updateUserVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteUserVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/vpn-clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function getUserVPNClientConfig(id: string): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/config`)\n}\n\nexport async function regenerateUserVPNClient(id: string, payload?: RegenerateVPNClientPayload): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/regenerate`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function getBypassPresets(): Promise<ApiResponse<BypassPresetsResponse>> {\n  return apiRequest<BypassPresetsResponse>('/vpn-clients/bypass-presets')\n}\n\nexport async function syncUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}/sync`, { method: 'POST' })\n}\n\n/**\n * Get all VPN keys with extended status (expiration, traffic, deep links)\n */\nexport async function getUserVPNKeys(): Promise<ApiResponse<VPNKeyListResponse>> {\n  return apiRequest<VPNKeyListResponse>('/vpn-clients/keys')\n}\n\n/**\n * Get single VPN key status\n */\nexport async function getVPNKeyStatus(keyId: number): Promise<ApiResponse<VPNKeyStatus>> {\n  return apiRequest<VPNKeyStatus>(`/vpn-clients/keys/${keyId}`)\n}\n\n/**\n * Extend VPN key expiration\n */\nexport async function extendVPNKey(keyId: number, request?: ExtendKeyRequest): Promise<ApiResponse<ExtendKeyResponse>> {\n  return apiRequest<ExtendKeyResponse>(`/vpn-clients/keys/${keyId}/extend`, {\n    method: 'POST',\n    body: request ? JSON.stringify(request) : undefined,\n  })\n}\n\n/**\n * Get Happ VPN deep link for a key\n */\nexport async function getHappDeeplink(keyId: number): Promise<ApiResponse<{ happ_link: string; vless_url: string; qr_code: string }>> {\n  return apiRequest(`/vpn-clients/keys/${keyId}/happ-link`)\n}\n\n/**\n * VPN client endpoints (admin)\n */\nexport async function adminListVPNClients(): Promise<ApiResponse<AdminVPNClient[]>> {\n  return apiRequest<AdminVPNClient[]>('/admin/vpn/clients/')  // Add trailing slash\n}\n\nexport async function adminGetVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`)\n}\n\nexport async function adminCreateVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>('/admin/vpn/clients/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/vpn/clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendVPNClient(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Internal maintenance endpoints\n */\nexport async function syncAllVpnClients(): Promise<ApiResponse<MarzbanSyncResponse>> {\n  return apiRequest<MarzbanSyncResponse>('/internal/marzban/sync', { method: 'POST' })\n}\n\n// ============================================================================\n// Public API (без авторизации)\n// ============================================================================\n\n/**\n * Public Tariffs\n */\nexport interface PublicTariff {\n  id: number\n  name: string\n  description: string | null\n  price: number\n  duration_months: number\n  duration_days: number\n  data_limit_gb: number\n  is_featured: boolean\n}\n\nexport interface PublicTariffsResponse {\n  tariffs: PublicTariff[]\n}\n\nexport async function getPublicTariffsNoAuth(): Promise<ApiResponse<PublicTariffsResponse>> {\n  return apiRequest<PublicTariffsResponse>('/public/tariffs')\n}\n\n/**\n * Key Search\n */\nexport interface KeySearchRequest {\n  key_identifier: string\n}\n\nexport interface KeySearchResult {\n  found: boolean\n  key_id?: string\n  client_id?: number\n  status?: 'active' | 'expired'\n  expires_at?: string\n  time_remaining?: string\n  is_expired: boolean\n  can_renew: boolean\n}\n\nexport async function searchKeyPublic(keyIdentifier: string): Promise<ApiResponse<KeySearchResult>> {\n  return apiRequest<KeySearchResult>('/public/key/search', {\n    method: 'POST',\n    body: JSON.stringify({ key_identifier: keyIdentifier }),\n  })\n}\n\n/**\n * Create Key Without Registration\n */\nexport interface CreateKeyRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface CreateKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  subscription_url: string\n  qr_code?: string\n  expires_at: string\n  message: string\n}\n\nexport async function createKeyPublic(request: CreateKeyRequest): Promise<ApiResponse<CreateKeyResult>> {\n  return apiRequest<CreateKeyResult>('/public/key/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Renew Key\n */\nexport interface RenewKeyRequest {\n  key_identifier: string\n  tariff_id: number\n}\n\nexport interface RenewKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  new_expires_at: string\n  subscription_url: string\n  message: string\n}\n\nexport async function renewKeyPublic(request: RenewKeyRequest): Promise<ApiResponse<RenewKeyResult>> {\n  return apiRequest<RenewKeyResult>('/public/key/renew', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Admin Finance endpoints\n */\nexport interface AdminFinanceStats {\n  total_revenue: string\n  revenue_today: string\n  revenue_yesterday: string\n  revenue_this_week: string\n  revenue_this_month: string\n  revenue_last_month: string\n  total_payments: number\n  completed_payments: number\n  pending_payments: number\n  failed_payments: number\n  active_subscriptions: number\n  average_payment: string\n}\n\n// ----------------------------------------------------------------------------\n// YooKassa integration (frontend -> Next.js API routes)\n// ----------------------------------------------------------------------------\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: (data as any)?.error || (data as any)?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: (data as any)?.error || (data as any)?.message || `HTTP ${response.status}` }\n    }\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport interface AdminFinanceChartData {\n  labels: string[]\n  values: string[]\n}\n\nexport interface AdminPayment {\n  id: number\n  user_id: number\n  amount: string\n  status: string\n  payment_method?: string\n  created_at: string\n  updated_at: string\n  user?: User\n}\n\nexport async function getAdminFinanceStats(): Promise<ApiResponse<AdminFinanceStats>> {\n  return apiRequest<AdminFinanceStats>('/admin/finance/stats')\n}\n\nexport async function getAdminFinanceChart(\n  period: '7days' | '30days' | '12months'\n): Promise<ApiResponse<AdminFinanceChartData>> {\n  return apiRequest<AdminFinanceChartData>(`/admin/finance/chart/${period}`)\n}\n\nexport async function getAdminPayments(\n  params?: { skip?: number; limit?: number }\n): Promise<ApiResponse<AdminPayment[]>> {\n  return apiRequest<AdminPayment[]>(withQuery('/admin/finance/payments', params))\n}\n\n/**\n * Health & meta endpoints\n */\nexport async function getHealthStatus(): Promise<ApiResponse<HealthResponse>> {\n  return apiRequest<HealthResponse>('/health')\n}\n\nexport async function getApiInfo(): Promise<ApiResponse<ApiInfoResponse>> {\n  return apiRequest<ApiInfoResponse>('/')\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: YooKassa endpoints не реализованы на backend\n// Будет добавлено позже при интеграции платежного шлюза\n/*\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n*/\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 817, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/app/login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\nimport { Eye, EyeOff, Loader2 } from \"lucide-react\"\nimport { PixelStars } from \"@/components/pixel-stars\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { getGoogleAuthUrl, getTelegramAuthInfo, getOAuthProviders, type OAuthProvider } from \"@/lib/api\"\n\n// Telegram Login Widget script loader\ndeclare global {\n  interface Window {\n    TelegramLoginWidget: {\n      dataOnauth: (user: any) => void\n    }\n  }\n}\n\nexport default function LoginPage() {\n  const [showPassword, setShowPassword] = useState(false)\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [error, setError] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [oauthLoading, setOauthLoading] = useState<string | null>(null)\n  const [oauthProviders, setOauthProviders] = useState<OAuthProvider[]>([])\n  const { login } = useAuth()\n  const router = useRouter()\n\n  useEffect(() => {\n    // Load OAuth providers\n    loadOAuthProviders()\n  }, [])\n\n  const loadOAuthProviders = async () => {\n    const response = await getOAuthProviders()\n    if (response.data?.providers) {\n      setOauthProviders(response.data.providers)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(\"\")\n    setLoading(true)\n\n    try {\n      const result = await login(username, password)\n      if (result.success) {\n        router.push(\"/account\")\n      } else {\n        setError(result.error || \"Ошибка входа\")\n      }\n    } catch (err) {\n      setError(\"Ошибка сети. Проверьте подключение к интернету.\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleGoogleLogin = async () => {\n    setOauthLoading(\"google\")\n    setError(\"\")\n\n    try {\n      const response = await getGoogleAuthUrl()\n      if (response.data?.auth_url) {\n        // Save state for verification\n        sessionStorage.setItem(\"oauth_state\", response.data.state)\n        // Redirect to Google\n        window.location.href = response.data.auth_url\n      } else {\n        setError(response.error || \"Google авторизация недоступна\")\n      }\n    } catch (err) {\n      setError(\"Не удалось подключиться к Google\")\n    } finally {\n      setOauthLoading(null)\n    }\n  }\n\n  const handleTelegramLogin = async () => {\n    setOauthLoading(\"telegram\")\n    setError(\"\")\n\n    try {\n      const response = await getTelegramAuthInfo()\n      if (response.data?.bot_username) {\n        // Open Telegram login in popup\n        const botUsername = response.data.bot_username\n        const redirectUrl = encodeURIComponent(window.location.origin + \"/auth/telegram/callback\")\n        const telegramUrl = `https://oauth.telegram.org/auth?bot_id=${botUsername}&origin=${window.location.origin}&request_access=write&return_to=${redirectUrl}`\n        \n        // Open popup\n        const width = 550\n        const height = 470\n        const left = window.screenX + (window.outerWidth - width) / 2\n        const top = window.screenY + (window.outerHeight - height) / 2\n        \n        window.open(\n          telegramUrl,\n          \"telegram_auth\",\n          `width=${width},height=${height},left=${left},top=${top}`\n        )\n      } else {\n        setError(response.error || \"Telegram авторизация недоступна\")\n      }\n    } catch (err) {\n      setError(\"Не удалось подключиться к Telegram\")\n    } finally {\n      setOauthLoading(null)\n    }\n  }\n\n  const googleEnabled = oauthProviders.some(p => p.id === \"google\" && p.enabled)\n  const telegramEnabled = oauthProviders.some(p => p.id === \"telegram\" && p.enabled)\n\n  return (\n    <div className=\"min-h-screen bg-background relative flex items-center justify-center px-4\">\n      <PixelStars />\n\n      {/* Back to home */}\n      <Link href=\"/\" className=\"absolute top-4 left-4 text-muted-foreground hover:text-primary text-[10px] z-20\">\n        ← Назад\n      </Link>\n\n      <div className=\"w-full max-w-md relative z-10\">\n        {/* Logo */}\n        <div className=\"text-center mb-8\">\n          <div className=\"flex items-center justify-center gap-2 mb-4\">\n            <div className=\"w-10 h-10 bg-primary flex items-center justify-center\">\n              <span className=\"text-background text-sm\">S</span>\n            </div>\n          </div>\n          <h1 className=\"text-foreground text-sm\">SPACE VPN</h1>\n        </div>\n\n        {/* Error message */}\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-500/10 border border-red-500/50 text-red-500 text-[10px]\">\n            {error}\n          </div>\n        )}\n\n        {/* Тестовый пользователь подсказка */}\n        <div className=\"mb-4 p-3 bg-primary/10 border border-primary/50 text-primary text-[10px]\">\n          <p className=\"font-semibold mb-1\">Тестовый доступ:</p>\n          <p>Логин: <span className=\"font-mono\">test</span></p>\n          <p>Пароль: <span className=\"font-mono\">test123</span></p>\n        </div>\n\n        {/* Social Login */}\n        <div className=\"flex gap-4 mb-6\">\n          <button \n            onClick={handleGoogleLogin}\n            disabled={oauthLoading !== null || !googleEnabled}\n            className=\"flex-1 bg-card border border-border py-3 flex items-center justify-center gap-2 hover:border-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {oauthLoading === \"google\" ? (\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                <path\n                  fill=\"#4285F4\"\n                  d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                />\n                <path\n                  fill=\"#34A853\"\n                  d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                />\n                <path\n                  fill=\"#FBBC05\"\n                  d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                />\n                <path\n                  fill=\"#EA4335\"\n                  d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                />\n              </svg>\n            )}\n            <span className=\"text-foreground text-[10px]\">Google</span>\n          </button>\n          <button \n            onClick={handleTelegramLogin}\n            disabled={oauthLoading !== null || !telegramEnabled}\n            className=\"flex-1 bg-card border border-border py-3 flex items-center justify-center gap-2 hover:border-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {oauthLoading === \"telegram\" ? (\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#0088cc\">\n                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.02-1.96 1.25-5.54 3.69-.52.36-1 .53-1.42.52-.47-.01-1.37-.26-2.03-.48-.82-.27-1.47-.42-1.42-.88.03-.24.37-.49 1.02-.74 3.98-1.73 6.64-2.87 7.97-3.43 3.79-1.6 4.58-1.88 5.1-1.89.11 0 .37.03.54.17.14.12.18.28.2.45-.01.06.01.24 0 .38z\" />\n              </svg>\n            )}\n            <span className=\"text-foreground text-[10px]\">Telegram</span>\n          </button>\n        </div>\n\n        {/* Login Form */}\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-foreground text-[10px] mb-2\">Логин или E-mail</label>\n            <input\n              type=\"text\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              placeholder=\"Введите логин или email\"\n              required\n              disabled={loading}\n              className=\"w-full bg-card border border-border px-4 py-3 text-foreground text-[10px] placeholder:text-muted-foreground focus:outline-none focus:border-primary disabled:opacity-50\"\n            />\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <label className=\"text-foreground text-[10px]\">Пароль</label>\n              <Link href=\"/forgot-password\" className=\"text-muted-foreground hover:text-primary text-[10px]\">\n                Забыли?\n              </Link>\n            </div>\n            <div className=\"relative\">\n              <input\n                type={showPassword ? \"text\" : \"password\"}\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"Введите пароль\"\n                required\n                disabled={loading}\n                className=\"w-full bg-card border border-border px-4 py-3 text-foreground text-[10px] placeholder:text-muted-foreground focus:outline-none focus:border-primary pr-12 disabled:opacity-50\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                disabled={loading}\n              >\n                {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\n              </button>\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-primary text-primary-foreground py-3 text-[10px] hover:bg-primary/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Вход...\n              </>\n            ) : (\n              \"Войти\"\n            )}\n          </button>\n        </form>\n\n        <Link\n          href=\"/register\"\n          className=\"block w-full mt-4 bg-card border border-border py-3 text-center text-foreground text-[10px] hover:border-primary transition-colors\"\n        >\n          Создать аккаунт\n        </Link>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}