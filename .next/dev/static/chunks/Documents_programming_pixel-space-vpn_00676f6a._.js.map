{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/components/pixel-logo.tsx"],"sourcesContent":["import type { SVGProps } from \"react\"\n\nexport function PixelLogo(props: SVGProps<SVGSVGElement>) {\n    return (\n        <svg viewBox=\"0 0 1920 1920\" xmlns=\"http://www.w3.org/2000/svg\" className={props.className} style={{ imageRendering: 'pixelated' }}>\n            <path\n                fill=\"currentColor\"\n                d=\"M1664.4 438.2c6.6 50.5.3 108-17.8 168.8-17.4 58.4-45.8 119.9-84.1 181-34.8 55.5-77.8 110.6-128.3 163-4.5 4.6-9 9.3-13.6 13.9-41.8 41.8-85.7 78.8-130.1 110.6-44.8 32.1-90.3 58.8-135.2 79.8-38.3 18-76.1 31.8-112.6 41.2-30.2 7.8-59.5 12.6-87.4 14.2-15.1.9-29.8.8-43.9-.2 40.9-16.9 83.4-42.7 123.9-76.2 22.2-9.4 44.5-20.2 66.7-32.3 31.9-17.3 63.6-37.2 94.5-59.3 37.4-26.7 73.8-56.6 108.3-89.2 40.4-38.1 78.2-79.7 112.1-123.9 33.6-43.8 63.4-90.2 88-138 2.7-5.2 5.3-10.5 7.9-15.7 28.6-58.8 46.8-114.8 55.1-166 9.1-56.5 6.3-107.3-7.6-150-14.4-44.4-40.9-80-78.4-104.2-36.8-23.7-84.3-36.3-141.5-35.2-57.2 1.1-118.7 15.8-180.9 41.3 58.3-8.7 110.5-4.5 153.6 11.6 41.5 15.5 74.7 42.1 97.2 78.8 20.4 33.3 32 75.1 32.9 124.6.1 4.4.1 8.8 0 13.3-.8 41-8.6 84.3-22.3 128.5-13.9 44.5-33.9 89.9-59 134.8-21.5 38.4-46.7 76.5-74.9 113.3-23.4 30.5-49 60.2-76.3 88.6-22.6 23.5-46.4 46.1-71.2 67.4l-.5.5c29.7-41.8 51.2-84.6 63.4-124.8 2-3 3.9-6.1 5.8-9.1 16.6-26.5 31.4-53 44.2-79.4 15.5-31.8 28.1-63.4 37.7-94.1 11.6-37.1 18.8-73 21.5-107 3.1-39.7-.1-76.7-9.9-109.5-9.8-32.6-26.1-61.2-49.3-84.5-2.6-2.6-5.2-5-7.9-7.4-30.2-26.9-68.5-43.3-112.1-49.8-48.1-7.1-102.8-2.3-160.8 13.5-60.3 16.5-124.1 44.8-187.7 84-62.4 38.5-124.5 87.4-182.8 145.7s-107.6 120.4-146 182.8c51.7-59.2 110.1-112.5 171.4-157.1 58.9-42.9 120.5-77.8 181.3-102.2 55.2-22.1 109.9-35.6 161.3-38.4 4.6-.3 9.1-.4 13.6-.5 41.1-.8 77.1 5.5 107.8 17.8 30.9 12.4 56.5 31.1 76.2 55 16.9 20.4 29.5 44.6 37.7 72 6.8 22.7 10.5 47.6 11.1 74.4.5 22.2-1.3 45.6-5.2 70.1-.5 2.9-1 5.9-1.5 8.9-5.3-19.5-14.7-36.5-28.4-50.2-9.9-9.9-21.6-17.6-34.7-23.1-.1-.1-.2-.3-.3-.4-9.8-15.9-21.5-29.9-35.1-42-16.4-14.5-35.5-26.2-56.9-34.8-25.8-10.4-54.9-16.4-86.8-17.8-37.2-1.6-78.2 3-122 14.4-43.4 11.2-89.5 29-137.4 53.6-5.3 2.7-10.5 5.5-15.7 8.3-58.9 31.9-115.2 71.5-167.2 116.3-57.2 49.3-109.1 105-153.2 163.5-45.8 60.9-83.2 124.8-109.2 188.1-25.6 62.2-40.3 123.7-41.4 180.9-1.1 57.2 11.5 104.7 35.2 141.5-6.6-50.5-.3-108 17.8-168.7 17.4-58.4 45.8-119.9 84.1-181 34.8-55.5 77.8-110.6 128.3-163 4.5-4.6 9-9.3 13.6-13.9 41.8-41.8 85.6-78.8 130.1-110.6 44.8-32.1 90.4-58.8 135.2-79.8 38.3-18 76.1-31.8 112.6-41.2 30.2-7.8 59.5-12.6 87.4-14.2 18.5-1.1 36.4-.7 53.6 1-50 14.5-103.9 43.5-155.1 84.8-15.1 7-30.2 14.6-45.2 22.7-31.9 17.3-63.6 37.2-94.5 59.3-37.4 26.7-73.8 56.6-108.3 89.2-40.4 38.1-78.2 79.7-112.1 123.9-33.6 43.8-63.4 90.2-88 138-2.7 5.2-5.3 10.5-7.9 15.7-28.6 58.8-46.8 114.8-55.1 166-9.1 56.5-6.3 107.3 7.6 150 14.4 44.4 40.9 80.1 78.4 104.2 36.8 23.7 84.3 36.3 141.5 35.2 57.2-1.1 118.7-15.8 180.9-41.4-58.4 8.7-110.5 4.5-153.7-11.6-41.5-15.5-74.7-42.1-97.2-78.8-20.4-33.3-32-75.1-33-124.6-.1-4.4-.1-8.8 0-13.4.8-41.1 8.6-84.3 22.4-128.4 13.9-44.5 33.9-89.9 59-134.8 21.5-38.4 46.6-76.4 74.9-113.3 23.4-30.5 49-60.2 76.3-88.6 8.9-9.3 18-18.4 27.4-27.4-31.6 50.8-50.8 101.9-55.9 147.2-4.6 8.6-8.9 17.1-13 25.6-15.4 31.8-28.1 63.4-37.7 94.1-11.6 37.1-18.8 73-21.5 107-3.1 39.7.1 76.6 9.9 109.5 9.8 32.6 26.1 61.2 49.3 84.5 2.6 2.6 5.2 5 7.9 7.4 30.2 26.9 68.4 43.3 112.1 49.7 48.1 7.2 102.8 2.3 160.8-13.5 60.3-16.5 124.1-44.8 187.7-84 62.4-38.5 124.6-87.4 182.9-145.7 58.3-58.3 107.2-120.4 145.7-182.9-51.7 59.2-110.1 112.5-171.4 157.1-58.9 42.9-120.5 77.8-181.3 102.2-55.2 22.1-109.8 35.5-161.3 38.4-4.6.3-9.1.4-13.6.5-41.1.8-77.1-5.5-107.8-17.8-30.9-12.5-56.4-31.1-76.2-55-16.9-20.4-29.5-44.6-37.7-72-6.8-22.7-10.5-47.6-11.1-74.4-.2-8-.1-16.1.4-24.4 2.6 3.3 5.3 6.4 8.3 9.3 19.9 20 46.9 30.8 78.3 33.2 5.6 6.7 11.7 12.9 18.2 18.6 16.4 14.5 35.5 26.2 56.9 34.8 25.8 10.4 54.9 16.4 86.8 17.8 37.2 1.6 78.2-3 122-14.3 43.4-11.2 89.5-29 137.4-53.6 5.3-2.7 10.5-5.5 15.7-8.3 58.9-31.9 115.2-71.5 167.2-116.3 57.2-49.3 109.1-105 153.2-163.5 45.8-60.9 83.2-124.9 109.3-188.2 25.6-62.2 40.3-123.7 41.4-180.9 1-56.8-11.5-104.3-35.2-141.1z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M1304.7 953.4c-34.5 32.6-70.9 62.5-108.3 89.2-31 22.1-62.7 42-94.5 59.3-22.2 12.1-44.5 22.9-66.7 32.3 14-11.6 27.8-24.2 41.3-37.6 23.6-23.6 44.5-48.4 62.3-73.5.2-.2.3-.3.5-.4 24.8-21.4 48.6-44 71.3-67.4 27.3-28.4 52.9-58.1 76.3-88.6 28.3-36.8 53.5-74.9 74.9-113.3 25.1-44.9 45.1-90.3 59-134.7 13.8-44.1 21.6-87.4 22.4-128.5.1-4.5.1-9 0-13.4-.9-49.5-12.5-91.3-33-124.6-22.5-36.7-55.7-63.3-97.2-78.8-43.2-16.1-95.3-20.3-153.6-11.6 62.2-25.6 123.7-40.3 180.9-41.4 57.2-1.1 104.7 11.5 141.5 35.2 37.5 24.1 64 59.7 78.4 104.2 13.9 42.7 16.7 93.5 7.6 150-8.3 51.3-26.5 107.2-55.1 166-2.5 5.2-5.2 10.5-7.9 15.7-24.6 47.9-54.4 94.2-88 138-33.9 44.2-71.7 85.8-112.1 123.9z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M1202.2 898.3c12.8-42.4 15.4-82 6.5-114.7.5-3 1.1-5.9 1.5-8.9 3.9-24.5 5.7-47.9 5.2-70.1-.6-26.8-4.3-51.7-11.1-74.4-8.2-27.4-20.8-51.6-37.7-72-19.7-23.9-45.2-42.5-76.2-55-30.7-12.4-66.7-18.6-107.8-17.8-4.5.1-9.1.3-13.6.5-51.4 2.9-106.1 16.3-161.3 38.4-60.8 24.4-122.4 59.3-181.3 102.2-61.3 44.6-119.7 97.9-171.4 157.1 38.5-62.4 87.4-124.5 145.7-182.8 58.3-58.3 120.4-107.2 182.8-145.7 63.6-39.2 127.4-67.5 187.7-84 58-15.8 112.7-20.6 160.8-13.5 43.7 6.5 81.9 22.8 112.1 49.7 2.7 2.4 5.3 4.9 7.9 7.4 23.3 23.3 39.6 51.8 49.3 84.5 9.9 32.9 13 69.8 9.9 109.5-2.6 33.9-9.9 69.9-21.5 107-9.6 30.7-22.2 62.3-37.7 94.1-12.8 26.4-27.5 52.9-44.2 79.4-1.7 3-3.6 6-5.6 9.1z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M1319.3 1319.3c-58.3 58.3-120.5 107.2-182.9 145.7-63.5 39.2-127.4 67.5-187.7 84-58 15.8-112.7 20.7-160.8 13.5-43.7-6.5-81.9-22.8-112.1-49.7-2.7-2.4-5.3-4.9-7.9-7.4-23.3-23.3-39.6-51.8-49.3-84.4-9.8-32.9-13-69.8-9.9-109.5 2.6-33.9 9.9-69.9 21.5-107 9.6-30.7 22.2-62.3 37.7-94.1 4.2-8.5 8.5-17.1 13-25.6-4.7 42.2 2.8 79.4 24.1 106.4-.4 8.3-.5 16.4-.4 24.4.6 26.8 4.3 51.7 11.1 74.4 8.2 27.4 20.8 51.6 37.7 72 19.7 23.9 45.2 42.5 76.2 55 30.7 12.4 66.7 18.6 107.8 17.8 4.5-.1 9.1-.3 13.6-.5 51.5-2.9 106-16.3 161.3-38.4 60.8-24.4 122.4-59.3 181.3-102.2 61.3-44.6 119.7-97.9 171.4-157.1-38.5 62.2-87.4 124.4-145.7 182.7z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M255.6 1481.8c-23.7-36.8-36.3-84.3-35.2-141.5 1.1-57.2 15.8-118.7 41.4-180.9 26.1-63.3 63.4-127.3 109.2-188.1 44.1-58.5 96-114.1 153.2-163.5 52-44.8 108.3-84.4 167.2-116.3 5.2-2.8 10.5-5.6 15.7-8.3 47.9-24.6 94-42.4 137.4-53.6 43.8-11.3 84.8-16 122-14.3 31.9 1.4 61 7.4 86.8 17.8 21.4 8.6 40.5 20.2 56.9 34.8 13.6 12 25.3 26 35.1 42 .1.1.2.3.3.4-34.6-14.5-79-13.9-127.2.2-17.1-1.8-35-2.1-53.6-1.1-27.9 1.6-57.2 6.4-87.4 14.2-36.5 9.4-74.3 23.2-112.6 41.2-44.8 21-90.3 47.7-135.2 79.8-44.5 31.8-88.3 68.8-130.1 110.6-4.6 4.6-9.1 9.2-13.6 13.9-50.5 52.4-93.5 107.5-128.3 163-38.3 61.1-66.7 122.6-84.1 181-18.2 60.7-24.5 118.2-17.9 168.7z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M760.6 1658.2c-62.2 25.6-123.7 40.3-180.9 41.4-57.2 1.1-104.7-11.5-141.5-35.2-37.5-24.1-64-59.7-78.4-104.2-13.9-42.7-16.7-93.5-7.6-150 8.3-51.3 26.4-107.2 55.1-166 2.5-5.2 5.2-10.5 7.9-15.7 24.6-47.9 54.4-94.2 88-138 33.9-44.2 71.7-85.8 112.1-123.9 34.5-32.6 70.9-62.5 108.3-89.2 31-22.1 62.7-42 94.5-59.3 15-8.2 30.1-15.8 45.2-22.7-15.8 12.7-31.3 26.6-46.3 41.7-32 32-58.9 66.1-80.2 100.3-9.3 9-18.4 18.1-27.4 27.4-27.3 28.4-52.9 58-76.3 88.6-28.3 36.8-53.5 74.9-74.9 113.3-25.1 44.9-45.1 90.3-59 134.8-13.8 44.1-21.6 87.4-22.3 128.4-.1 4.5-.1 9 0 13.4.9 49.5 12.5 91.3 33 124.6 22.5 36.7 55.7 63.3 97.2 78.8 43 16 95.2 20.2 153.5 11.5z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M1395.7 1112.2c-52 44.8-108.3 84.4-167.2 116.3-5.2 2.8-10.5 5.6-15.7 8.3-47.9 24.6-94 42.4-137.4 53.6-43.8 11.3-84.7 16-122 14.3-31.9-1.4-61-7.4-86.8-17.8-21.4-8.6-40.4-20.2-56.9-34.8-6.5-5.8-12.6-12-18.2-18.6 35.6 2.7 76.8-5.3 119.7-23.1 14.2 1 28.8 1.1 43.9.2 27.9-1.6 57.2-6.4 87.4-14.2 36.5-9.4 74.3-23.2 112.6-41.2 44.8-21 90.3-47.8 135.2-79.8 44.5-31.8 88.3-68.8 130.1-110.6 4.6-4.6 9.1-9.2 13.6-13.9 50.5-52.4 93.5-107.5 128.3-163 38.3-61.1 66.7-122.5 84.1-181 18.1-60.8 24.4-118.3 17.8-168.8 23.7 36.8 36.3 84.3 35.2 141.5-1.1 57.2-15.8 118.7-41.4 180.9-26.1 63.3-63.4 127.3-109.3 188.2-43.8 58.6-95.8 114.2-153 163.5z\"\n            />\n            <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={50}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeMiterlimit={10}\n                d=\"M1076.5 1096.6a599.6 599.6 0 0 1-41.3 37.6c-40.6 33.6-83 59.3-123.9 76.2-42.9 17.8-84.1 25.8-119.7 23.1-31.4-2.4-58.4-13.2-78.3-33.1-3-3-5.7-6.1-8.3-9.3-21.3-27.1-28.8-64.2-24.1-106.4 5.1-45.3 24.3-96.4 55.9-147.2C758 903.1 785 869.1 817 837.1c15-15 30.5-29 46.3-41.7 51.2-41.4 105.2-70.3 155.1-84.9 48.2-14.1 92.7-14.7 127.2-.2 13.1 5.5 24.7 13.1 34.7 23.1 13.7 13.7 23.1 30.7 28.4 50.2 8.9 32.7 6.4 72.3-6.5 114.7-12.2 40.3-33.6 83.1-63.4 124.8-17.8 25.1-38.7 49.9-62.3 73.5z\"\n            />\n        </svg>\n    )\n}"],"names":[],"mappings":";;;;;;AAEO,SAAS,UAAU,KAA8B;IACpD,qBACI,kPAAC;QAAI,SAAQ;QAAgB,OAAM;QAA6B,WAAW,MAAM,SAAS;QAAE,OAAO;YAAE,gBAAgB;QAAY;;0BAC7H,kPAAC;gBACG,MAAK;gBACL,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;0BAEN,kPAAC;gBACG,MAAK;gBACL,QAAO;gBACP,aAAa;gBACb,eAAc;gBACd,gBAAe;gBACf,kBAAkB;gBAClB,GAAE;;;;;;;;;;;;AAIlB;KAxEgB"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/components/header.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { useState } from \"react\"\nimport { Menu, X, User, LogOut } from \"lucide-react\"\n\nimport { PixelLogo } from \"./pixel-logo\"\nimport { useAuth } from \"@/lib/auth-context\"\n\nexport function Header() {\n  const [isMenuOpen, setIsMenuOpen] = useState(false)\n  const { user, logout } = useAuth()\n  const closeMenu = () => setIsMenuOpen(false)\n\n  const handleLogout = () => {\n    logout()\n    closeMenu()\n  }\n\n  const navLinks = [\n    { href: \"/\", label: \"Главная\" },\n    { href: \"/blog\", label: \"Блог\" },\n    { href: \"/faq\", label: \"FAQ\" },\n    { href: \"/about\", label: \"О нас\" },\n  ]\n\n  return (\n    <>\n      <header className=\"fixed top-0 left-0 right-0 z-50 bg-background/90 backdrop-blur-sm border-b border-border\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            {/* Logo */}\n            <Link href=\"/\" className=\"flex items-center gap-2\">\n              <PixelLogo className=\"w-8 h-8 text-primary\" aria-hidden=\"true\" />\n              <span className=\"text-primary text-xs md:text-sm\">SPACE VPN</span>\n            </Link>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex items-center gap-6\">\n              {navLinks.map((link) => (\n                <Link\n                  key={link.href}\n                  href={link.href}\n                  className=\"text-foreground hover:text-primary transition-colors text-[10px]\"\n                >\n                  {link.label}\n                </Link>\n              ))}\n            </nav>\n\n            {/* Auth Buttons */}\n            <div className=\"hidden md:flex items-center gap-4\">\n              {user ? (\n                <>\n                  <Link\n                    href=\"/account\"\n                    className=\"text-foreground hover:text-primary transition-colors text-[10px] flex items-center gap-2\"\n                  >\n                    <User size={14} />\n                    {user.username}\n                  </Link>\n                  <button\n                    onClick={logout}\n                    className=\"text-foreground hover:text-primary transition-colors text-[10px] flex items-center gap-2\"\n                  >\n                    <LogOut size={14} />\n                    Выход\n                  </button>\n                </>\n              ) : (\n                <>\n                  <Link href=\"/login\" className=\"text-foreground hover:text-primary transition-colors text-[10px]\">\n                    Вход\n                  </Link>\n                  <Link\n                    href=\"/register\"\n                    className=\"bg-primary text-primary-foreground px-4 py-2 hover:bg-primary/80 transition-colors text-[10px]\"\n                  >\n                    Регистрация\n                  </Link>\n                </>\n              )}\n            </div>\n\n            {/* Mobile Menu Button */}\n            <button className=\"md:hidden text-foreground\" onClick={() => setIsMenuOpen(!isMenuOpen)} aria-label=\"Меню\">\n              {isMenuOpen ? <X size={24} /> : <Menu size={24} />}\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {isMenuOpen && (\n        <div className=\"md:hidden fixed inset-0 z-40\">\n          <div className=\"absolute inset-0 bg-background/70 backdrop-blur-sm\" onClick={closeMenu} aria-hidden=\"true\" />\n          <div\n            role=\"dialog\"\n            aria-modal=\"true\"\n            className=\"absolute top-0 right-0 h-full w-[80%] max-w-xs bg-card border-l border-border shadow-[0_0_40px_rgba(0,0,0,0.35)] p-6 flex flex-col gap-6\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-muted-foreground text-[10px] tracking-[0.3em] uppercase\">Меню</span>\n              <button onClick={closeMenu} className=\"text-foreground\" aria-label=\"Закрыть меню\">\n                <X size={20} />\n              </button>\n            </div>\n\n            <nav className=\"mt-5 flex flex-col gap-4\">\n              {navLinks.map((link) => (\n                <Link\n                  key={link.href}\n                  href={link.href}\n                  className=\"text-foreground text-[12px] tracking-wide hover:text-primary transition-colors\"\n                  onClick={closeMenu}\n                >\n                  {link.label}\n                </Link>\n              ))}\n            </nav>\n\n            <div className=\"mt-auto flex flex-col gap-3\">\n              {user ? (\n                <>\n                  <Link\n                    href=\"/account\"\n                    className=\"text-foreground text-[11px] tracking-wide border border-border py-2 text-center hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2\"\n                    onClick={closeMenu}\n                  >\n                    <User size={14} />\n                    {user.username}\n                  </Link>\n                  <button\n                    onClick={handleLogout}\n                    className=\"text-foreground text-[11px] tracking-wide border border-border py-2 text-center hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <LogOut size={14} />\n                    Выход\n                  </button>\n                </>\n              ) : (\n                <>\n                  <Link\n                    href=\"/login\"\n                    className=\"text-foreground text-[11px] tracking-wide border border-border py-2 text-center hover:border-primary hover:text-primary transition-colors\"\n                    onClick={closeMenu}\n                  >\n                    Вход\n                  </Link>\n                  <Link\n                    href=\"/register\"\n                    className=\"bg-primary text-primary-foreground text-[11px] tracking-[0.2em] py-2 text-center hover:bg-primary/80 transition-colors\"\n                    onClick={closeMenu}\n                  >\n                    Регистрация\n                  </Link>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/components/footer.tsx"],"sourcesContent":["import Link from \"next/link\"\n\nexport function Footer() {\n  return (\n    <footer className=\"bg-card border-t border-border mt-20\">\n      <div className=\"max-w-7xl mx-auto px-4 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          {/* Logo & Description */}\n          <div className=\"md:col-span-2\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-8 h-8 bg-primary flex items-center justify-center\">\n                <span className=\"text-background text-xs\">S</span>\n              </div>\n              <span className=\"text-primary text-xs\">SPACE VPN</span>\n            </div>\n            <p className=\"text-muted-foreground text-[8px] leading-relaxed max-w-md\">\n              Защитите свою приватность в интернете с помощью нашего VPN сервиса. Быстрое и надежное соединение по всему\n              миру.\n            </p>\n          </div>\n\n          {/* Links */}\n          <div>\n            <h4 className=\"text-foreground text-[10px] mb-4\">Навигация</h4>\n            <nav className=\"flex flex-col gap-2\">\n              <Link href=\"/\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                Главная\n              </Link>\n              <Link href=\"/pricing\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                Тарифы\n              </Link>\n              <Link href=\"/blog\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                Блог\n              </Link>\n              <Link href=\"/faq\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                FAQ\n              </Link>\n            </nav>\n          </div>\n\n          {/* Contact */}\n          <div>\n            <h4 className=\"text-foreground text-[10px] mb-4\">Контакты</h4>\n            <div className=\"flex flex-col gap-2 text-[8px] text-muted-foreground\">\n              <span>support@spacevpn.com</span>\n              <span>Telegram: @spacevpn</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"border-t border-border mt-8 pt-8 text-center\">\n          <p className=\"text-muted-foreground text-[8px]\">© 2025 Space VPN. Все права защищены.</p>\n        </div>\n      </div>\n    </footer>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS;IACd,qBACE,kPAAC;QAAO,WAAU;kBAChB,cAAA,kPAAC;YAAI,WAAU;;8BACb,kPAAC;oBAAI,WAAU;;sCAEb,kPAAC;4BAAI,WAAU;;8CACb,kPAAC;oCAAI,WAAU;;sDACb,kPAAC;4CAAI,WAAU;sDACb,cAAA,kPAAC;gDAAK,WAAU;0DAA0B;;;;;;;;;;;sDAE5C,kPAAC;4CAAK,WAAU;sDAAuB;;;;;;;;;;;;8CAEzC,kPAAC;oCAAE,WAAU;8CAA4D;;;;;;;;;;;;sCAO3E,kPAAC;;8CACC,kPAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,kPAAC;oCAAI,WAAU;;sDACb,kPAAC,+NAAI;4CAAC,MAAK;4CAAI,WAAU;sDAAsD;;;;;;sDAG/E,kPAAC,+NAAI;4CAAC,MAAK;4CAAW,WAAU;sDAAsD;;;;;;sDAGtF,kPAAC,+NAAI;4CAAC,MAAK;4CAAQ,WAAU;sDAAsD;;;;;;sDAGnF,kPAAC,+NAAI;4CAAC,MAAK;4CAAO,WAAU;sDAAsD;;;;;;;;;;;;;;;;;;sCAOtF,kPAAC;;8CACC,kPAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,kPAAC;oCAAI,WAAU;;sDACb,kPAAC;sDAAK;;;;;;sDACN,kPAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;8BAKZ,kPAAC;oBAAI,WAAU;8BACb,cAAA,kPAAC;wBAAE,WAAU;kCAAmC;;;;;;;;;;;;;;;;;;;;;;AAK1D;KAtDgB"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/components/pixel-stars.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\n\ninterface Star {\n  id: number\n  x: number\n  y: number\n  size: number\n  delay: number\n  type: \"dot\" | \"cross\"\n}\n\nexport function PixelStars() {\n  const [stars, setStars] = useState<Star[]>([])\n\n  useEffect(() => {\n    const generateStars = () => {\n      const newStars: Star[] = []\n      for (let i = 0; i < 100; i++) {\n        newStars.push({\n          id: i,\n          x: Math.random() * 100,\n          y: Math.random() * 100,\n          size: Math.random() > 0.8 ? 2 : 1,\n          delay: Math.random() * 3,\n          type: Math.random() > 0.7 ? \"cross\" : \"dot\",\n        })\n      }\n      setStars(newStars)\n    }\n    generateStars()\n  }, [])\n\n  return (\n    <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\n      {stars.map((star) => (\n        <div\n          key={star.id}\n          className=\"absolute star\"\n          style={{\n            left: `${star.x}%`,\n            top: `${star.y}%`,\n            animationDelay: `${star.delay}s`,\n          }}\n        >\n          {star.type === \"cross\" ? (\n            <div className=\"text-blue-300 text-opacity-60\" style={{ fontSize: `${star.size * 6}px` }}>\n              +\n            </div>\n          ) : (\n            <div\n              className=\"bg-cyan-300 rounded-none\"\n              style={{\n                width: `${star.size * 2}px`,\n                height: `${star.size * 2}px`,\n              }}\n            />\n          )}\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAaO,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8NAAQ,EAAS,EAAE;IAE7C,IAAA,+NAAS;gCAAC;YACR,MAAM;sDAAgB;oBACpB,MAAM,WAAmB,EAAE;oBAC3B,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,IAAK;wBAC5B,SAAS,IAAI,CAAC;4BACZ,IAAI;4BACJ,GAAG,KAAK,MAAM,KAAK;4BACnB,GAAG,KAAK,MAAM,KAAK;4BACnB,MAAM,KAAK,MAAM,KAAK,MAAM,IAAI;4BAChC,OAAO,KAAK,MAAM,KAAK;4BACvB,MAAM,KAAK,MAAM,KAAK,MAAM,UAAU;wBACxC;oBACF;oBACA,SAAS;gBACX;;YACA;QACF;+BAAG,EAAE;IAEL,qBACE,kPAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,kPAAC;gBAEC,WAAU;gBACV,OAAO;oBACL,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBAClB,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjB,gBAAgB,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC;gBAClC;0BAEC,KAAK,IAAI,KAAK,wBACb,kPAAC;oBAAI,WAAU;oBAAgC,OAAO;wBAAE,UAAU,GAAG,KAAK,IAAI,GAAG,EAAE,EAAE,CAAC;oBAAC;8BAAG;;;;;yCAI1F,kPAAC;oBACC,WAAU;oBACV,OAAO;wBACL,OAAO,GAAG,KAAK,IAAI,GAAG,EAAE,EAAE,CAAC;wBAC3B,QAAQ,GAAG,KAAK,IAAI,GAAG,EAAE,EAAE,CAAC;oBAC9B;;;;;;eAlBC,KAAK,EAAE;;;;;;;;;;AAyBtB;GAlDgB;KAAA"}},
    {"offset": {"line": 803, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/lib/api.ts"],"sourcesContent":["/**\n * API Client for SpaceVPN Backend\n *\n * IMPORTANT: Always use relative paths for API requests\n * to work correctly behind the nginx reverse proxy\n */\n\n// nginx proxies /api/v1/* to the backend\nexport const API_BASE_URL = '/api/v1'\n\nexport interface ApiResponse<T = any> {\n  data?: T\n  error?: string\n  message?: string\n  status?: number\n}\n\nexport interface User {\n  id: number\n  username: string\n  email: string | null\n  full_name: string | null\n  is_active: boolean\n  is_superuser: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport interface TokenResponse {\n  access_token: string\n  token_type: string\n}\n\nexport interface Tariff {\n  id: number\n  name: string\n  description: string | null\n  tagline?: string | null\n  duration_months: number\n  price: number\n  data_limit_gb: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  features?: string | null\n}\n\nexport interface VPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  name: string\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n  marzban_username?: string | null\n  pasarguard_username?: string | null  // Legacy field\n  device_info?: string | null\n  xray_config?: string | null\n  subscription_url?: string | null\n  qr_code?: string | null\n  last_connected_at?: string | null\n  created_at: string\n  updated_at?: string\n}\n\n/**\n * Extended VPN Key status with expiration info\n */\nexport interface VPNKeyStatus {\n  id: number\n  key_id: string  // Short ID like \"TJWMW\"\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n\n  // Expiration\n  expire_date: string | null\n  time_remaining: string | null  // \"19 ч.\", \"3 дня\"\n  time_remaining_seconds: number | null\n  is_expired: boolean\n\n  // Traffic\n  traffic_used_bytes: number\n  traffic_limit_bytes: number | null\n  traffic_used_gb: number\n  traffic_limit_gb: number | null\n  traffic_percentage: number | null\n\n  // VPN connection\n  subscription_url: string | null\n  qr_code: string | null\n  happ_deeplink: string | null\n\n  // Actions\n  can_extend: boolean\n  can_delete: boolean\n}\n\nexport interface VPNKeyListResponse {\n  keys: VPNKeyStatus[]\n  total: number\n}\n\nexport interface ExtendKeyRequest {\n  tariff_id?: number\n  days?: number\n}\n\nexport interface ExtendKeyResponse {\n  success: boolean\n  message: string\n  new_expire_date?: string\n  key_status?: VPNKeyStatus\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface RegenerateVPNClientPayload {\n  bypass_preset?: string\n  fingerprint?: string\n  server_name?: string\n}\n\nexport interface BypassPreset {\n  id: string\n  name: string\n  description: string\n  fingerprint: string\n  server_name: string\n  region: string\n  risk: string\n}\n\nexport interface BypassPresetsResponse {\n  presets: BypassPreset[]\n}\n\nexport interface VPNConfig {\n  client_uuid: string\n  name: string\n  xray_config: any  // JSON object\n  subscription_url: string  // VLESS URL\n  qr_code: string  // Base64 encoded image\n}\n\nexport interface Subscription {\n  id: number\n  user_id?: number\n  tariff_id: number\n  status: 'active' | 'expired' | 'cancelled'  // SubscriptionStatus\n  start_date: string\n  expire_date: string | null\n  data_limit: number  // bytes, 0 = unlimited\n  used_traffic: number  // bytes\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface MySubscriptionsResponse {\n  subscriptions: Subscription[]\n}\n\nexport interface VPNStatus {\n  status: 'none' | 'active' | 'expired' | 'cancelled'\n  expires_at: string | null\n  traffic_used: number | null  // bytes\n  traffic_limit: number | null  // bytes\n  traffic_used_gb: number | null  // GB\n  traffic_limit_gb: number | null  // GB\n  traffic_percentage: number | null  // 0-100\n  vless_uri: string | null\n  qr_code: string | null\n  subscription_id: number | null\n  tariff_name: string | null\n}\n\nexport interface AdminSubscription extends Subscription {\n  user?: User\n}\n\nexport interface HealthResponse {\n  status: string\n  uptime?: number\n  version?: string\n}\n\nexport interface ApiInfoResponse {\n  version: string\n  status: string\n  uptime?: number\n}\n\nexport interface UpdateProfilePayload {\n  email?: string | null\n  username?: string\n  full_name?: string | null\n  password?: string\n  current_password?: string\n}\n\nexport interface CreateSubscriptionPayload {\n  plan: string  // SubscriptionPlan: \"free\" | \"basic\" | \"premium\" | \"unlimited\"\n}\n\nexport interface UpdateSubscriptionPayload {\n  tariff_id?: string\n  end_date?: string\n  is_active?: boolean\n  data_limit_gb?: number\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface UpdateVPNClientPayload {\n  name?: string\n  device_info?: string\n}\n\nexport interface CreateTariffPayload {\n  name: string\n  duration_months: number\n  price: number\n  description?: string | null\n  tagline?: string | null\n  data_limit_gb?: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  sort_order?: number\n  features?: string | null\n}\n\nexport type UpdateTariffPayload = Partial<CreateTariffPayload>\n\nexport interface AdminVPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  marzban_username?: string\n  name?: string\n  device_info?: string\n  status: string\n  subscription_url?: string\n  qr_code?: string\n  created_at: string\n  updated_at?: string\n\n  // Extended info\n  user?: {\n    id: number\n    username: string\n    email?: string\n  }\n  expire_date?: string\n  time_remaining?: string\n  is_expired: boolean\n  traffic_used_gb: number\n  traffic_limit_gb: number\n}\n\nexport interface ExtendPayload {\n  days?: number\n  expires_at?: string\n}\n\nexport interface MarzbanSyncResponse {\n  total: number\n  synced: number\n  orphaned: number\n  errors: number\n  details?: Array<{\n    client_id: number\n    username: string\n    status: string\n    error?: string\n  }>\n}\n\n// Legacy alias\nexport type PasarguardSyncResponse = MarzbanSyncResponse\n\ntype QueryParams = Record<string, string | number | boolean | undefined>\n\nfunction buildEndpoint(endpoint: string): string {\n  const base = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL\n  if (!endpoint || endpoint === '/') {\n    return `${base}/`\n  }\n  const normalized = endpoint.startsWith('/') ? endpoint : `/${endpoint}`\n  return `${base}${normalized}`\n}\n\nfunction withQuery(endpoint: string, params?: QueryParams): string {\n  if (!params) return endpoint\n  const search = new URLSearchParams()\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null) return\n    search.append(key, String(value))\n  })\n  const query = search.toString()\n  return query ? `${endpoint}?${query}` : endpoint\n}\n\n/**\n * Get auth token from localStorage\n */\nexport function getAuthToken(): string | null {\n  if (typeof window === 'undefined') return null\n  return localStorage.getItem('auth_token')\n}\n\n/**\n * Set auth token in localStorage\n */\nexport function setAuthToken(token: string): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('auth_token', token)\n}\n\n/**\n * Remove auth token from localStorage\n */\nexport function removeAuthToken(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('auth_token')\n}\n\n/**\n * Get current user from localStorage\n */\nexport function getCurrentUser(): User | null {\n  if (typeof window === 'undefined') return null\n  const userJson = localStorage.getItem('current_user')\n  return userJson ? JSON.parse(userJson) : null\n}\n\n/**\n * Set current user in localStorage\n */\nexport function setCurrentUser(user: User): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('current_user', JSON.stringify(user))\n}\n\n/**\n * Remove current user from localStorage\n */\nexport function removeCurrentUser(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('current_user')\n}\n\nfunction safeParseJson(payload: string) {\n  try {\n    return JSON.parse(payload)\n  } catch {\n    return payload\n  }\n}\n\n/**\n * Make authenticated API request\n */\nasync function apiRequest<T = any>(endpoint: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\n  const token = getAuthToken()\n  const isFormData = typeof FormData !== 'undefined' && options.body instanceof FormData\n\n  const headers = new Headers(options.headers || {})\n  if (!headers.has('Accept')) {\n    headers.set('Accept', 'application/json')\n  }\n\n  const hasBody = options.body !== undefined && options.body !== null && options.body !== ''\n  if (!isFormData && hasBody && !headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json')\n  }\n\n  if (token && !headers.has('Authorization')) {\n    headers.set('Authorization', `Bearer ${token}`)\n  }\n\n  try {\n    const response = await fetch(buildEndpoint(endpoint), {\n      ...options,\n      headers,\n    })\n\n    const status = response.status\n    const raw = await response.text()\n    const payload = raw ? safeParseJson(raw) : undefined\n\n    if (!response.ok) {\n      if (status === 422 && Array.isArray((payload as any)?.detail)) {\n        const errors = (payload as any).detail\n          .map((err: any) => `${err.loc?.join(' → ') || 'Field'}: ${err.msg}`)\n          .join(', ')\n        return { error: errors, status }\n      }\n\n      const detail =\n        (payload as any)?.detail ||\n        (payload as any)?.message ||\n        (Array.isArray((payload as any)?.errors) ? (payload as any)?.errors.join(', ') : undefined)\n\n      return { error: typeof detail === 'string' ? detail : `HTTP ${status}`, status }\n    }\n\n    return { data: payload as T, status }\n  } catch (error) {\n    return {\n      error: error instanceof Error ? error.message : 'Network error',\n    }\n  }\n}\n\n/**\n * Authentication helpers\n */\nexport async function registerUser(\n  username: string,\n  email: string,\n  password: string,\n  fullName?: string\n): Promise<ApiResponse<User>> {\n  return apiRequest<User>('/auth/register', {\n    method: 'POST',\n    body: JSON.stringify({ username, email, password, full_name: fullName }),\n  })\n}\n\nexport async function loginUser(username: string, password: string): Promise<ApiResponse<TokenResponse>> {\n  const formData = new URLSearchParams()\n  formData.append('username', username)\n  formData.append('password', password)\n\n  const response = await apiRequest<TokenResponse>('/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: formData.toString(),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\n/**\n * OAuth Providers\n */\nexport interface OAuthProvider {\n  id: string\n  name: string\n  enabled: boolean\n  bot_username?: string  // For Telegram\n}\n\nexport interface OAuthProvidersResponse {\n  providers: OAuthProvider[]\n}\n\nexport async function getOAuthProviders(): Promise<ApiResponse<OAuthProvidersResponse>> {\n  return apiRequest<OAuthProvidersResponse>('/auth/oauth-providers')\n}\n\n/**\n * Google OAuth - Get auth URL\n */\nexport interface GoogleAuthResponse {\n  auth_url: string\n  state: string\n}\n\nexport async function getGoogleAuthUrl(): Promise<ApiResponse<GoogleAuthResponse>> {\n  return apiRequest<GoogleAuthResponse>('/auth/google')\n}\n\n/**\n * Telegram OAuth - Get bot info\n */\nexport interface TelegramAuthInfo {\n  bot_username: string\n  redirect_url: string\n}\n\nexport async function getTelegramAuthInfo(): Promise<ApiResponse<TelegramAuthInfo>> {\n  return apiRequest<TelegramAuthInfo>('/auth/telegram')\n}\n\n/**\n * Telegram OAuth - Callback\n */\nexport interface TelegramAuthData {\n  id: number\n  first_name: string\n  last_name?: string\n  username?: string\n  photo_url?: string\n  auth_date: number\n  hash: string\n}\n\nexport async function telegramAuthCallback(data: TelegramAuthData): Promise<ApiResponse<TokenResponse>> {\n  const response = await apiRequest<TokenResponse>('/auth/telegram/callback', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\nexport function logoutUser(): void {\n  removeAuthToken()\n  removeCurrentUser()\n}\n\nexport function isAuthenticated(): boolean {\n  return getAuthToken() !== null\n}\n\n/**\n * User profile endpoints\n */\nexport async function getCurrentUserInfo(): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me')\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n  return response\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: Endpoint /users/me/vpn вызывает 500 error\n// Используйте комбинацию getMySubscriptions() + listUserVPNClients()\n// export async function getUserVPNStatus(): Promise<ApiResponse<VPNStatus>> {\n//   return apiRequest<VPNStatus>('/users/me/vpn')\n// }\n\nexport async function updateCurrentUser(payload: UpdateProfilePayload): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me', {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n\n  return response\n}\n\nexport async function getUserById(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/users/${userId}`)\n}\n\nexport async function deleteUserById(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminListUsers(params?: QueryParams): Promise<ApiResponse<User[]>> {\n  return apiRequest<User[]>(withQuery('/admin/users/', params))  // Add trailing slash\n}\n\nexport async function adminGetUser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}`)\n}\n\nexport async function adminDeleteUser(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleUserActive(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/toggle-active`, { method: 'POST' })\n}\n\nexport async function adminMakeSuperuser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/make-superuser`, { method: 'POST' })\n}\n\n/**\n * Subscription endpoints (user)\n */\nexport async function getUserSubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getMySubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getSubscriptionById(id: string): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`)\n}\n\nexport async function createSubscription(payload: CreateSubscriptionPayload): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>('/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function updateSubscription(\n  id: string,\n  payload: UpdateSubscriptionPayload\n): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/subscriptions/${id}`, { method: 'DELETE' })\n}\n\n/**\n * Subscription endpoints (admin)\n */\nexport async function adminListSubscriptions(): Promise<ApiResponse<AdminSubscription[]>> {\n  return apiRequest<AdminSubscription[]>('/admin/subscriptions/')  // Add trailing slash\n}\n\nexport async function adminGetSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}`)\n}\n\nexport async function adminCreateSubscription(\n  payload: CreateSubscriptionPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>('/admin/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/subscriptions/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendSubscription(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Tariff endpoints\n */\nexport async function getPublicTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/tariffs/')  // Add trailing slash\n}\n\nexport async function getPublicTariffById(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/tariffs/${id}`)\n}\n\nexport async function adminListTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/admin/tariffs/')  // Add trailing slash\n}\n\nexport async function adminCreateTariff(payload: CreateTariffPayload): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>('/admin/tariffs/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateTariff(\n  id: string,\n  payload: UpdateTariffPayload\n): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteTariff(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/tariffs/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleTariff(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}/toggle`, { method: 'POST' })\n}\n\n/**\n * Subscription purchase endpoints\n */\nexport interface PurchaseFreeTariffRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface PurchaseFreeTariffResponse {\n  subscription_id: number\n  vpn_client_id: number\n  vless_uri: string\n  qr_code: string\n  expire_date: string\n  message: string\n}\n\nexport async function purchaseFreeTariff(\n  data: PurchaseFreeTariffRequest\n): Promise<ApiResponse<PurchaseFreeTariffResponse>> {\n  return apiRequest<PurchaseFreeTariffResponse>('/subscriptions/purchase-free', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n}\n\nexport interface CreateVPNClientResponse {\n  id: number\n  client_uuid: string\n  subscription_url: string\n  qr_code: string\n  name: string\n  device_info?: string\n  created_at: string\n}\n\nexport async function createUserVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<CreateVPNClientResponse>> {\n  return apiRequest<CreateVPNClientResponse>('/vpn-clients', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\n/**\n * VPN client endpoints (user)\n */\nexport async function listUserVPNClients(): Promise<ApiResponse<VPNClient[]>> {\n  return apiRequest<VPNClient[]>('/vpn-clients')\n}\n\nexport async function getUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`)\n}\n\nexport async function updateUserVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteUserVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/vpn-clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function getUserVPNClientConfig(id: string): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/config`)\n}\n\nexport async function regenerateUserVPNClient(id: string, payload?: RegenerateVPNClientPayload): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/regenerate`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function getBypassPresets(): Promise<ApiResponse<BypassPresetsResponse>> {\n  return apiRequest<BypassPresetsResponse>('/vpn-clients/bypass-presets')\n}\n\nexport async function syncUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}/sync`, { method: 'POST' })\n}\n\n/**\n * Get all VPN keys with extended status (expiration, traffic, deep links)\n */\nexport async function getUserVPNKeys(): Promise<ApiResponse<VPNKeyListResponse>> {\n  return apiRequest<VPNKeyListResponse>('/vpn-clients/keys')\n}\n\n/**\n * Get single VPN key status\n */\nexport async function getVPNKeyStatus(keyId: number): Promise<ApiResponse<VPNKeyStatus>> {\n  return apiRequest<VPNKeyStatus>(`/vpn-clients/keys/${keyId}`)\n}\n\n/**\n * Extend VPN key expiration\n */\nexport async function extendVPNKey(keyId: number, request?: ExtendKeyRequest): Promise<ApiResponse<ExtendKeyResponse>> {\n  return apiRequest<ExtendKeyResponse>(`/vpn-clients/keys/${keyId}/extend`, {\n    method: 'POST',\n    body: request ? JSON.stringify(request) : undefined,\n  })\n}\n\n/**\n * Get Happ VPN deep link for a key\n */\nexport async function getHappDeeplink(keyId: number): Promise<ApiResponse<{ happ_link: string; vless_url: string; qr_code: string }>> {\n  return apiRequest(`/vpn-clients/keys/${keyId}/happ-link`)\n}\n\n/**\n * VPN client endpoints (admin)\n */\nexport async function adminListVPNClients(): Promise<ApiResponse<AdminVPNClient[]>> {\n  return apiRequest<AdminVPNClient[]>('/admin/vpn/clients/')  // Add trailing slash\n}\n\nexport async function adminGetVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`)\n}\n\nexport async function adminCreateVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>('/admin/vpn/clients/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/vpn/clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendVPNClient(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Internal maintenance endpoints\n */\nexport async function syncAllVpnClients(): Promise<ApiResponse<MarzbanSyncResponse>> {\n  return apiRequest<MarzbanSyncResponse>('/internal/marzban/sync', { method: 'POST' })\n}\n\n// ============================================================================\n// Public API (без авторизации)\n// ============================================================================\n\n/**\n * Public Tariffs\n */\nexport interface PublicTariff {\n  id: number\n  name: string\n  description: string | null\n  price: number\n  duration_months: number\n  duration_days: number\n  data_limit_gb: number\n  is_featured: boolean\n}\n\nexport interface PublicTariffsResponse {\n  tariffs: PublicTariff[]\n}\n\nexport async function getPublicTariffsNoAuth(): Promise<ApiResponse<PublicTariffsResponse>> {\n  return apiRequest<PublicTariffsResponse>('/public/tariffs')\n}\n\n/**\n * Key Search\n */\nexport interface KeySearchRequest {\n  key_identifier: string\n}\n\nexport interface KeySearchResult {\n  found: boolean\n  key_id?: string\n  client_id?: number\n  status?: 'active' | 'expired'\n  expires_at?: string\n  time_remaining?: string\n  is_expired: boolean\n  can_renew: boolean\n}\n\nexport async function searchKeyPublic(keyIdentifier: string): Promise<ApiResponse<KeySearchResult>> {\n  return apiRequest<KeySearchResult>('/public/key/search', {\n    method: 'POST',\n    body: JSON.stringify({ key_identifier: keyIdentifier }),\n  })\n}\n\n/**\n * Create Key Without Registration\n */\nexport interface CreateKeyRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface CreateKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  subscription_url: string\n  qr_code?: string\n  expires_at: string\n  message: string\n}\n\nexport async function createKeyPublic(request: CreateKeyRequest): Promise<ApiResponse<CreateKeyResult>> {\n  return apiRequest<CreateKeyResult>('/public/key/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Renew Key\n */\nexport interface RenewKeyRequest {\n  key_identifier: string\n  tariff_id: number\n}\n\nexport interface RenewKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  new_expires_at: string\n  subscription_url: string\n  message: string\n}\n\nexport async function renewKeyPublic(request: RenewKeyRequest): Promise<ApiResponse<RenewKeyResult>> {\n  return apiRequest<RenewKeyResult>('/public/key/renew', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Admin Finance endpoints\n */\nexport interface AdminFinanceStats {\n  total_revenue: string\n  revenue_today: string\n  revenue_yesterday: string\n  revenue_this_week: string\n  revenue_this_month: string\n  revenue_last_month: string\n  total_payments: number\n  completed_payments: number\n  pending_payments: number\n  failed_payments: number\n  active_subscriptions: number\n  average_payment: string\n}\n\n// ----------------------------------------------------------------------------\n// YooKassa integration (frontend -> Next.js API routes)\n// ----------------------------------------------------------------------------\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: (data as any)?.error || (data as any)?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: (data as any)?.error || (data as any)?.message || `HTTP ${response.status}` }\n    }\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport interface AdminFinanceChartData {\n  labels: string[]\n  values: string[]\n}\n\nexport interface AdminPayment {\n  id: number\n  user_id: number\n  amount: string\n  status: string\n  payment_method?: string\n  created_at: string\n  updated_at: string\n  user?: User\n}\n\nexport async function getAdminFinanceStats(): Promise<ApiResponse<AdminFinanceStats>> {\n  return apiRequest<AdminFinanceStats>('/admin/finance/stats')\n}\n\nexport async function getAdminFinanceChart(\n  period: '7days' | '30days' | '12months'\n): Promise<ApiResponse<AdminFinanceChartData>> {\n  return apiRequest<AdminFinanceChartData>(`/admin/finance/chart/${period}`)\n}\n\nexport async function getAdminPayments(\n  params?: { skip?: number; limit?: number }\n): Promise<ApiResponse<AdminPayment[]>> {\n  return apiRequest<AdminPayment[]>(withQuery('/admin/finance/payments', params))\n}\n\n/**\n * Health & meta endpoints\n */\nexport async function getHealthStatus(): Promise<ApiResponse<HealthResponse>> {\n  return apiRequest<HealthResponse>('/health')\n}\n\nexport async function getApiInfo(): Promise<ApiResponse<ApiInfoResponse>> {\n  return apiRequest<ApiInfoResponse>('/')\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: YooKassa endpoints не реализованы на backend\n// Будет добавлено позже при интеграции платежного шлюза\n/*\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n*/\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1546, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/lib/api/payments.ts"],"sourcesContent":["/**\n * Payment API endpoints\n */\n\nimport { fetchAPI } from './client'\nimport type {\n  ApiResponse,\n  CreatePaymentRequest,\n  CreatePaymentResponse,\n  Payment,\n} from '@/types/api'\n\n/**\n * Создать платеж\n */\nexport async function createPayment(request: CreatePaymentRequest): Promise<ApiResponse<CreatePaymentResponse>> {\n  return fetchAPI<CreatePaymentResponse>('/payments/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Получить статус платежа\n */\nexport async function getPaymentStatus(paymentId: string): Promise<ApiResponse<Payment>> {\n  return fetchAPI<Payment>(`/payments/${paymentId}`)\n}\n\n/**\n * YooKassa payment flow helper\n * 1. Создать платеж\n * 2. Перенаправить на confirmation_url\n * 3. После возврата проверить статус\n */\nexport async function initiatePayment(\n  tariffId: number,\n  returnUrl?: string\n): Promise<ApiResponse<CreatePaymentResponse>> {\n  const response = await createPayment({\n    tariff_id: tariffId,\n    return_url: returnUrl || window.location.origin + '/account/keys',\n  })\n\n  if (response.data?.confirmation_url) {\n    window.location.href = response.data.confirmation_url\n  }\n\n  return response\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAED;;AAWO,eAAe,cAAc,OAA6B;IAC/D,OAAO,IAAA,wLAAQ,EAAwB,oBAAoB;QACzD,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAKO,eAAe,iBAAiB,SAAiB;IACtD,OAAO,IAAA,wLAAQ,EAAU,CAAC,UAAU,EAAE,WAAW;AACnD;AAQO,eAAe,gBACpB,QAAgB,EAChB,SAAkB;IAElB,MAAM,WAAW,MAAM,cAAc;QACnC,WAAW;QACX,YAAY,aAAa,OAAO,QAAQ,CAAC,MAAM,GAAG;IACpD;IAEA,IAAI,SAAS,IAAI,EAAE,kBAAkB;QACnC,OAAO,QAAQ,CAAC,IAAI,GAAG,SAAS,IAAI,CAAC,gBAAgB;IACvD;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/lib/api/public-api.ts"],"sourcesContent":["/**\n * Public API endpoints (без авторизации)\n */\n\nimport { fetchAPI } from './client'\nimport type {\n  ApiResponse,\n  PublicTariffsResponse,\n  KeySearchRequest,\n  KeySearchResult,\n  CreateKeyRequest,\n  CreateKeyResult,\n  RenewKeyRequest,\n  RenewKeyResult,\n  KeyByPaymentResponse,\n} from '@/types/api'\n\n/**\n * Получить список активных тарифов (PUBLIC)\n */\nexport async function getPublicTariffs(): Promise<ApiResponse<PublicTariffsResponse>> {\n  return fetchAPI<PublicTariffsResponse>('/public/tariffs')\n}\n\n/**\n * Поиск ключа по идентификатору\n */\nexport async function searchKey(keyIdentifier: string): Promise<ApiResponse<KeySearchResult>> {\n  return fetchAPI<KeySearchResult>('/public/key/search', {\n    method: 'POST',\n    body: JSON.stringify({ key_identifier: keyIdentifier } as KeySearchRequest),\n  })\n}\n\n/**\n * Создать ключ без регистрации\n */\nexport async function createKeyPublic(request: CreateKeyRequest): Promise<ApiResponse<CreateKeyResult>> {\n  return fetchAPI<CreateKeyResult>('/public/key/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Продлить ключ\n */\nexport async function renewKey(request: RenewKeyRequest): Promise<ApiResponse<RenewKeyResult>> {\n  return fetchAPI<RenewKeyResult>('/public/key/renew', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Получить ключ по ID платежа (с polling)\n * Используется после оплаты для получения ключа\n */\nexport async function getKeyByPayment(paymentId: string): Promise<ApiResponse<KeyByPaymentResponse>> {\n  return fetchAPI<KeyByPaymentResponse>(`/public/key/by-payment/${paymentId}`)\n}\n\n/**\n * Polling ключа после оплаты\n * Проверяет статус каждые 2 секунды до 15 раз (30 секунд)\n */\nexport async function pollKeyByPayment(\n  paymentId: string,\n  maxAttempts: number = 15,\n  intervalMs: number = 2000\n): Promise<ApiResponse<KeyByPaymentResponse>> {\n  for (let i = 0; i < maxAttempts; i++) {\n    const response = await getKeyByPayment(paymentId)\n\n    if (response.status === 200 && response.data) {\n      return response\n    }\n\n    if (response.status !== 202) {\n      return response\n    }\n\n    if (i < maxAttempts - 1) {\n      await new Promise(resolve => setTimeout(resolve, intervalMs))\n    }\n  }\n\n  return { error: 'Timeout: не удалось получить ключ после оплаты' }\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;AAED;;AAgBO,eAAe;IACpB,OAAO,IAAA,wLAAQ,EAAwB;AACzC;AAKO,eAAe,UAAU,aAAqB;IACnD,OAAO,IAAA,wLAAQ,EAAkB,sBAAsB;QACrD,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;YAAE,gBAAgB;QAAc;IACvD;AACF;AAKO,eAAe,gBAAgB,OAAyB;IAC7D,OAAO,IAAA,wLAAQ,EAAkB,sBAAsB;QACrD,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAKO,eAAe,SAAS,OAAwB;IACrD,OAAO,IAAA,wLAAQ,EAAiB,qBAAqB;QACnD,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAMO,eAAe,gBAAgB,SAAiB;IACrD,OAAO,IAAA,wLAAQ,EAAuB,CAAC,uBAAuB,EAAE,WAAW;AAC7E;AAMO,eAAe,iBACpB,SAAiB,EACjB,cAAsB,EAAE,EACxB,aAAqB,IAAI;IAEzB,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,IAAK;QACpC,MAAM,WAAW,MAAM,gBAAgB;QAEvC,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,IAAI,EAAE;YAC5C,OAAO;QACT;QAEA,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B,OAAO;QACT;QAEA,IAAI,IAAI,cAAc,GAAG;YACvB,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;QACnD;IACF;IAEA,OAAO;QAAE,OAAO;IAAiD;AACnE"}},
    {"offset": {"line": 1652, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/programming/pixel-space-vpn/app/buy-no-register/new-key/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useSearchParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { Header } from \"@/components/header\"\nimport { Footer } from \"@/components/footer\"\nimport { PixelStars } from \"@/components/pixel-stars\"\nimport { ArrowLeft, Loader2, CheckCircle2, Copy, QrCode, Download } from \"lucide-react\"\nimport {\n    getPublicTariffsNoAuth,\n    createKeyPublic,\n    type PublicTariff,\n    type CreateKeyResult\n} from \"@/lib/api\"\nimport { initiatePayment } from \"@/lib/api/payments\"\nimport { pollKeyByPayment } from \"@/lib/api/public-api\"\n\nexport default function NewKeyPage() {\n    const [tariffs, setTariffs] = useState<PublicTariff[]>([])\n    const [loading, setLoading] = useState(true)\n    const [creating, setCreating] = useState(false)\n    const [error, setError] = useState(\"\")\n    const [result, setResult] = useState<CreateKeyResult | null>(null)\n    const [copied, setCopied] = useState(false)\n    const [showQR, setShowQR] = useState(false)\n    const [selectedTariffId, setSelectedTariffId] = useState<number | null>(null)\n    const [paying, setPaying] = useState(false)\n\n    const searchParams = useSearchParams()\n\n    useEffect(() => {\n        loadTariffs()\n    }, [])\n\n    // If redirected back after payment, poll for the created key\n    useEffect(() => {\n        let paymentId = searchParams?.get(\"payment_id\")\n        if (!paymentId && typeof window !== 'undefined') {\n            paymentId = localStorage.getItem('last_payment_id') || undefined\n        }\n        if (!paymentId) return\n\n        const fetchKey = async () => {\n            setError(\"\")\n            const response = await pollKeyByPayment(paymentId)\n            if (response.data) {\n                // Normalize to CreateKeyResult-like structure for display\n                setResult({\n                    success: true,\n                    key_id: response.data.key_id,\n                    client_id: response.data.client_id,\n                    subscription_url: response.data.subscription_url,\n                    qr_code: response.data.qr_code,\n                    expires_at: response.data.expires_at,\n                    message: \"Оплата успешно выполнена. Ваш ключ создан!\",\n                })\n                // cleanup saved payment id\n                if (typeof window !== 'undefined') {\n                    localStorage.removeItem('last_payment_id')\n                }\n            } else {\n                setError(response.error || \"Не удалось получить ключ после оплаты\")\n            }\n        }\n\n        fetchKey()\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [searchParams])\n\n    const loadTariffs = async () => {\n        setLoading(true)\n        const response = await getPublicTariffsNoAuth()\n        if (response.data?.tariffs) {\n            setTariffs(response.data.tariffs)\n        } else {\n            setError(\"Не удалось загрузить тарифы\")\n        }\n        setLoading(false)\n    }\n\n    const handleCreateKey = async (tariffId: number) => {\n        setCreating(true)\n        setError(\"\")\n\n        const response = await createKeyPublic({\n            tariff_id: tariffId,\n            bypass_preset: \"yandex\",\n        })\n\n        if (response.data?.success) {\n            setResult(response.data)\n        } else {\n            setError(response.error || \"Не удалось создать ключ\")\n        }\n\n        setCreating(false)\n    }\n\n    const handleSelectTariff = (tariff: PublicTariff) => {\n        setSelectedTariffId(tariff.id)\n        setError(\"\")\n        // For free tariffs – create immediately\n        if (tariff.price === 0) {\n            handleCreateKey(tariff.id)\n        }\n    }\n\n    const handleProceedToPayment = async () => {\n        if (!selectedTariffId) return\n        setPaying(true)\n        setError(\"\")\n        try {\n            const returnUrl = `${window.location.origin}/buy-no-register/new-key`\n            const response = await initiatePayment(selectedTariffId, returnUrl)\n            if (response.data?.confirmation_url) {\n                if (response.data.payment_id && typeof window !== 'undefined') {\n                    localStorage.setItem('last_payment_id', response.data.payment_id)\n                }\n                // Redirect to YooKassa confirmation\n                window.location.href = response.data.confirmation_url\n            } else {\n                setError(response.error || \"Не удалось инициировать оплату\")\n            }\n        } catch (e) {\n            setError(e instanceof Error ? e.message : \"Ошибка оплаты\")\n        } finally {\n            setPaying(false)\n        }\n    }\n\n    const handleCopy = async (text: string) => {\n        await navigator.clipboard.writeText(text)\n        setCopied(true)\n        setTimeout(() => setCopied(false), 2000)\n    }\n\n    const formatDate = (dateStr: string) => {\n        return new Date(dateStr).toLocaleDateString('ru-RU', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit',\n        })\n    }\n\n    // Show result if key created\n    if (result) {\n        return (\n            <div className=\"min-h-screen bg-background relative\">\n                <PixelStars />\n                <Header />\n                <main className=\"relative z-10 px-4 pt-24 pb-20\">\n                    <div className=\"max-w-2xl mx-auto\">\n                        <div className=\"bg-card border-2 border-green-500 p-8 space-y-6\">\n                            <div className=\"text-center\">\n                                <CheckCircle2 className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\n                                <h1 className=\"text-2xl font-bold text-foreground mb-2\">\n                                    Ключ создан!\n                                </h1>\n                                <p className=\"text-muted-foreground\">{result.message}</p>\n                            </div>\n\n                            {/* Key ID */}\n                            <div className=\"bg-primary/10 border border-primary p-4 text-center\">\n                                <p className=\"text-sm text-muted-foreground mb-1\">Ваш ключ:</p>\n                                <p className=\"text-3xl font-mono font-bold text-primary\">{result.key_id}</p>\n                                <p className=\"text-xs text-muted-foreground mt-2\">\n                                    Действует до: {formatDate(result.expires_at)}\n                                </p>\n                            </div>\n\n                            {/* VLESS URL */}\n                            <div className=\"space-y-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <p className=\"text-sm text-muted-foreground\">VLESS ссылка:</p>\n                                    <button\n                                        onClick={() => setShowQR(!showQR)}\n                                        className=\"text-primary hover:text-primary/80 text-sm flex items-center gap-1\"\n                                    >\n                                        <QrCode size={16} />\n                                        {showQR ? 'Скрыть QR' : 'Показать QR'}\n                                    </button>\n                                </div>\n                                <div className=\"relative\">\n                                    <code className=\"block bg-muted p-4 text-xs break-all rounded\">\n                                        {result.subscription_url}\n                                    </code>\n                                    <button\n                                        onClick={() => handleCopy(result.subscription_url)}\n                                        className=\"absolute top-2 right-2 p-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded\"\n                                    >\n                                        {copied ? <CheckCircle2 size={16} /> : <Copy size={16} />}\n                                    </button>\n                                </div>\n                            </div>\n\n                            {/* QR Code */}\n                            {showQR && result.qr_code && (\n                                <div className=\"flex justify-center bg-white p-4 rounded\">\n                                    <img src={result.qr_code} alt=\"QR Code\" className=\"w-48 h-48\" />\n                                </div>\n                            )}\n\n                            {/* Instructions */}\n                            <div className=\"bg-primary/5 border border-primary/20 p-4 space-y-2\">\n                                <p className=\"text-foreground font-semibold\">Как подключиться:</p>\n                                <ol className=\"text-muted-foreground text-sm space-y-1 list-decimal list-inside\">\n                                    <li>Скачайте Happ VPN из App Store или Google Play</li>\n                                    <li>Нажмите кнопку \"Копировать\" выше</li>\n                                    <li>В приложении нажмите + → Импорт из буфера</li>\n                                    <li>Подключитесь к VPN</li>\n                                </ol>\n                            </div>\n\n                            {/* Action Buttons */}\n                            <div className=\"flex flex-col sm:flex-row gap-3\">\n                                <a\n                                    href=\"https://apps.apple.com/app/happ-vpn/id6478556657\"\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-3 font-semibold transition-colors\"\n                                >\n                                    <Download size={18} />\n                                    Скачать Happ VPN\n                                </a>\n                                <button\n                                    onClick={() => handleCopy(result.subscription_url)}\n                                    className=\"flex-1 flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-primary-foreground py-3 font-semibold transition-colors\"\n                                >\n                                    {copied ? <CheckCircle2 size={18} /> : <Copy size={18} />}\n                                    {copied ? 'Скопировано!' : 'Копировать ссылку'}\n                                </button>\n                            </div>\n\n                            {/* Warning */}\n                            <div className=\"bg-orange-500/10 border border-orange-500/50 p-4 text-center\">\n                                <p className=\"text-orange-500 text-sm font-semibold\">\n                                    ⚠️ Сохраните ключ {result.key_id}!\n                                </p>\n                                <p className=\"text-orange-400 text-xs mt-1\">\n                                    Он понадобится для продления подписки\n                                </p>\n                            </div>\n\n                            <Link\n                                href=\"/\"\n                                className=\"block text-center text-muted-foreground hover:text-primary text-sm\"\n                            >\n                                ← Вернуться на главную\n                            </Link>\n                        </div>\n                    </div>\n                </main>\n                <Footer />\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"min-h-screen bg-background relative\">\n            <PixelStars />\n            <Header />\n            <main className=\"relative z-10 px-4 pt-24 pb-20\">\n                <div className=\"max-w-4xl mx-auto\">\n                    {/* Warning banner */}\n                    <div className=\"bg-red-900/40 border-2 border-red-500 text-red-200 p-6 mb-8\">\n                        <p className=\"font-bold text-red-100 mb-2\">⚠️ ВАЖНО! Сохраните ваш ключ!</p>\n                        <p className=\"text-red-100 mb-3\">После покупки обязательно сохраните subscription URL ключа!</p>\n                        <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                            <li>Скопируйте ключ и сохраните его в надежном месте</li>\n                            <li>Без ключа вы не сможете подключиться к VPN</li>\n                            <li>Ключ понадобится для продления подписки</li>\n                            <li>Восстановить потерянный ключ невозможно!</li>\n                        </ul>\n                    </div>\n                    {/* Back Button */}\n                    <Link\n                        href=\"/buy-no-register\"\n                        className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-primary text-sm mb-8\"\n                    >\n                        <ArrowLeft size={16} />\n                        Назад\n                    </Link>\n\n                    {/* Title */}\n                    <div className=\"text-center mb-12\">\n                        <h1 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">\n                            Купить новый ключ\n                        </h1>\n                        <p className=\"text-muted-foreground\">\n                            Выберите тариф. Регистрация не требуется.\n                        </p>\n                    </div>\n\n                    {/* Error */}\n                    {error && (\n                        <div className=\"bg-red-500/10 border border-red-500 p-4 mb-6 text-center\">\n                            <p className=\"text-red-400\">{error}</p>\n                        </div>\n                    )}\n\n                    {/* Loading */}\n                    {loading && (\n                        <div className=\"text-center py-12\">\n                            <Loader2 className=\"w-8 h-8 animate-spin text-primary mx-auto\" />\n                            <p className=\"text-muted-foreground mt-4\">Загрузка тарифов...</p>\n                        </div>\n                    )}\n\n                    {/* Tariffs */}\n                    {!loading && tariffs.length > 0 && (\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                            {tariffs.map(tariff => {\n                                const isSelected = selectedTariffId === tariff.id\n                                const isFree = tariff.price === 0\n                                return (\n                                    <div\n                                        key={tariff.id}\n                                        className={`bg-card p-6 flex flex-col text-center border-2 ${isSelected ? 'border-green-500' : 'border-border'}`}\n                                    >\n                                        <button\n                                            onClick={() => handleSelectTariff(tariff)}\n                                            className=\"text-left w-full\"\n                                        >\n                                            <p className=\"text-foreground text-lg font-semibold\">\n                                                {tariff.duration_days} {tariff.duration_days === 1 ? 'день' : tariff.duration_days < 5 ? 'дня' : 'дней'}\n                                            </p>\n                                            <div className=\"mt-4\">\n                                                <span className=\"text-4xl font-bold text-primary\">{tariff.price}</span>\n                                                <span className=\"text-muted-foreground ml-1\">₽</span>\n                                            </div>\n                                        </button>\n\n                                        {isSelected && !isFree && (\n                                            <div className=\"mt-6\">\n                                                <button\n                                                    onClick={handleProceedToPayment}\n                                                    className=\"w-full py-3 font-semibold bg-green-500 hover:bg-green-600 text-white flex items-center justify-center gap-2\"\n                                                    disabled={paying}\n                                                >\n                                                    {paying ? (\n                                                        <>\n                                                            <Loader2 size={16} className=\"animate-spin\" />\n                                                            Переход к оплате...\n                                                        </>\n                                                    ) : (\n                                                        <>Перейти к оплате</>\n                                                    )}\n                                                </button>\n                                            </div>\n                                        )}\n\n                                        {isSelected && isFree && creating && (\n                                            <div className=\"mt-6 text-muted-foreground\">\n                                                <span className=\"inline-flex items-center gap-2\"><Loader2 size={16} className=\"animate-spin\" /> Создание ключа...</span>\n                                            </div>\n                                        )}\n                                    </div>\n                                )\n                            })}\n                        </div>\n                    )}\n                </div>\n            </main>\n            <Footer />\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}