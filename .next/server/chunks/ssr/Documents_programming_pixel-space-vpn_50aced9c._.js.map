{"version":3,"sources":["../../../../../../../Documents/programming/pixel-space-vpn/components/footer.tsx","../../../../../../../Documents/programming/pixel-space-vpn/node_modules/lucide-react/src/icons/copy.ts","../../../../../../../Documents/programming/pixel-space-vpn/lib/api.ts","../../../../../../../Documents/programming/pixel-space-vpn/node_modules/lucide-react/src/icons/loader-circle.ts","../../../../../../../Documents/programming/pixel-space-vpn/node_modules/lucide-react/src/icons/circle-check.ts","../../../../../../../Documents/programming/pixel-space-vpn/node_modules/lucide-react/src/icons/arrow-left.ts","../../../../../../../Documents/programming/pixel-space-vpn/node_modules/lucide-react/src/icons/download.ts","../../../../../../../Documents/programming/pixel-space-vpn/lib/api/payments.ts","../../../../../../../Documents/programming/pixel-space-vpn/app/buy-no-register/new-key/page.tsx","../../../../../../../Documents/programming/pixel-space-vpn/node_modules/lucide-react/src/icons/qr-code.ts","../../../../../../../Documents/programming/pixel-space-vpn/lib/api/public-api.ts"],"sourcesContent":["import Link from \"next/link\"\n\nexport function Footer() {\n  return (\n    <footer className=\"bg-card border-t border-border mt-20\">\n      <div className=\"max-w-7xl mx-auto px-4 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          {/* Logo & Description */}\n          <div className=\"md:col-span-2\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-8 h-8 bg-primary flex items-center justify-center\">\n                <span className=\"text-background text-xs\">S</span>\n              </div>\n              <span className=\"text-primary text-xs\">SPACE VPN</span>\n            </div>\n            <p className=\"text-muted-foreground text-[8px] leading-relaxed max-w-md\">\n              Защитите свою приватность в интернете с помощью нашего VPN сервиса. Быстрое и надежное соединение по всему\n              миру.\n            </p>\n          </div>\n\n          {/* Links */}\n          <div>\n            <h4 className=\"text-foreground text-[10px] mb-4\">Навигация</h4>\n            <nav className=\"flex flex-col gap-2\">\n              <Link href=\"/\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                Главная\n              </Link>\n              <Link href=\"/pricing\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                Тарифы\n              </Link>\n              <Link href=\"/blog\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                Блог\n              </Link>\n              <Link href=\"/faq\" className=\"text-muted-foreground hover:text-primary text-[8px]\">\n                FAQ\n              </Link>\n            </nav>\n          </div>\n\n          {/* Contact */}\n          <div>\n            <h4 className=\"text-foreground text-[10px] mb-4\">Контакты</h4>\n            <div className=\"flex flex-col gap-2 text-[8px] text-muted-foreground\">\n              <span>support@spacevpn.com</span>\n              <span>Telegram: @spacevpn</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"border-t border-border mt-8 pt-8 text-center\">\n          <p className=\"text-muted-foreground text-[8px]\">© 2025 Space VPN. Все права защищены.</p>\n        </div>\n      </div>\n    </footer>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Copy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Copy = createLucideIcon('Copy', [\n  ['rect', { width: '14', height: '14', x: '8', y: '8', rx: '2', ry: '2', key: '17jyea' }],\n  ['path', { d: 'M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2', key: 'zix9uf' }],\n]);\n\nexport default Copy;\n","/**\n * API Client for SpaceVPN Backend\n *\n * IMPORTANT: Always use relative paths for API requests\n * to work correctly behind the nginx reverse proxy\n */\n\n// nginx proxies /api/v1/* to the backend\nexport const API_BASE_URL = '/api/v1'\n\nexport interface ApiResponse<T = any> {\n  data?: T\n  error?: string\n  message?: string\n  status?: number\n}\n\nexport interface User {\n  id: number\n  username: string\n  email: string | null\n  full_name: string | null\n  is_active: boolean\n  is_superuser: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport interface TokenResponse {\n  access_token: string\n  token_type: string\n}\n\nexport interface Tariff {\n  id: number\n  name: string\n  description: string | null\n  tagline?: string | null\n  duration_months: number\n  price: number\n  data_limit_gb: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  features?: string | null\n}\n\nexport interface VPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  name: string\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n  marzban_username?: string | null\n  pasarguard_username?: string | null  // Legacy field\n  device_info?: string | null\n  xray_config?: string | null\n  subscription_url?: string | null\n  qr_code?: string | null\n  last_connected_at?: string | null\n  created_at: string\n  updated_at?: string\n}\n\n/**\n * Extended VPN Key status with expiration info\n */\nexport interface VPNKeyStatus {\n  id: number\n  key_id: string  // Short ID like \"TJWMW\"\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n\n  // Expiration\n  expire_date: string | null\n  time_remaining: string | null  // \"19 ч.\", \"3 дня\"\n  time_remaining_seconds: number | null\n  is_expired: boolean\n\n  // Traffic\n  traffic_used_bytes: number\n  traffic_limit_bytes: number | null\n  traffic_used_gb: number\n  traffic_limit_gb: number | null\n  traffic_percentage: number | null\n\n  // VPN connection\n  subscription_url: string | null\n  qr_code: string | null\n  happ_deeplink: string | null\n\n  // Actions\n  can_extend: boolean\n  can_delete: boolean\n}\n\nexport interface VPNKeyListResponse {\n  keys: VPNKeyStatus[]\n  total: number\n}\n\nexport interface ExtendKeyRequest {\n  tariff_id?: number\n  days?: number\n}\n\nexport interface ExtendKeyResponse {\n  success: boolean\n  message: string\n  new_expire_date?: string\n  key_status?: VPNKeyStatus\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface RegenerateVPNClientPayload {\n  bypass_preset?: string\n  fingerprint?: string\n  server_name?: string\n}\n\nexport interface BypassPreset {\n  id: string\n  name: string\n  description: string\n  fingerprint: string\n  server_name: string\n  region: string\n  risk: string\n}\n\nexport interface BypassPresetsResponse {\n  presets: BypassPreset[]\n}\n\nexport interface VPNConfig {\n  client_uuid: string\n  name: string\n  xray_config: any  // JSON object\n  subscription_url: string  // VLESS URL\n  qr_code: string  // Base64 encoded image\n}\n\nexport interface Subscription {\n  id: number\n  user_id?: number\n  tariff_id: number\n  status: 'active' | 'expired' | 'cancelled'  // SubscriptionStatus\n  start_date: string\n  expire_date: string | null\n  data_limit: number  // bytes, 0 = unlimited\n  used_traffic: number  // bytes\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface MySubscriptionsResponse {\n  subscriptions: Subscription[]\n}\n\nexport interface VPNStatus {\n  status: 'none' | 'active' | 'expired' | 'cancelled'\n  expires_at: string | null\n  traffic_used: number | null  // bytes\n  traffic_limit: number | null  // bytes\n  traffic_used_gb: number | null  // GB\n  traffic_limit_gb: number | null  // GB\n  traffic_percentage: number | null  // 0-100\n  vless_uri: string | null\n  qr_code: string | null\n  subscription_id: number | null\n  tariff_name: string | null\n}\n\nexport interface AdminSubscription extends Subscription {\n  user?: User\n}\n\nexport interface HealthResponse {\n  status: string\n  uptime?: number\n  version?: string\n}\n\nexport interface ApiInfoResponse {\n  version: string\n  status: string\n  uptime?: number\n}\n\nexport interface UpdateProfilePayload {\n  email?: string | null\n  username?: string\n  full_name?: string | null\n  password?: string\n  current_password?: string\n}\n\nexport interface CreateSubscriptionPayload {\n  plan: string  // SubscriptionPlan: \"free\" | \"basic\" | \"premium\" | \"unlimited\"\n}\n\nexport interface UpdateSubscriptionPayload {\n  tariff_id?: string\n  end_date?: string\n  is_active?: boolean\n  data_limit_gb?: number\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface UpdateVPNClientPayload {\n  name?: string\n  device_info?: string\n}\n\nexport interface CreateTariffPayload {\n  name: string\n  duration_months: number\n  price: number\n  description?: string | null\n  tagline?: string | null\n  data_limit_gb?: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  sort_order?: number\n  features?: string | null\n}\n\nexport type UpdateTariffPayload = Partial<CreateTariffPayload>\n\nexport interface AdminVPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  marzban_username?: string\n  name?: string\n  device_info?: string\n  status: string\n  subscription_url?: string\n  qr_code?: string\n  created_at: string\n  updated_at?: string\n\n  // Extended info\n  user?: {\n    id: number\n    username: string\n    email?: string\n  }\n  expire_date?: string\n  time_remaining?: string\n  is_expired: boolean\n  traffic_used_gb: number\n  traffic_limit_gb: number\n}\n\nexport interface ExtendPayload {\n  days?: number\n  expires_at?: string\n}\n\nexport interface MarzbanSyncResponse {\n  total: number\n  synced: number\n  orphaned: number\n  errors: number\n  details?: Array<{\n    client_id: number\n    username: string\n    status: string\n    error?: string\n  }>\n}\n\n// Legacy alias\nexport type PasarguardSyncResponse = MarzbanSyncResponse\n\ntype QueryParams = Record<string, string | number | boolean | undefined>\n\nfunction buildEndpoint(endpoint: string): string {\n  const base = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL\n  if (!endpoint || endpoint === '/') {\n    return `${base}/`\n  }\n  const normalized = endpoint.startsWith('/') ? endpoint : `/${endpoint}`\n  return `${base}${normalized}`\n}\n\nfunction withQuery(endpoint: string, params?: QueryParams): string {\n  if (!params) return endpoint\n  const search = new URLSearchParams()\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null) return\n    search.append(key, String(value))\n  })\n  const query = search.toString()\n  return query ? `${endpoint}?${query}` : endpoint\n}\n\n/**\n * Get auth token from localStorage\n */\nexport function getAuthToken(): string | null {\n  if (typeof window === 'undefined') return null\n  return localStorage.getItem('auth_token')\n}\n\n/**\n * Set auth token in localStorage\n */\nexport function setAuthToken(token: string): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('auth_token', token)\n}\n\n/**\n * Remove auth token from localStorage\n */\nexport function removeAuthToken(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('auth_token')\n}\n\n/**\n * Get current user from localStorage\n */\nexport function getCurrentUser(): User | null {\n  if (typeof window === 'undefined') return null\n  const userJson = localStorage.getItem('current_user')\n  return userJson ? JSON.parse(userJson) : null\n}\n\n/**\n * Set current user in localStorage\n */\nexport function setCurrentUser(user: User): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('current_user', JSON.stringify(user))\n}\n\n/**\n * Remove current user from localStorage\n */\nexport function removeCurrentUser(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('current_user')\n}\n\nfunction safeParseJson(payload: string) {\n  try {\n    return JSON.parse(payload)\n  } catch {\n    return payload\n  }\n}\n\n/**\n * Make authenticated API request\n */\nasync function apiRequest<T = any>(endpoint: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\n  const token = getAuthToken()\n  const isFormData = typeof FormData !== 'undefined' && options.body instanceof FormData\n\n  const headers = new Headers(options.headers || {})\n  if (!headers.has('Accept')) {\n    headers.set('Accept', 'application/json')\n  }\n\n  const hasBody = options.body !== undefined && options.body !== null && options.body !== ''\n  if (!isFormData && hasBody && !headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json')\n  }\n\n  if (token && !headers.has('Authorization')) {\n    headers.set('Authorization', `Bearer ${token}`)\n  }\n\n  try {\n    const response = await fetch(buildEndpoint(endpoint), {\n      ...options,\n      headers,\n    })\n\n    const status = response.status\n    const raw = await response.text()\n    const payload = raw ? safeParseJson(raw) : undefined\n\n    if (!response.ok) {\n      if (status === 422 && Array.isArray((payload as any)?.detail)) {\n        const errors = (payload as any).detail\n          .map((err: any) => `${err.loc?.join(' → ') || 'Field'}: ${err.msg}`)\n          .join(', ')\n        return { error: errors, status }\n      }\n\n      const detail =\n        (payload as any)?.detail ||\n        (payload as any)?.message ||\n        (Array.isArray((payload as any)?.errors) ? (payload as any)?.errors.join(', ') : undefined)\n\n      return { error: typeof detail === 'string' ? detail : `HTTP ${status}`, status }\n    }\n\n    return { data: payload as T, status }\n  } catch (error) {\n    return {\n      error: error instanceof Error ? error.message : 'Network error',\n    }\n  }\n}\n\n/**\n * Authentication helpers\n */\nexport async function registerUser(\n  username: string,\n  email: string,\n  password: string,\n  fullName?: string\n): Promise<ApiResponse<User>> {\n  return apiRequest<User>('/auth/register', {\n    method: 'POST',\n    body: JSON.stringify({ username, email, password, full_name: fullName }),\n  })\n}\n\nexport async function loginUser(username: string, password: string): Promise<ApiResponse<TokenResponse>> {\n  const formData = new URLSearchParams()\n  formData.append('username', username)\n  formData.append('password', password)\n\n  const response = await apiRequest<TokenResponse>('/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: formData.toString(),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\n/**\n * OAuth Providers\n */\nexport interface OAuthProvider {\n  id: string\n  name: string\n  enabled: boolean\n  bot_username?: string  // For Telegram\n}\n\nexport interface OAuthProvidersResponse {\n  providers: OAuthProvider[]\n}\n\nexport async function getOAuthProviders(): Promise<ApiResponse<OAuthProvidersResponse>> {\n  return apiRequest<OAuthProvidersResponse>('/auth/oauth-providers')\n}\n\n/**\n * Google OAuth - Get auth URL\n */\nexport interface GoogleAuthResponse {\n  auth_url: string\n  state: string\n}\n\nexport async function getGoogleAuthUrl(): Promise<ApiResponse<GoogleAuthResponse>> {\n  return apiRequest<GoogleAuthResponse>('/auth/google')\n}\n\n/**\n * Telegram OAuth - Get bot info\n */\nexport interface TelegramAuthInfo {\n  bot_username: string\n  redirect_url: string\n}\n\nexport async function getTelegramAuthInfo(): Promise<ApiResponse<TelegramAuthInfo>> {\n  return apiRequest<TelegramAuthInfo>('/auth/telegram')\n}\n\n/**\n * Telegram OAuth - Callback\n */\nexport interface TelegramAuthData {\n  id: number\n  first_name: string\n  last_name?: string\n  username?: string\n  photo_url?: string\n  auth_date: number\n  hash: string\n}\n\nexport async function telegramAuthCallback(data: TelegramAuthData): Promise<ApiResponse<TokenResponse>> {\n  const response = await apiRequest<TokenResponse>('/auth/telegram/callback', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\nexport function logoutUser(): void {\n  removeAuthToken()\n  removeCurrentUser()\n}\n\nexport function isAuthenticated(): boolean {\n  return getAuthToken() !== null\n}\n\n/**\n * User profile endpoints\n */\nexport async function getCurrentUserInfo(): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me')\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n  return response\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: Endpoint /users/me/vpn вызывает 500 error\n// Используйте комбинацию getMySubscriptions() + listUserVPNClients()\n// export async function getUserVPNStatus(): Promise<ApiResponse<VPNStatus>> {\n//   return apiRequest<VPNStatus>('/users/me/vpn')\n// }\n\nexport async function updateCurrentUser(payload: UpdateProfilePayload): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me', {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n\n  return response\n}\n\nexport async function getUserById(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/users/${userId}`)\n}\n\nexport async function deleteUserById(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminListUsers(params?: QueryParams): Promise<ApiResponse<User[]>> {\n  return apiRequest<User[]>(withQuery('/admin/users/', params))  // Add trailing slash\n}\n\nexport async function adminGetUser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}`)\n}\n\nexport async function adminDeleteUser(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleUserActive(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/toggle-active`, { method: 'POST' })\n}\n\nexport async function adminMakeSuperuser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/make-superuser`, { method: 'POST' })\n}\n\n/**\n * Subscription endpoints (user)\n */\nexport async function getUserSubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getMySubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getSubscriptionById(id: string): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`)\n}\n\nexport async function createSubscription(payload: CreateSubscriptionPayload): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>('/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function updateSubscription(\n  id: string,\n  payload: UpdateSubscriptionPayload\n): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/subscriptions/${id}`, { method: 'DELETE' })\n}\n\n/**\n * Subscription endpoints (admin)\n */\nexport async function adminListSubscriptions(): Promise<ApiResponse<AdminSubscription[]>> {\n  return apiRequest<AdminSubscription[]>('/admin/subscriptions/')  // Add trailing slash\n}\n\nexport async function adminGetSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}`)\n}\n\nexport async function adminCreateSubscription(\n  payload: CreateSubscriptionPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>('/admin/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/subscriptions/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendSubscription(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Tariff endpoints\n */\nexport async function getPublicTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/tariffs/')  // Add trailing slash\n}\n\nexport async function getPublicTariffById(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/tariffs/${id}`)\n}\n\nexport async function adminListTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/admin/tariffs/')  // Add trailing slash\n}\n\nexport async function adminCreateTariff(payload: CreateTariffPayload): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>('/admin/tariffs/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateTariff(\n  id: string,\n  payload: UpdateTariffPayload\n): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteTariff(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/tariffs/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleTariff(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}/toggle`, { method: 'POST' })\n}\n\n/**\n * Subscription purchase endpoints\n */\nexport interface PurchaseFreeTariffRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface PurchaseFreeTariffResponse {\n  subscription_id: number\n  vpn_client_id: number\n  vless_uri: string\n  qr_code: string\n  expire_date: string\n  message: string\n}\n\nexport async function purchaseFreeTariff(\n  data: PurchaseFreeTariffRequest\n): Promise<ApiResponse<PurchaseFreeTariffResponse>> {\n  return apiRequest<PurchaseFreeTariffResponse>('/subscriptions/purchase-free', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n}\n\nexport interface CreateVPNClientResponse {\n  id: number\n  client_uuid: string\n  subscription_url: string\n  qr_code: string\n  name: string\n  device_info?: string\n  created_at: string\n}\n\nexport async function createUserVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<CreateVPNClientResponse>> {\n  return apiRequest<CreateVPNClientResponse>('/vpn-clients', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\n/**\n * VPN client endpoints (user)\n */\nexport async function listUserVPNClients(): Promise<ApiResponse<VPNClient[]>> {\n  return apiRequest<VPNClient[]>('/vpn-clients')\n}\n\nexport async function getUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`)\n}\n\nexport async function updateUserVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteUserVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/vpn-clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function getUserVPNClientConfig(id: string): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/config`)\n}\n\nexport async function regenerateUserVPNClient(id: string, payload?: RegenerateVPNClientPayload): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/regenerate`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function getBypassPresets(): Promise<ApiResponse<BypassPresetsResponse>> {\n  return apiRequest<BypassPresetsResponse>('/vpn-clients/bypass-presets')\n}\n\nexport async function syncUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}/sync`, { method: 'POST' })\n}\n\n/**\n * Get all VPN keys with extended status (expiration, traffic, deep links)\n */\nexport async function getUserVPNKeys(): Promise<ApiResponse<VPNKeyListResponse>> {\n  return apiRequest<VPNKeyListResponse>('/vpn-clients/keys')\n}\n\n/**\n * Get single VPN key status\n */\nexport async function getVPNKeyStatus(keyId: number): Promise<ApiResponse<VPNKeyStatus>> {\n  return apiRequest<VPNKeyStatus>(`/vpn-clients/keys/${keyId}`)\n}\n\n/**\n * Extend VPN key expiration\n */\nexport async function extendVPNKey(keyId: number, request?: ExtendKeyRequest): Promise<ApiResponse<ExtendKeyResponse>> {\n  return apiRequest<ExtendKeyResponse>(`/vpn-clients/keys/${keyId}/extend`, {\n    method: 'POST',\n    body: request ? JSON.stringify(request) : undefined,\n  })\n}\n\n/**\n * Get Happ VPN deep link for a key\n */\nexport async function getHappDeeplink(keyId: number): Promise<ApiResponse<{ happ_link: string; vless_url: string; qr_code: string }>> {\n  return apiRequest(`/vpn-clients/keys/${keyId}/happ-link`)\n}\n\n/**\n * VPN client endpoints (admin)\n */\nexport async function adminListVPNClients(): Promise<ApiResponse<AdminVPNClient[]>> {\n  return apiRequest<AdminVPNClient[]>('/admin/vpn/clients/')  // Add trailing slash\n}\n\nexport async function adminGetVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`)\n}\n\nexport async function adminCreateVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>('/admin/vpn/clients/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/vpn/clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendVPNClient(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Internal maintenance endpoints\n */\nexport async function syncAllVpnClients(): Promise<ApiResponse<MarzbanSyncResponse>> {\n  return apiRequest<MarzbanSyncResponse>('/internal/marzban/sync', { method: 'POST' })\n}\n\n// ============================================================================\n// Public API (без авторизации)\n// ============================================================================\n\n/**\n * Public Tariffs\n */\nexport interface PublicTariff {\n  id: number\n  name: string\n  description: string | null\n  price: number\n  duration_months: number\n  duration_days: number\n  data_limit_gb: number\n  is_featured: boolean\n}\n\nexport interface PublicTariffsResponse {\n  tariffs: PublicTariff[]\n}\n\nexport async function getPublicTariffsNoAuth(): Promise<ApiResponse<PublicTariffsResponse>> {\n  return apiRequest<PublicTariffsResponse>('/public/tariffs')\n}\n\n/**\n * Key Search\n */\nexport interface KeySearchRequest {\n  key_identifier: string\n}\n\nexport interface KeySearchResult {\n  found: boolean\n  key_id?: string\n  client_id?: number\n  status?: 'active' | 'expired'\n  expires_at?: string\n  time_remaining?: string\n  is_expired: boolean\n  can_renew: boolean\n}\n\nexport async function searchKeyPublic(keyIdentifier: string): Promise<ApiResponse<KeySearchResult>> {\n  return apiRequest<KeySearchResult>('/public/key/search', {\n    method: 'POST',\n    body: JSON.stringify({ key_identifier: keyIdentifier }),\n  })\n}\n\n/**\n * Create Key Without Registration\n */\nexport interface CreateKeyRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface CreateKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  subscription_url: string\n  qr_code?: string\n  expires_at: string\n  message: string\n}\n\nexport async function createKeyPublic(request: CreateKeyRequest): Promise<ApiResponse<CreateKeyResult>> {\n  return apiRequest<CreateKeyResult>('/public/key/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Renew Key\n */\nexport interface RenewKeyRequest {\n  key_identifier: string\n  tariff_id: number\n}\n\nexport interface RenewKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  new_expires_at: string\n  subscription_url: string\n  message: string\n}\n\nexport async function renewKeyPublic(request: RenewKeyRequest): Promise<ApiResponse<RenewKeyResult>> {\n  return apiRequest<RenewKeyResult>('/public/key/renew', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Admin Finance endpoints\n */\nexport interface AdminFinanceStats {\n  total_revenue: string\n  revenue_today: string\n  revenue_yesterday: string\n  revenue_this_week: string\n  revenue_this_month: string\n  revenue_last_month: string\n  total_payments: number\n  completed_payments: number\n  pending_payments: number\n  failed_payments: number\n  active_subscriptions: number\n  average_payment: string\n}\n\n// ----------------------------------------------------------------------------\n// YooKassa integration (frontend -> Next.js API routes)\n// ----------------------------------------------------------------------------\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: (data as any)?.error || (data as any)?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: (data as any)?.error || (data as any)?.message || `HTTP ${response.status}` }\n    }\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport interface AdminFinanceChartData {\n  labels: string[]\n  values: string[]\n}\n\nexport interface AdminPayment {\n  id: number\n  user_id: number\n  amount: string\n  status: string\n  payment_method?: string\n  created_at: string\n  updated_at: string\n  user?: User\n}\n\nexport async function getAdminFinanceStats(): Promise<ApiResponse<AdminFinanceStats>> {\n  return apiRequest<AdminFinanceStats>('/admin/finance/stats')\n}\n\nexport async function getAdminFinanceChart(\n  period: '7days' | '30days' | '12months'\n): Promise<ApiResponse<AdminFinanceChartData>> {\n  return apiRequest<AdminFinanceChartData>(`/admin/finance/chart/${period}`)\n}\n\nexport async function getAdminPayments(\n  params?: { skip?: number; limit?: number }\n): Promise<ApiResponse<AdminPayment[]>> {\n  return apiRequest<AdminPayment[]>(withQuery('/admin/finance/payments', params))\n}\n\n/**\n * Health & meta endpoints\n */\nexport async function getHealthStatus(): Promise<ApiResponse<HealthResponse>> {\n  return apiRequest<HealthResponse>('/health')\n}\n\nexport async function getApiInfo(): Promise<ApiResponse<ApiInfoResponse>> {\n  return apiRequest<ApiInfoResponse>('/')\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: YooKassa endpoints не реализованы на backend\n// Будет добавлено позже при интеграции платежного шлюза\n/*\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n*/\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CircleCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtOSAxMiAyIDIgNC00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheck = createLucideIcon('CircleCheck', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm9 12 2 2 4-4', key: 'dzmm74' }],\n]);\n\nexport default CircleCheck;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Download\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSI3IDEwIDEyIDE1IDE3IDEwIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTUiIHkyPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/download\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Download = createLucideIcon('Download', [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '7 10 12 15 17 10', key: '2ggqvy' }],\n  ['line', { x1: '12', x2: '12', y1: '15', y2: '3', key: '1vk2je' }],\n]);\n\nexport default Download;\n","/**\n * Payment API endpoints\n */\n\nimport { fetchAPI } from './client'\nimport type {\n  ApiResponse,\n  CreatePaymentRequest,\n  CreatePaymentResponse,\n  Payment,\n} from '@/types/api'\n\n/**\n * Создать платеж\n */\nexport async function createPayment(request: CreatePaymentRequest): Promise<ApiResponse<CreatePaymentResponse>> {\n  return fetchAPI<CreatePaymentResponse>('/payments/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Получить статус платежа\n */\nexport async function getPaymentStatus(paymentId: string): Promise<ApiResponse<Payment>> {\n  return fetchAPI<Payment>(`/payments/${paymentId}`)\n}\n\n/**\n * YooKassa payment flow helper\n * 1. Создать платеж\n * 2. Перенаправить на confirmation_url\n * 3. После возврата проверить статус\n */\nexport async function initiatePayment(\n  tariffId: number,\n  returnUrl?: string\n): Promise<ApiResponse<CreatePaymentResponse>> {\n  const response = await createPayment({\n    tariff_id: tariffId,\n    return_url: returnUrl || window.location.origin + '/account/keys',\n  })\n\n  if (response.data?.confirmation_url) {\n    window.location.href = response.data.confirmation_url\n  }\n\n  return response\n}\n","\"use client\"\n\nimport { useState, useEffect, Suspense } from \"react\"\nimport { useSearchParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { Header } from \"@/components/header\"\nimport { Footer } from \"@/components/footer\"\nimport { PixelStars } from \"@/components/pixel-stars\"\nimport { ArrowLeft, Loader2, CheckCircle2, Copy, QrCode, Download } from \"lucide-react\"\nimport {\n    getPublicTariffsNoAuth,\n    createKeyPublic,\n    type PublicTariff,\n    type CreateKeyResult\n} from \"@/lib/api\"\nimport { initiatePayment } from \"@/lib/api/payments\"\nimport { pollKeyByPayment } from \"@/lib/api/public-api\"\n\nfunction NewKeyPageContent() {\n    const [tariffs, setTariffs] = useState<PublicTariff[]>([])\n    const [loading, setLoading] = useState(true)\n    const [creating, setCreating] = useState(false)\n    const [error, setError] = useState(\"\")\n    const [result, setResult] = useState<CreateKeyResult | null>(null)\n    const [copied, setCopied] = useState(false)\n    const [showQR, setShowQR] = useState(false)\n    const [selectedTariffId, setSelectedTariffId] = useState<number | null>(null)\n    const [paying, setPaying] = useState(false)\n\n    const searchParams = useSearchParams()\n\n    useEffect(() => {\n        loadTariffs()\n    }, [])\n\n    // If redirected back after payment, poll for the created key\n    useEffect(() => {\n        let paymentId = searchParams?.get(\"payment_id\")\n        if (!paymentId && typeof window !== 'undefined') {\n            paymentId = localStorage.getItem('last_payment_id') || undefined\n        }\n        if (!paymentId) return\n\n        const fetchKey = async () => {\n            setError(\"\")\n            const response = await pollKeyByPayment(paymentId)\n            if (response.data) {\n                // Normalize to CreateKeyResult-like structure for display\n                setResult({\n                    success: true,\n                    key_id: response.data.key_id,\n                    client_id: response.data.client_id,\n                    subscription_url: response.data.subscription_url,\n                    qr_code: response.data.qr_code,\n                    expires_at: response.data.expires_at,\n                    message: \"Оплата успешно выполнена. Ваш ключ создан!\",\n                })\n                // cleanup saved payment id\n                if (typeof window !== 'undefined') {\n                    localStorage.removeItem('last_payment_id')\n                }\n            } else {\n                setError(response.error || \"Не удалось получить ключ после оплаты\")\n            }\n        }\n\n        fetchKey()\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [searchParams])\n\n    const loadTariffs = async () => {\n        setLoading(true)\n        const response = await getPublicTariffsNoAuth()\n        if (response.data?.tariffs) {\n            setTariffs(response.data.tariffs)\n        } else {\n            setError(\"Не удалось загрузить тарифы\")\n        }\n        setLoading(false)\n    }\n\n    const handleCreateKey = async (tariffId: number) => {\n        setCreating(true)\n        setError(\"\")\n\n        const response = await createKeyPublic({\n            tariff_id: tariffId,\n            bypass_preset: \"yandex\",\n        })\n\n        if (response.data?.success) {\n            setResult(response.data)\n        } else {\n            setError(response.error || \"Не удалось создать ключ\")\n        }\n\n        setCreating(false)\n    }\n\n    const handleSelectTariff = (tariff: PublicTariff) => {\n        setSelectedTariffId(tariff.id)\n        setError(\"\")\n        // For free tariffs – create immediately\n        if (tariff.price === 0) {\n            handleCreateKey(tariff.id)\n        }\n    }\n\n    const handleProceedToPayment = async () => {\n        if (!selectedTariffId) return\n        setPaying(true)\n        setError(\"\")\n        try {\n            const returnUrl = `${window.location.origin}/buy-no-register/new-key`\n            const response = await initiatePayment(selectedTariffId, returnUrl)\n            if (response.data?.confirmation_url) {\n                if (response.data.payment_id && typeof window !== 'undefined') {\n                    localStorage.setItem('last_payment_id', response.data.payment_id)\n                }\n                // Redirect to YooKassa confirmation\n                window.location.href = response.data.confirmation_url\n            } else {\n                setError(response.error || \"Не удалось инициировать оплату\")\n            }\n        } catch (e) {\n            setError(e instanceof Error ? e.message : \"Ошибка оплаты\")\n        } finally {\n            setPaying(false)\n        }\n    }\n\n    const handleCopy = async (text: string) => {\n        await navigator.clipboard.writeText(text)\n        setCopied(true)\n        setTimeout(() => setCopied(false), 2000)\n    }\n\n    const formatDate = (dateStr: string) => {\n        return new Date(dateStr).toLocaleDateString('ru-RU', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit',\n        })\n    }\n\n    // Show result if key created\n    if (result) {\n        return (\n            <div className=\"min-h-screen bg-background relative\">\n                <PixelStars />\n                <Header />\n                <main className=\"relative z-10 px-4 pt-24 pb-20\">\n                    <div className=\"max-w-2xl mx-auto\">\n                        <div className=\"bg-card border-2 border-green-500 p-8 space-y-6\">\n                            <div className=\"text-center\">\n                                <CheckCircle2 className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\n                                <h1 className=\"text-2xl font-bold text-foreground mb-2\">\n                                    Ключ создан!\n                                </h1>\n                                <p className=\"text-muted-foreground\">{result.message}</p>\n                            </div>\n\n                            {/* Key ID */}\n                            <div className=\"bg-primary/10 border border-primary p-4 text-center\">\n                                <p className=\"text-sm text-muted-foreground mb-1\">Ваш ключ:</p>\n                                <p className=\"text-3xl font-mono font-bold text-primary\">{result.key_id}</p>\n                                <p className=\"text-xs text-muted-foreground mt-2\">\n                                    Действует до: {formatDate(result.expires_at)}\n                                </p>\n                            </div>\n\n                            {/* VLESS URL */}\n                            <div className=\"space-y-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <p className=\"text-sm text-muted-foreground\">VLESS ссылка:</p>\n                                    <button\n                                        onClick={() => setShowQR(!showQR)}\n                                        className=\"text-primary hover:text-primary/80 text-sm flex items-center gap-1\"\n                                    >\n                                        <QrCode size={16} />\n                                        {showQR ? 'Скрыть QR' : 'Показать QR'}\n                                    </button>\n                                </div>\n                                <div className=\"relative\">\n                                    <code className=\"block bg-muted p-4 text-xs break-all rounded\">\n                                        {result.subscription_url}\n                                    </code>\n                                    <button\n                                        onClick={() => handleCopy(result.subscription_url)}\n                                        className=\"absolute top-2 right-2 p-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded\"\n                                    >\n                                        {copied ? <CheckCircle2 size={16} /> : <Copy size={16} />}\n                                    </button>\n                                </div>\n                            </div>\n\n                            {/* QR Code */}\n                            {showQR && result.qr_code && (\n                                <div className=\"flex justify-center bg-white p-4 rounded\">\n                                    <img src={result.qr_code} alt=\"QR Code\" className=\"w-48 h-48\" />\n                                </div>\n                            )}\n\n                            {/* Instructions */}\n                            <div className=\"bg-primary/5 border border-primary/20 p-4 space-y-2\">\n                                <p className=\"text-foreground font-semibold\">Как подключиться:</p>\n                                <ol className=\"text-muted-foreground text-sm space-y-1 list-decimal list-inside\">\n                                    <li>Скачайте Happ VPN из App Store или Google Play</li>\n                                    <li>Нажмите кнопку \"Копировать\" выше</li>\n                                    <li>В приложении нажмите + → Импорт из буфера</li>\n                                    <li>Подключитесь к VPN</li>\n                                </ol>\n                            </div>\n\n                            {/* Action Buttons */}\n                            <div className=\"flex flex-col sm:flex-row gap-3\">\n                                <a\n                                    href=\"https://apps.apple.com/app/happ-vpn/id6478556657\"\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-3 font-semibold transition-colors\"\n                                >\n                                    <Download size={18} />\n                                    Скачать Happ VPN\n                                </a>\n                                <button\n                                    onClick={() => handleCopy(result.subscription_url)}\n                                    className=\"flex-1 flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-primary-foreground py-3 font-semibold transition-colors\"\n                                >\n                                    {copied ? <CheckCircle2 size={18} /> : <Copy size={18} />}\n                                    {copied ? 'Скопировано!' : 'Копировать ссылку'}\n                                </button>\n                            </div>\n\n                            {/* Warning */}\n                            <div className=\"bg-orange-500/10 border border-orange-500/50 p-4 text-center\">\n                                <p className=\"text-orange-500 text-sm font-semibold\">\n                                    ⚠️ Сохраните ключ {result.key_id}!\n                                </p>\n                                <p className=\"text-orange-400 text-xs mt-1\">\n                                    Он понадобится для продления подписки\n                                </p>\n                            </div>\n\n                            <Link\n                                href=\"/\"\n                                className=\"block text-center text-muted-foreground hover:text-primary text-sm\"\n                            >\n                                ← Вернуться на главную\n                            </Link>\n                        </div>\n                    </div>\n                </main>\n                <Footer />\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"min-h-screen bg-background relative\">\n            <PixelStars />\n            <Header />\n            <main className=\"relative z-10 px-4 pt-24 pb-20\">\n                <div className=\"max-w-4xl mx-auto\">\n                    {/* Warning banner */}\n                    <div className=\"bg-red-900/40 border-2 border-red-500 text-red-200 p-6 mb-8\">\n                        <p className=\"font-bold text-red-100 mb-2\">⚠️ ВАЖНО! Сохраните ваш ключ!</p>\n                        <p className=\"text-red-100 mb-3\">После покупки обязательно сохраните subscription URL ключа!</p>\n                        <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                            <li>Скопируйте ключ и сохраните его в надежном месте</li>\n                            <li>Без ключа вы не сможете подключиться к VPN</li>\n                            <li>Ключ понадобится для продления подписки</li>\n                            <li>Восстановить потерянный ключ невозможно!</li>\n                        </ul>\n                    </div>\n                    {/* Back Button */}\n                    <Link\n                        href=\"/buy-no-register\"\n                        className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-primary text-sm mb-8\"\n                    >\n                        <ArrowLeft size={16} />\n                        Назад\n                    </Link>\n\n                    {/* Title */}\n                    <div className=\"text-center mb-12\">\n                        <h1 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">\n                            Купить новый ключ\n                        </h1>\n                        <p className=\"text-muted-foreground\">\n                            Выберите тариф. Регистрация не требуется.\n                        </p>\n                    </div>\n\n                    {/* Error */}\n                    {error && (\n                        <div className=\"bg-red-500/10 border border-red-500 p-4 mb-6 text-center\">\n                            <p className=\"text-red-400\">{error}</p>\n                        </div>\n                    )}\n\n                    {/* Loading */}\n                    {loading && (\n                        <div className=\"text-center py-12\">\n                            <Loader2 className=\"w-8 h-8 animate-spin text-primary mx-auto\" />\n                            <p className=\"text-muted-foreground mt-4\">Загрузка тарифов...</p>\n                        </div>\n                    )}\n\n                    {/* Tariffs */}\n                    {!loading && tariffs.length > 0 && (\n                        <div className=\"space-y-4 max-w-2xl mx-auto\">\n                            {tariffs.map(tariff => {\n                                const isSelected = selectedTariffId === tariff.id\n                                const isFree = tariff.price === 0\n\n                                // Determine duration text\n                                let durationText = \"\"\n                                if (tariff.duration_days === 1) {\n                                    durationText = \"1 день\"\n                                } else if (tariff.duration_days === 30) {\n                                    durationText = \"1 месяц\"\n                                } else if (tariff.duration_days === 90) {\n                                    durationText = \"3 месяца\"\n                                } else if (tariff.duration_days === 180) {\n                                    durationText = \"6 месяцев\"\n                                } else if (tariff.duration_days === 365) {\n                                    durationText = \"12 месяцев\"\n                                } else if (tariff.duration_days === 0) {\n                                    durationText = \"0 дня\"\n                                } else {\n                                    durationText = `${tariff.duration_days} ${tariff.duration_days < 5 ? 'дня' : 'дней'}`\n                                }\n\n                                return (\n                                    <div key={tariff.id} className=\"space-y-3\">\n                                        <button\n                                            onClick={() => handleSelectTariff(tariff)}\n                                            className={`w-full bg-slate-800/50 hover:bg-slate-800/70 border-2 ${isSelected ? 'border-green-500' : 'border-slate-700'\n                                                } p-4 transition-all flex items-center justify-between group`}\n                                        >\n                                            <div className=\"text-left\">\n                                                <p className=\"text-white text-base font-semibold\">\n                                                    {tariff.name}\n                                                </p>\n                                                <p className=\"text-slate-400 text-sm mt-1\">\n                                                    {durationText}\n                                                </p>\n                                            </div>\n                                            <div className=\"text-right\">\n                                                <p className=\"text-white text-2xl font-bold\">\n                                                    {tariff.price} ₽\n                                                </p>\n                                            </div>\n                                        </button>\n\n                                        {isSelected && !isFree && (\n                                            <button\n                                                onClick={handleProceedToPayment}\n                                                className=\"w-full py-3 font-semibold bg-green-500 hover:bg-green-600 text-white flex items-center justify-center gap-2 transition-colors\"\n                                                disabled={paying}\n                                            >\n                                                {paying ? (\n                                                    <>\n                                                        <Loader2 size={16} className=\"animate-spin\" />\n                                                        Переход к оплате...\n                                                    </>\n                                                ) : (\n                                                    <>Перейти к оплате</>\n                                                )}\n                                            </button>\n                                        )}\n\n                                        {isSelected && isFree && creating && (\n                                            <div className=\"w-full py-3 text-muted-foreground text-center\">\n                                                <span className=\"inline-flex items-center gap-2\">\n                                                    <Loader2 size={16} className=\"animate-spin\" /> Создание ключа...\n                                                </span>\n                                            </div>\n                                        )}\n                                    </div>\n                                )\n                            })}\n                        </div>\n                    )}\n                </div>\n            </main>\n            <Footer />\n        </div>\n    )\n}\n\nexport default function NewKeyPage() {\n    return (\n        <Suspense fallback={\n            <div className=\"min-h-screen flex items-center justify-center\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-purple-500\" />\n            </div>\n        }>\n            <NewKeyPageContent />\n        </Suspense>\n    )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name QrCode\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiB4PSIxNiIgeT0iMyIgcng9IjEiIC8+CiAgPHJlY3Qgd2lkdGg9IjUiIGhlaWdodD0iNSIgeD0iMyIgeT0iMTYiIHJ4PSIxIiAvPgogIDxwYXRoIGQ9Ik0yMSAxNmgtM2EyIDIgMCAwIDAtMiAydjMiIC8+CiAgPHBhdGggZD0iTTIxIDIxdi4wMSIgLz4KICA8cGF0aCBkPSJNMTIgN3YzYTIgMiAwIDAgMS0yIDJINyIgLz4KICA8cGF0aCBkPSJNMyAxMmguMDEiIC8+CiAgPHBhdGggZD0iTTEyIDNoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xMiAxNnYuMDEiIC8+CiAgPHBhdGggZD0iTTE2IDEyaDEiIC8+CiAgPHBhdGggZD0iTTIxIDEydi4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMjF2LTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/qr-code\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst QrCode = createLucideIcon('QrCode', [\n  ['rect', { width: '5', height: '5', x: '3', y: '3', rx: '1', key: '1tu5fj' }],\n  ['rect', { width: '5', height: '5', x: '16', y: '3', rx: '1', key: '1v8r4q' }],\n  ['rect', { width: '5', height: '5', x: '3', y: '16', rx: '1', key: '1x03jg' }],\n  ['path', { d: 'M21 16h-3a2 2 0 0 0-2 2v3', key: '177gqh' }],\n  ['path', { d: 'M21 21v.01', key: 'ents32' }],\n  ['path', { d: 'M12 7v3a2 2 0 0 1-2 2H7', key: '8crl2c' }],\n  ['path', { d: 'M3 12h.01', key: 'nlz23k' }],\n  ['path', { d: 'M12 3h.01', key: 'n36tog' }],\n  ['path', { d: 'M12 16v.01', key: '133mhm' }],\n  ['path', { d: 'M16 12h1', key: '1slzba' }],\n  ['path', { d: 'M21 12v.01', key: '1lwtk9' }],\n  ['path', { d: 'M12 21v-1', key: '1880an' }],\n]);\n\nexport default QrCode;\n","/**\n * Public API endpoints (без авторизации)\n */\n\nimport { fetchAPI } from './client'\nimport type {\n  ApiResponse,\n  PublicTariffsResponse,\n  KeySearchRequest,\n  KeySearchResult,\n  CreateKeyRequest,\n  CreateKeyResult,\n  RenewKeyRequest,\n  RenewKeyResult,\n  KeyByPaymentResponse,\n} from '@/types/api'\n\n/**\n * Получить список активных тарифов (PUBLIC)\n */\nexport async function getPublicTariffs(): Promise<ApiResponse<PublicTariffsResponse>> {\n  return fetchAPI<PublicTariffsResponse>('/public/tariffs')\n}\n\n/**\n * Поиск ключа по идентификатору\n */\nexport async function searchKey(keyIdentifier: string): Promise<ApiResponse<KeySearchResult>> {\n  return fetchAPI<KeySearchResult>('/public/key/search', {\n    method: 'POST',\n    body: JSON.stringify({ key_identifier: keyIdentifier } as KeySearchRequest),\n  })\n}\n\n/**\n * Создать ключ без регистрации\n */\nexport async function createKeyPublic(request: CreateKeyRequest): Promise<ApiResponse<CreateKeyResult>> {\n  return fetchAPI<CreateKeyResult>('/public/key/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Продлить ключ\n */\nexport async function renewKey(request: RenewKeyRequest): Promise<ApiResponse<RenewKeyResult>> {\n  return fetchAPI<RenewKeyResult>('/public/key/renew', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Получить ключ по ID платежа (с polling)\n * Используется после оплаты для получения ключа\n */\nexport async function getKeyByPayment(paymentId: string): Promise<ApiResponse<KeyByPaymentResponse>> {\n  return fetchAPI<KeyByPaymentResponse>(`/public/key/by-payment/${paymentId}`)\n}\n\n/**\n * Polling ключа после оплаты\n * Проверяет статус каждые 2 секунды до 15 раз (30 секунд)\n */\nexport async function pollKeyByPayment(\n  paymentId: string,\n  maxAttempts: number = 15,\n  intervalMs: number = 2000\n): Promise<ApiResponse<KeyByPaymentResponse>> {\n  for (let i = 0; i < maxAttempts; i++) {\n    const response = await getKeyByPayment(paymentId)\n\n    if (response.status === 200 && response.data) {\n      return response\n    }\n\n    if (response.status !== 202) {\n      return response\n    }\n\n    if (i < maxAttempts - 1) {\n      await new Promise(resolve => setTimeout(resolve, intervalMs))\n    }\n  }\n\n  return { error: 'Timeout: не удалось получить ключ после оплаты' }\n}\n"],"names":[],"mappings":"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","ignoreList":[1,3,4,5,6,9]}