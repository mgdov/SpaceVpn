{"version":3,"sources":["../../../../../../../Documents/programming/pixel-space-vpn/lib/api.ts","../../../../../../../Documents/programming/pixel-space-vpn/components/pricing-section.tsx"],"sourcesContent":["/**\n * API Client for SpaceVPN Backend\n *\n * IMPORTANT: Always use relative paths for API requests\n * to work correctly behind the nginx reverse proxy\n */\n\n// nginx proxies /api/v1/* to the backend\nexport const API_BASE_URL = '/api/v1'\n\nexport interface ApiResponse<T = any> {\n  data?: T\n  error?: string\n  message?: string\n  status?: number\n}\n\nexport interface User {\n  id: number\n  username: string\n  email: string | null\n  full_name: string | null\n  is_active: boolean\n  is_superuser: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport interface TokenResponse {\n  access_token: string\n  token_type: string\n}\n\nexport interface Tariff {\n  id: number\n  name: string\n  description: string | null\n  tagline?: string | null\n  duration_months: number\n  price: number\n  data_limit_gb: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  features?: string | null\n}\n\nexport interface VPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  name: string\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n  marzban_username?: string | null\n  pasarguard_username?: string | null  // Legacy field\n  device_info?: string | null\n  xray_config?: string | null\n  subscription_url?: string | null\n  qr_code?: string | null\n  last_connected_at?: string | null\n  created_at: string\n  updated_at?: string\n}\n\n/**\n * Extended VPN Key status with expiration info\n */\nexport interface VPNKeyStatus {\n  id: number\n  key_id: string  // Short ID like \"TJWMW\"\n  status: 'active' | 'expired' | 'blocked' | 'disabled'\n  \n  // Expiration\n  expire_date: string | null\n  time_remaining: string | null  // \"19 ч.\", \"3 дня\"\n  time_remaining_seconds: number | null\n  is_expired: boolean\n  \n  // Traffic\n  traffic_used_bytes: number\n  traffic_limit_bytes: number | null\n  traffic_used_gb: number\n  traffic_limit_gb: number | null\n  traffic_percentage: number | null\n  \n  // VPN connection\n  subscription_url: string | null\n  qr_code: string | null\n  happ_deeplink: string | null\n  \n  // Actions\n  can_extend: boolean\n  can_delete: boolean\n}\n\nexport interface VPNKeyListResponse {\n  keys: VPNKeyStatus[]\n  total: number\n}\n\nexport interface ExtendKeyRequest {\n  tariff_id?: number\n  days?: number\n}\n\nexport interface ExtendKeyResponse {\n  success: boolean\n  message: string\n  new_expire_date?: string\n  key_status?: VPNKeyStatus\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface RegenerateVPNClientPayload {\n  bypass_preset?: string\n  fingerprint?: string\n  server_name?: string\n}\n\nexport interface BypassPreset {\n  id: string\n  name: string\n  description: string\n  fingerprint: string\n  server_name: string\n  region: string\n  risk: string\n}\n\nexport interface BypassPresetsResponse {\n  presets: BypassPreset[]\n}\n\nexport interface VPNConfig {\n  client_uuid: string\n  name: string\n  xray_config: any  // JSON object\n  subscription_url: string  // VLESS URL\n  qr_code: string  // Base64 encoded image\n}\n\nexport interface Subscription {\n  id: number\n  user_id?: number\n  tariff_id: number\n  status: 'active' | 'expired' | 'cancelled'  // SubscriptionStatus\n  start_date: string\n  expire_date: string | null\n  data_limit: number  // bytes, 0 = unlimited\n  used_traffic: number  // bytes\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface MySubscriptionsResponse {\n  subscriptions: Subscription[]\n}\n\nexport interface VPNStatus {\n  status: 'none' | 'active' | 'expired' | 'cancelled'\n  expires_at: string | null\n  traffic_used: number | null  // bytes\n  traffic_limit: number | null  // bytes\n  traffic_used_gb: number | null  // GB\n  traffic_limit_gb: number | null  // GB\n  traffic_percentage: number | null  // 0-100\n  vless_uri: string | null\n  qr_code: string | null\n  subscription_id: number | null\n  tariff_name: string | null\n}\n\nexport interface AdminSubscription extends Subscription {\n  user?: User\n}\n\nexport interface HealthResponse {\n  status: string\n  uptime?: number\n  version?: string\n}\n\nexport interface ApiInfoResponse {\n  version: string\n  status: string\n  uptime?: number\n}\n\nexport interface UpdateProfilePayload {\n  email?: string | null\n  username?: string\n  full_name?: string | null\n  password?: string\n  current_password?: string\n}\n\nexport interface CreateSubscriptionPayload {\n  plan: string  // SubscriptionPlan: \"free\" | \"basic\" | \"premium\" | \"unlimited\"\n}\n\nexport interface UpdateSubscriptionPayload {\n  tariff_id?: string\n  end_date?: string\n  is_active?: boolean\n  data_limit_gb?: number\n}\n\nexport interface CreateVPNClientPayload {\n  subscription_id: number\n  name: string\n  device_info?: string\n}\n\nexport interface UpdateVPNClientPayload {\n  name?: string\n  device_info?: string\n}\n\nexport interface CreateTariffPayload {\n  name: string\n  duration_months: number\n  price: number\n  description?: string | null\n  tagline?: string | null\n  data_limit_gb?: number\n  devices_count?: number\n  is_active?: boolean\n  is_featured?: boolean\n  sort_order?: number\n  features?: string | null\n}\n\nexport type UpdateTariffPayload = Partial<CreateTariffPayload>\n\nexport interface AdminVPNClient {\n  id: number\n  user_id?: number\n  subscription_id?: number\n  client_uuid: string\n  marzban_username?: string\n  name?: string\n  device_info?: string\n  status: string\n  subscription_url?: string\n  qr_code?: string\n  created_at: string\n  updated_at?: string\n  \n  // Extended info\n  user?: {\n    id: number\n    username: string\n    email?: string\n  }\n  expire_date?: string\n  time_remaining?: string\n  is_expired: boolean\n  traffic_used_gb: number\n  traffic_limit_gb: number\n}\n\nexport interface ExtendPayload {\n  days?: number\n  expires_at?: string\n}\n\nexport interface MarzbanSyncResponse {\n  total: number\n  synced: number\n  orphaned: number\n  errors: number\n  details?: Array<{\n    client_id: number\n    username: string\n    status: string\n    error?: string\n  }>\n}\n\n// Legacy alias\nexport type PasarguardSyncResponse = MarzbanSyncResponse\n\ntype QueryParams = Record<string, string | number | boolean | undefined>\n\nfunction buildEndpoint(endpoint: string): string {\n  const base = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL\n  if (!endpoint || endpoint === '/') {\n    return `${base}/`\n  }\n  const normalized = endpoint.startsWith('/') ? endpoint : `/${endpoint}`\n  return `${base}${normalized}`\n}\n\nfunction withQuery(endpoint: string, params?: QueryParams): string {\n  if (!params) return endpoint\n  const search = new URLSearchParams()\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null) return\n    search.append(key, String(value))\n  })\n  const query = search.toString()\n  return query ? `${endpoint}?${query}` : endpoint\n}\n\n/**\n * Get auth token from localStorage\n */\nexport function getAuthToken(): string | null {\n  if (typeof window === 'undefined') return null\n  return localStorage.getItem('auth_token')\n}\n\n/**\n * Set auth token in localStorage\n */\nexport function setAuthToken(token: string): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('auth_token', token)\n}\n\n/**\n * Remove auth token from localStorage\n */\nexport function removeAuthToken(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('auth_token')\n}\n\n/**\n * Get current user from localStorage\n */\nexport function getCurrentUser(): User | null {\n  if (typeof window === 'undefined') return null\n  const userJson = localStorage.getItem('current_user')\n  return userJson ? JSON.parse(userJson) : null\n}\n\n/**\n * Set current user in localStorage\n */\nexport function setCurrentUser(user: User): void {\n  if (typeof window === 'undefined') return\n  localStorage.setItem('current_user', JSON.stringify(user))\n}\n\n/**\n * Remove current user from localStorage\n */\nexport function removeCurrentUser(): void {\n  if (typeof window === 'undefined') return\n  localStorage.removeItem('current_user')\n}\n\nfunction safeParseJson(payload: string) {\n  try {\n    return JSON.parse(payload)\n  } catch {\n    return payload\n  }\n}\n\n/**\n * Make authenticated API request\n */\nasync function apiRequest<T = any>(endpoint: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\n  const token = getAuthToken()\n  const isFormData = typeof FormData !== 'undefined' && options.body instanceof FormData\n\n  const headers = new Headers(options.headers || {})\n  if (!headers.has('Accept')) {\n    headers.set('Accept', 'application/json')\n  }\n\n  const hasBody = options.body !== undefined && options.body !== null && options.body !== ''\n  if (!isFormData && hasBody && !headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json')\n  }\n\n  if (token && !headers.has('Authorization')) {\n    headers.set('Authorization', `Bearer ${token}`)\n  }\n\n  try {\n    const response = await fetch(buildEndpoint(endpoint), {\n      ...options,\n      headers,\n    })\n\n    const status = response.status\n    const raw = await response.text()\n    const payload = raw ? safeParseJson(raw) : undefined\n\n    if (!response.ok) {\n      if (status === 422 && Array.isArray((payload as any)?.detail)) {\n        const errors = (payload as any).detail\n          .map((err: any) => `${err.loc?.join(' → ') || 'Field'}: ${err.msg}`)\n          .join(', ')\n        return { error: errors, status }\n      }\n\n      const detail =\n        (payload as any)?.detail ||\n        (payload as any)?.message ||\n        (Array.isArray((payload as any)?.errors) ? (payload as any)?.errors.join(', ') : undefined)\n\n      return { error: typeof detail === 'string' ? detail : `HTTP ${status}`, status }\n    }\n\n    return { data: payload as T, status }\n  } catch (error) {\n    return {\n      error: error instanceof Error ? error.message : 'Network error',\n    }\n  }\n}\n\n/**\n * Authentication helpers\n */\nexport async function registerUser(\n  username: string,\n  email: string,\n  password: string,\n  fullName?: string\n): Promise<ApiResponse<User>> {\n  return apiRequest<User>('/auth/register', {\n    method: 'POST',\n    body: JSON.stringify({ username, email, password, full_name: fullName }),\n  })\n}\n\nexport async function loginUser(username: string, password: string): Promise<ApiResponse<TokenResponse>> {\n  const formData = new URLSearchParams()\n  formData.append('username', username)\n  formData.append('password', password)\n\n  const response = await apiRequest<TokenResponse>('/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: formData.toString(),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\n/**\n * OAuth Providers\n */\nexport interface OAuthProvider {\n  id: string\n  name: string\n  enabled: boolean\n  bot_username?: string  // For Telegram\n}\n\nexport interface OAuthProvidersResponse {\n  providers: OAuthProvider[]\n}\n\nexport async function getOAuthProviders(): Promise<ApiResponse<OAuthProvidersResponse>> {\n  return apiRequest<OAuthProvidersResponse>('/auth/oauth-providers')\n}\n\n/**\n * Google OAuth - Get auth URL\n */\nexport interface GoogleAuthResponse {\n  auth_url: string\n  state: string\n}\n\nexport async function getGoogleAuthUrl(): Promise<ApiResponse<GoogleAuthResponse>> {\n  return apiRequest<GoogleAuthResponse>('/auth/google')\n}\n\n/**\n * Telegram OAuth - Get bot info\n */\nexport interface TelegramAuthInfo {\n  bot_username: string\n  redirect_url: string\n}\n\nexport async function getTelegramAuthInfo(): Promise<ApiResponse<TelegramAuthInfo>> {\n  return apiRequest<TelegramAuthInfo>('/auth/telegram')\n}\n\n/**\n * Telegram OAuth - Callback\n */\nexport interface TelegramAuthData {\n  id: number\n  first_name: string\n  last_name?: string\n  username?: string\n  photo_url?: string\n  auth_date: number\n  hash: string\n}\n\nexport async function telegramAuthCallback(data: TelegramAuthData): Promise<ApiResponse<TokenResponse>> {\n  const response = await apiRequest<TokenResponse>('/auth/telegram/callback', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n\n  if (response.data?.access_token) {\n    setAuthToken(response.data.access_token)\n  }\n\n  return response\n}\n\nexport function logoutUser(): void {\n  removeAuthToken()\n  removeCurrentUser()\n}\n\nexport function isAuthenticated(): boolean {\n  return getAuthToken() !== null\n}\n\n/**\n * User profile endpoints\n */\nexport async function getCurrentUserInfo(): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me')\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n  return response\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: Endpoint /users/me/vpn вызывает 500 error\n// Используйте комбинацию getMySubscriptions() + listUserVPNClients()\n// export async function getUserVPNStatus(): Promise<ApiResponse<VPNStatus>> {\n//   return apiRequest<VPNStatus>('/users/me/vpn')\n// }\n\nexport async function updateCurrentUser(payload: UpdateProfilePayload): Promise<ApiResponse<User>> {\n  const response = await apiRequest<User>('/users/me', {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n\n  if (response.data) {\n    setCurrentUser(response.data)\n  }\n\n  return response\n}\n\nexport async function getUserById(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/users/${userId}`)\n}\n\nexport async function deleteUserById(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminListUsers(params?: QueryParams): Promise<ApiResponse<User[]>> {\n  return apiRequest<User[]>(withQuery('/admin/users/', params))  // Add trailing slash\n}\n\nexport async function adminGetUser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}`)\n}\n\nexport async function adminDeleteUser(userId: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/users/${userId}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleUserActive(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/toggle-active`, { method: 'POST' })\n}\n\nexport async function adminMakeSuperuser(userId: string): Promise<ApiResponse<User>> {\n  return apiRequest<User>(`/admin/users/${userId}/make-superuser`, { method: 'POST' })\n}\n\n/**\n * Subscription endpoints (user)\n */\nexport async function getUserSubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getMySubscriptions(): Promise<ApiResponse<MySubscriptionsResponse>> {\n  return apiRequest<MySubscriptionsResponse>('/subscriptions/my')\n}\n\nexport async function getSubscriptionById(id: string): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`)\n}\n\nexport async function createSubscription(payload: CreateSubscriptionPayload): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>('/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function updateSubscription(\n  id: string,\n  payload: UpdateSubscriptionPayload\n): Promise<ApiResponse<Subscription>> {\n  return apiRequest<Subscription>(`/subscriptions/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/subscriptions/${id}`, { method: 'DELETE' })\n}\n\n/**\n * Subscription endpoints (admin)\n */\nexport async function adminListSubscriptions(): Promise<ApiResponse<AdminSubscription[]>> {\n  return apiRequest<AdminSubscription[]>('/admin/subscriptions/')  // Add trailing slash\n}\n\nexport async function adminGetSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}`)\n}\n\nexport async function adminCreateSubscription(\n  payload: CreateSubscriptionPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>('/admin/subscriptions/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteSubscription(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/subscriptions/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendSubscription(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleSubscription(id: string): Promise<ApiResponse<AdminSubscription>> {\n  return apiRequest<AdminSubscription>(`/admin/subscriptions/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Tariff endpoints\n */\nexport async function getPublicTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/tariffs/')  // Add trailing slash\n}\n\nexport async function getPublicTariffById(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/tariffs/${id}`)\n}\n\nexport async function adminListTariffs(): Promise<ApiResponse<Tariff[]>> {\n  return apiRequest<Tariff[]>('/admin/tariffs/')  // Add trailing slash\n}\n\nexport async function adminCreateTariff(payload: CreateTariffPayload): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>('/admin/tariffs/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateTariff(\n  id: string,\n  payload: UpdateTariffPayload\n): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteTariff(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/tariffs/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminToggleTariff(id: string): Promise<ApiResponse<Tariff>> {\n  return apiRequest<Tariff>(`/admin/tariffs/${id}/toggle`, { method: 'POST' })\n}\n\n/**\n * Subscription purchase endpoints\n */\nexport interface PurchaseFreeTariffRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface PurchaseFreeTariffResponse {\n  subscription_id: number\n  vpn_client_id: number\n  vless_uri: string\n  qr_code: string\n  expire_date: string\n  message: string\n}\n\nexport async function purchaseFreeTariff(\n  data: PurchaseFreeTariffRequest\n): Promise<ApiResponse<PurchaseFreeTariffResponse>> {\n  return apiRequest<PurchaseFreeTariffResponse>('/subscriptions/purchase-free', {\n    method: 'POST',\n    body: JSON.stringify(data),\n  })\n}\n\nexport interface CreateVPNClientResponse {\n  id: number\n  client_uuid: string\n  subscription_url: string\n  qr_code: string\n  name: string\n  device_info?: string\n  created_at: string\n}\n\nexport async function createUserVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<CreateVPNClientResponse>> {\n  return apiRequest<CreateVPNClientResponse>('/vpn-clients', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\n/**\n * VPN client endpoints (user)\n */\nexport async function listUserVPNClients(): Promise<ApiResponse<VPNClient[]>> {\n  return apiRequest<VPNClient[]>('/vpn-clients')\n}\n\nexport async function getUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`)\n}\n\nexport async function updateUserVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function deleteUserVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/vpn-clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function getUserVPNClientConfig(id: string): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/config`)\n}\n\nexport async function regenerateUserVPNClient(id: string, payload?: RegenerateVPNClientPayload): Promise<ApiResponse<VPNConfig>> {\n  return apiRequest<VPNConfig>(`/vpn-clients/${id}/regenerate`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function getBypassPresets(): Promise<ApiResponse<BypassPresetsResponse>> {\n  return apiRequest<BypassPresetsResponse>('/vpn-clients/bypass-presets')\n}\n\nexport async function syncUserVPNClient(id: string): Promise<ApiResponse<VPNClient>> {\n  return apiRequest<VPNClient>(`/vpn-clients/${id}/sync`, { method: 'POST' })\n}\n\n/**\n * Get all VPN keys with extended status (expiration, traffic, deep links)\n */\nexport async function getUserVPNKeys(): Promise<ApiResponse<VPNKeyListResponse>> {\n  return apiRequest<VPNKeyListResponse>('/vpn-clients/keys')\n}\n\n/**\n * Get single VPN key status\n */\nexport async function getVPNKeyStatus(keyId: number): Promise<ApiResponse<VPNKeyStatus>> {\n  return apiRequest<VPNKeyStatus>(`/vpn-clients/keys/${keyId}`)\n}\n\n/**\n * Extend VPN key expiration\n */\nexport async function extendVPNKey(keyId: number, request?: ExtendKeyRequest): Promise<ApiResponse<ExtendKeyResponse>> {\n  return apiRequest<ExtendKeyResponse>(`/vpn-clients/keys/${keyId}/extend`, {\n    method: 'POST',\n    body: request ? JSON.stringify(request) : undefined,\n  })\n}\n\n/**\n * Get Happ VPN deep link for a key\n */\nexport async function getHappDeeplink(keyId: number): Promise<ApiResponse<{ happ_link: string; vless_url: string; qr_code: string }>> {\n  return apiRequest(`/vpn-clients/keys/${keyId}/happ-link`)\n}\n\n/**\n * VPN client endpoints (admin)\n */\nexport async function adminListVPNClients(): Promise<ApiResponse<AdminVPNClient[]>> {\n  return apiRequest<AdminVPNClient[]>('/admin/vpn/clients/')  // Add trailing slash\n}\n\nexport async function adminGetVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`)\n}\n\nexport async function adminCreateVPNClient(\n  payload: CreateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>('/admin/vpn/clients/', {  // Add trailing slash\n    method: 'POST',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminUpdateVPNClient(\n  id: string,\n  payload: UpdateVPNClientPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n  })\n}\n\nexport async function adminDeleteVPNClient(id: string): Promise<ApiResponse<void>> {\n  return apiRequest<void>(`/admin/vpn/clients/${id}`, { method: 'DELETE' })\n}\n\nexport async function adminExtendVPNClient(\n  id: string,\n  payload?: ExtendPayload\n): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/extend`, {\n    method: 'POST',\n    body: payload ? JSON.stringify(payload) : undefined,\n  })\n}\n\nexport async function adminToggleVPNClient(id: string): Promise<ApiResponse<AdminVPNClient>> {\n  return apiRequest<AdminVPNClient>(`/admin/vpn/clients/${id}/toggle`, {\n    method: 'POST',\n  })\n}\n\n/**\n * Internal maintenance endpoints\n */\nexport async function syncAllVpnClients(): Promise<ApiResponse<MarzbanSyncResponse>> {\n  return apiRequest<MarzbanSyncResponse>('/internal/marzban/sync', { method: 'POST' })\n}\n\n// ============================================================================\n// Public API (без авторизации)\n// ============================================================================\n\n/**\n * Public Tariffs\n */\nexport interface PublicTariff {\n  id: number\n  name: string\n  description: string | null\n  price: number\n  duration_months: number\n  duration_days: number\n  data_limit_gb: number\n  is_featured: boolean\n}\n\nexport interface PublicTariffsResponse {\n  tariffs: PublicTariff[]\n}\n\nexport async function getPublicTariffsNoAuth(): Promise<ApiResponse<PublicTariffsResponse>> {\n  return apiRequest<PublicTariffsResponse>('/public/tariffs')\n}\n\n/**\n * Key Search\n */\nexport interface KeySearchRequest {\n  key_identifier: string\n}\n\nexport interface KeySearchResult {\n  found: boolean\n  key_id?: string\n  client_id?: number\n  status?: 'active' | 'expired'\n  expires_at?: string\n  time_remaining?: string\n  is_expired: boolean\n  can_renew: boolean\n}\n\nexport async function searchKeyPublic(keyIdentifier: string): Promise<ApiResponse<KeySearchResult>> {\n  return apiRequest<KeySearchResult>('/public/key/search', {\n    method: 'POST',\n    body: JSON.stringify({ key_identifier: keyIdentifier }),\n  })\n}\n\n/**\n * Create Key Without Registration\n */\nexport interface CreateKeyRequest {\n  tariff_id: number\n  bypass_preset?: string\n}\n\nexport interface CreateKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  subscription_url: string\n  qr_code?: string\n  expires_at: string\n  message: string\n}\n\nexport async function createKeyPublic(request: CreateKeyRequest): Promise<ApiResponse<CreateKeyResult>> {\n  return apiRequest<CreateKeyResult>('/public/key/create', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Renew Key\n */\nexport interface RenewKeyRequest {\n  key_identifier: string\n  tariff_id: number\n}\n\nexport interface RenewKeyResult {\n  success: boolean\n  key_id: string\n  client_id: number\n  new_expires_at: string\n  subscription_url: string\n  message: string\n}\n\nexport async function renewKeyPublic(request: RenewKeyRequest): Promise<ApiResponse<RenewKeyResult>> {\n  return apiRequest<RenewKeyResult>('/public/key/renew', {\n    method: 'POST',\n    body: JSON.stringify(request),\n  })\n}\n\n/**\n * Admin Finance endpoints\n */\nexport interface AdminFinanceStats {\n  total_revenue: string\n  revenue_today: string\n  revenue_yesterday: string\n  revenue_this_week: string\n  revenue_this_month: string\n  revenue_last_month: string\n  total_payments: number\n  completed_payments: number\n  pending_payments: number\n  failed_payments: number\n  active_subscriptions: number\n  average_payment: string\n}\n\nexport interface AdminFinanceChartData {\n  labels: string[]\n  values: string[]\n}\n\nexport interface AdminPayment {\n  id: number\n  user_id: number\n  amount: string\n  status: string\n  payment_method?: string\n  created_at: string\n  updated_at: string\n  user?: User\n}\n\nexport async function getAdminFinanceStats(): Promise<ApiResponse<AdminFinanceStats>> {\n  return apiRequest<AdminFinanceStats>('/admin/finance/stats')\n}\n\nexport async function getAdminFinanceChart(\n  period: '7days' | '30days' | '12months'\n): Promise<ApiResponse<AdminFinanceChartData>> {\n  return apiRequest<AdminFinanceChartData>(`/admin/finance/chart/${period}`)\n}\n\nexport async function getAdminPayments(\n  params?: { skip?: number; limit?: number }\n): Promise<ApiResponse<AdminPayment[]>> {\n  return apiRequest<AdminPayment[]>(withQuery('/admin/finance/payments', params))\n}\n\n/**\n * Health & meta endpoints\n */\nexport async function getHealthStatus(): Promise<ApiResponse<HealthResponse>> {\n  return apiRequest<HealthResponse>('/health')\n}\n\nexport async function getApiInfo(): Promise<ApiResponse<ApiInfoResponse>> {\n  return apiRequest<ApiInfoResponse>('/')\n}\n\n// ВРЕМЕННО ОТКЛЮЧЕНО: YooKassa endpoints не реализованы на backend\n// Будет добавлено позже при интеграции платежного шлюза\n/*\nexport interface CreateYookassaPaymentPayload {\n  tariffId: number\n  plan: string\n  price: number\n  description?: string\n}\n\nexport interface CreateYookassaPaymentResponse {\n  payment_id: string\n  confirmation_url: string\n  status?: string\n}\n\nexport interface ConfirmYookassaPaymentResponse {\n  success: boolean\n  plan?: string\n  subscription?: Subscription\n  message?: string\n}\n\nexport async function createYookassaPayment(\n  payload: CreateYookassaPaymentPayload\n): Promise<ApiResponse<CreateYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/create-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n\nexport async function confirmYookassaPayment(\n  paymentId: string\n): Promise<ApiResponse<ConfirmYookassaPaymentResponse>> {\n  const token = getAuthToken()\n  if (!token) {\n    return { error: 'Требуется авторизация для оплаты' }\n  }\n\n  try {\n    const response = await fetch('/api/yookassa/confirm-payment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ paymentId }),\n    })\n\n    const data = await response.json().catch(() => ({}))\n    if (!response.ok) {\n      return { error: data?.error || data?.message || `HTTP ${response.status}` }\n    }\n\n    return { data }\n  } catch (error) {\n    return { error: error instanceof Error ? error.message : 'Network error' }\n  }\n}\n*/\n\n","\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport Link from \"next/link\"\nimport { getPublicTariffs, type Tariff } from \"@/lib/api\"\n\nexport function PricingSection() {\n  const [tariffs, setTariffs] = useState<Tariff[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const loadTariffs = async () => {\n      setLoading(true)\n      const response = await getPublicTariffs()\n      if (response.data?.length) {\n        setTariffs(response.data.filter((tariff) => tariff.is_active))\n      }\n      setLoading(false)\n    }\n\n    loadTariffs()\n  }, [])\n\n  const displayTariffs = tariffs\n\n  const baseMonthlyPrice = useMemo(() => {\n    if (!displayTariffs.length) return 0\n    const perMonthPrices = displayTariffs.map((tariff) => {\n      const months = tariff.duration_months === 0 ? 1 : Math.max(1, tariff.duration_months)\n      return tariff.price / months\n    })\n    return Math.min(...perMonthPrices)\n  }, [displayTariffs])\n\n  const highlightTariffId = useMemo(() => {\n    if (!displayTariffs.length) return null\n    return displayTariffs.reduce((best, current) => {\n      const currentMonths = current.duration_months === 0 ? 1 : Math.max(1, current.duration_months)\n      const bestMonths = best.duration_months === 0 ? 1 : Math.max(1, best.duration_months)\n      const currentRatio = current.price / currentMonths\n      const bestRatio = best.price / bestMonths\n      return currentRatio < bestRatio ? current : best\n    }).id\n  }, [displayTariffs])\n\n  const formatDuration = (months: number) => {\n    if (months === 0) {\n      return \"1 день\"\n    }\n    return `${months} мес.`\n  }\n\n  return (\n    <section className=\"py-12 sm:py-16 md:py-20 px-4 sm:px-6 md:px-8 relative z-10\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"text-center mb-10 sm:mb-12\">\n          <span className=\"text-accent text-[9px] sm:text-[10px] md:text-[11px] tracking-[0.3em] sm:tracking-[0.35em] md:tracking-[0.4em]\">[ ТАРИФЫ ]</span>\n          <h2 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl text-foreground font-bold tracking-tight mt-3 sm:mt-4 mb-3 sm:mb-4 px-4\">\n            ВЫБЕРИТЕ<br />СВОЙ <span className=\"text-primary\">ПЛАН</span>\n          </h2>\n          <p className=\"text-muted-foreground text-xs sm:text-sm md:text-base max-w-2xl mx-auto leading-relaxed px-4\">\n            Гибкие тарифы для любых потребностей. Начните с бесплатного пробного периода.\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"bg-card border border-border p-6 text-center text-muted-foreground text-[11px]\">\n            Загрузка тарифов...\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 md:gap-10\">\n            {displayTariffs.map((tariff) => {\n              const months = Math.max(1, tariff.duration_months)\n              const nominalPrice = baseMonthlyPrice * months\n              const discountPercent = nominalPrice > tariff.price && months > 1\n                ? Math.round(((nominalPrice - tariff.price) / nominalPrice) * 100)\n                : 0\n\n              return (\n                <div\n                  key={tariff.id}\n                  className={`relative bg-card border ${tariff.id === highlightTariffId ? \"border-primary\" : \"border-border\"} p-5 sm:p-6 md:p-8 flex flex-col gap-6`}\n                >\n                  {tariff.id === highlightTariffId && (\n                    <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-4 py-1 text-[8px]\">\n                      ПОПУЛЯРНЫЙ\n                    </div>\n                  )}\n\n                  {discountPercent > 0 && (\n                    <div className=\"absolute top-3 right-3 bg-primary/15 border border-primary/40 text-primary px-3 py-1 text-[9px] tracking-[0.3em]\">\n                      -{discountPercent}%\n                    </div>\n                  )}\n\n                  <div className=\"text-center space-y-4\">\n                    <p className=\"text-accent text-[9px] tracking-[0.35em]\"># {tariff.name}</p>\n                    <h3 className=\"text-foreground text-base\">{formatDuration(tariff.duration_months)}</h3>\n                    <div className=\"flex flex-col items-center gap-2\">\n                      <div className=\"flex items-baseline justify-center gap-2\">\n                        <span className=\"text-primary text-3xl\">{tariff.price}</span>\n                        <span className=\"text-muted-foreground text-[12px]\">₽</span>\n                      </div>\n                      <span className=\"text-muted-foreground text-[9px] uppercase tracking-[0.25em]\">за весь период</span>\n                    </div>\n                  </div>\n\n                  <p className=\"flex-1 text-muted-foreground text-[11px] leading-relaxed\">{tariff.description || \"Стабильный туннель и поддержка 24/7\"}</p>\n\n                  <div className=\"flex flex-col xs:flex-row gap-2\">\n                    <Link\n                      href={tariff.price === 0 ? \"/register\" : \"/login\"}\n                      className={`flex-1 flex items-center justify-center py-3 md:py-4 px-2 md:px-3 text-[9px] md:text-[10px] tracking-[0.1em] md:tracking-[0.12em] transition-colors ${tariff.id === highlightTariffId\n                        ? \"bg-primary text-primary-foreground hover:bg-primary/80\"\n                        : \"border border-border text-foreground hover:border-primary hover:text-primary\"\n                        }`}\n                    >\n                      {tariff.price === 0 ? \"ПОПРОБОВАТЬ\" : \"ВЫБРАТЬ\"}\n                    </Link>\n                    <Link\n                      href=\"/buy-no-register\"\n                      className=\"flex-1 flex items-center justify-center py-3 md:py-4 px-2 md:px-3 text-[9px] md:text-[10px] tracking-[0.1em] md:tracking-[0.12em] transition-colors bg-transparent border border-green-500 text-green-500 hover:bg-green-500/10 hover:border-green-400 hover:text-green-400 text-center leading-tight\"\n                    >\n                      КУПИТЬ БЕЗ РЕГИСТРАЦИИ\n                    </Link>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":"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"}