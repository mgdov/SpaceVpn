module.exports=[99280,a=>{"use strict";var b=a.i(50776),c=a.i(89056),d=a.i(72261),e=a.i(95111),f=a.i(22318),g=a.i(4901);let h=(0,g.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);function i(){return(0,b.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-card border-b border-border",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-primary flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-background text-xs",children:"S"})}),(0,b.jsx)("span",{className:"text-primary text-xs",children:"ADMIN PANEL"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(e.default,{href:"/",className:"text-muted-foreground hover:text-primary text-[10px] flex items-center gap-1",children:[(0,b.jsx)(h,{size:14}),"На сайт"]}),(0,b.jsxs)("button",{className:"text-muted-foreground hover:text-primary text-[10px] flex items-center gap-1",children:[(0,b.jsx)(f.LogOut,{size:14}),"Выход"]})]})]})})}let j=(0,g.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),k=(0,g.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),l=[{key:"keys",label:"VPN Ключи",icon:(0,g.default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},{key:"blog",label:"Блог",icon:k},{key:"tariffs",label:"Тарифы",icon:(0,g.default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])},{key:"balance",label:"Баланс",icon:j}];function m({activeTab:a,onChange:c,balance:d}){return(0,b.jsxs)("aside",{className:"fixed left-0 top-16 bottom-0 w-64 bg-card border-r border-border p-4 z-40",children:[(0,b.jsx)("nav",{className:"space-y-2",children:l.map(({key:d,label:e,icon:f})=>(0,b.jsxs)("button",{onClick:()=>c(d),className:`w-full flex items-center gap-3 px-4 py-3 text-[10px] transition-colors ${a===d?"bg-primary text-primary-foreground":"text-foreground hover:bg-secondary"}`,children:[(0,b.jsx)(f,{size:16}),e]},d))}),(0,b.jsxs)("div",{className:"mt-8 p-4 bg-secondary border border-border",children:[(0,b.jsx)("div",{className:"text-[8px] text-muted-foreground mb-2",children:"БАЛАНС"}),(0,b.jsxs)("div",{className:"text-primary text-lg",children:[d.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," ₽"]})]})]})}let n=(0,g.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),o=(0,g.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function p({posts:a,onEdit:c,onDelete:d}){return(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsxs)("div",{className:"bg-card border border-border p-4 flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-primary text-[8px] uppercase tracking-[0.3em] mb-1",children:a.heroHighlight}),(0,b.jsx)("p",{className:"text-muted-foreground text-[8px] mb-2",children:a.heroDescription}),(0,b.jsx)("h3",{className:"text-foreground text-[11px] mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-muted-foreground text-[9px] mb-2",children:a.excerpt}),(0,b.jsxs)("div",{className:"text-[8px] text-muted-foreground mb-1",children:["Дата публикации: ",a.publishedAt," • Space VPN Team"]}),(0,b.jsxs)("div",{className:"text-[8px] text-muted-foreground",children:["Теги: ",a.tags.join(", ")||"—"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>c(a),className:"text-muted-foreground hover:text-primary",children:(0,b.jsx)(n,{size:14})}),(0,b.jsx)("button",{onClick:()=>d(a.id),className:"text-muted-foreground hover:text-red-400",children:(0,b.jsx)(o,{size:14})})]})]},a.id))})}let q={green:{open:"[green]",close:"[/green]"},muted:{open:"[muted]",close:"[/muted]"},main:{open:"[main]",close:"[/main]"}};function r({open:a,isEditing:d,form:e,onChange:f,onSubmit:g,onClose:h}){let i=(0,c.useRef)(null);if(!a)return null;let j=(a,b)=>{f({...e,[a]:b})},k=a=>{let b=i.current;if(!b)return;let{open:c,close:d}=q[a],g=b.selectionStart??b.value.length,h=b.selectionEnd??g,j=b.value.slice(0,g),k=b.value.slice(g,h),l=b.value.slice(h),m=`${j}${c}${k}${d}${l}`,n=g+c.length,o=n+k.length;b.value=m,f({...e,content:m}),requestAnimationFrame(()=>{i.current&&(i.current.selectionStart=n,i.current.selectionEnd=o,i.current.focus())})};return(0,b.jsx)("div",{className:"fixed inset-0 bg-background/80 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("h2",{className:"text-foreground text-sm mb-4",children:d?"РЕДАКТИРОВАТЬ СТАТЬЮ":"СОЗДАТЬ СТАТЬЮ"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Зелёный заголовок"}),(0,b.jsx)("input",{type:"text",value:e.heroHighlight,onChange:a=>j("heroHighlight",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Серое описание"}),(0,b.jsx)("input",{type:"text",value:e.heroDescription,onChange:a=>j("heroDescription",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Заголовок"}),(0,b.jsx)("input",{type:"text",value:e.title,onChange:a=>j("title",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Краткое описание"}),(0,b.jsx)("input",{type:"text",value:e.excerpt,onChange:a=>j("excerpt",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2 mb-2",children:[(0,b.jsx)("label",{className:"text-foreground text-[10px]",children:"Содержание"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>k("green"),className:"px-3 py-1 text-[9px] uppercase tracking-[0.3em] bg-primary/15 text-primary border border-primary/40",children:"Зеленый"}),(0,b.jsx)("button",{type:"button",onClick:()=>k("muted"),className:"px-3 py-1 text-[9px] uppercase tracking-[0.3em] bg-secondary text-muted-foreground border border-border",children:"Серый"}),(0,b.jsx)("button",{type:"button",onClick:()=>k("main"),className:"px-3 py-1 text-[9px] uppercase tracking-[0.3em] border border-border text-foreground",children:"Основной"})]}),(0,b.jsx)("p",{className:"text-muted-foreground text-[8px]",children:"Выделите текст и нажмите кнопку, чтобы применить стиль. Вставка без выделения добавит пустой блок с нужными тегами."})]}),(0,b.jsx)("textarea",{ref:i,value:e.content,onChange:a=>j("content",a.target.value),rows:8,className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Дата публикации"}),(0,b.jsx)("input",{type:"date",value:e.publishedAt,onChange:a=>j("publishedAt",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Теги (через запятую)"}),(0,b.jsx)("input",{type:"text",value:e.tags,onChange:a=>j("tags",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)("button",{onClick:h,className:"flex-1 border border-border text-foreground py-2 text-[10px] hover:border-primary",children:"Отмена"}),(0,b.jsx)("button",{onClick:g,className:"flex-1 bg-primary text-primary-foreground py-2 text-[10px] hover:bg-primary/80",children:d?"Сохранить":"Создать"})]})]})]})})}function s({open:a,isEditing:c,form:d,users:e,onChange:f,onSubmit:g,onClose:h}){if(!a)return null;let i=(a,b)=>{f({...d,[a]:b})};return(0,b.jsx)("div",{className:"fixed inset-0 bg-background/80 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border p-6 w-full max-w-md",children:[(0,b.jsx)("h2",{className:"text-foreground text-sm mb-4",children:c?"РЕДАКТИРОВАТЬ КЛЮЧ":"СОЗДАТЬ КЛЮЧ"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Пользователь"}),(0,b.jsxs)("select",{value:d.userId,onChange:a=>i("userId",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary",children:[(0,b.jsx)("option",{value:"",children:"Выберите пользователя"}),e.map(a=>(0,b.jsx)("option",{value:a.id,children:a.email||a.username},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Название устройства"}),(0,b.jsx)("input",{type:"text",value:d.name,onChange:a=>i("name",a.target.value),placeholder:"iPhone, MacBook и т.д.",className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Описание устройства"}),(0,b.jsx)("textarea",{value:d.deviceInfo,onChange:a=>i("deviceInfo",a.target.value),rows:3,className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Дата истечения"}),(0,b.jsx)("input",{type:"date",value:d.expiresAt,onChange:a=>i("expiresAt",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)("button",{onClick:h,className:"flex-1 border border-border text-foreground py-2 text-[10px] hover:border-primary",children:"Отмена"}),(0,b.jsx)("button",{onClick:g,className:"flex-1 bg-primary text-primary-foreground py-2 text-[10px] hover:bg-primary/80",children:c?"Сохранить":"Создать"})]})]})]})})}var t=a.i(33499);function u({keys:a,onEdit:c,onExtend:d,onDelete:e,onToggle:f}){return(0,b.jsx)("div",{className:"bg-card border border-border overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-secondary",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"UUID"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"ПОЛЬЗОВАТЕЛЬ"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"УСТРОЙСТВО"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"ИСТЕКАЕТ"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"ТРАФИК"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"СТАТУС"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"ДЕЙСТВИЯ"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-t border-border",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-foreground font-mono",children:a.client_uuid}),(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-muted-foreground",children:a.user?.email||"—"}),(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-foreground",children:a.name||a.device_info||"—"}),(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-muted-foreground",children:"—"}),(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-foreground",children:"—"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"text-[8px] px-2 py-1 bg-primary/20 text-primary",children:"Активен"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>c(a),className:"text-muted-foreground hover:text-primary",title:"Редактировать",children:(0,b.jsx)(n,{size:14})}),(0,b.jsx)("button",{onClick:()=>d(a.id),className:"text-muted-foreground hover:text-accent",title:"Продлить на месяц",children:(0,b.jsx)(t.RefreshCw,{size:14})}),(0,b.jsx)("button",{onClick:()=>e(a.id),className:"text-muted-foreground hover:text-red-400",title:"Удалить",children:(0,b.jsx)(o,{size:14})})]})})]},a.id))})]})})}let v=(0,g.default)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);function w({tariffs:a,onEdit:c,onDelete:d,onToggle:e}){return a.length?(0,b.jsx)("div",{className:"bg-card border border-border overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-secondary",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"НАЗВАНИЕ"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"СРОК (МЕС.)"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"СТОИМОСТЬ"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"СТАТУС"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-[8px] text-muted-foreground",children:"ДЕЙСТВИЯ"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-t border-border",children:[(0,b.jsxs)("td",{className:"px-4 py-3 text-[9px] text-foreground",children:[(0,b.jsx)("div",{children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground text-[8px] mt-1",children:a.description||"—"})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-muted-foreground",children:a.duration_months}),(0,b.jsxs)("td",{className:"px-4 py-3 text-[9px] text-primary",children:[a.price," ₽"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-[9px] text-foreground",children:(0,b.jsx)("span",{className:`text-[8px] px-2 py-1 ${a.is_active?"bg-primary/20 text-primary":"bg-border text-muted-foreground"}`,children:a.is_active?"Активен":"Выключен"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>c(a),className:"text-muted-foreground hover:text-primary",children:(0,b.jsx)(n,{size:14})}),(0,b.jsx)("button",{onClick:()=>e(a.id),className:"text-muted-foreground hover:text-accent",children:(0,b.jsx)(v,{size:14})}),(0,b.jsx)("button",{onClick:()=>d(a.id),className:"text-muted-foreground hover:text-red-400",children:(0,b.jsx)(o,{size:14})})]})})]},a.id))})]})}):(0,b.jsx)("div",{className:"bg-card border border-border overflow-hidden",children:(0,b.jsx)("div",{className:"px-4 py-6 text-center text-[9px] text-muted-foreground",children:"Тарифы отсутствуют. Добавьте первый тариф, чтобы выдавать ключи."})})}function x({open:a,isEditing:c,form:d,onChange:e,onSubmit:f,onClose:g}){if(!a)return null;let h=(a,b)=>{e({...d,[a]:b})};return(0,b.jsx)("div",{className:"fixed inset-0 bg-background/80 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border p-6 w-full max-w-md",children:[(0,b.jsx)("h2",{className:"text-foreground text-sm mb-4",children:c?"РЕДАКТИРОВАТЬ ТАРИФ":"ДОБАВИТЬ ТАРИФ"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Название"}),(0,b.jsx)("input",{type:"text",value:d.name,onChange:a=>h("name",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Срок (дней)"}),(0,b.jsx)("input",{type:"number",min:1,value:d.durationDays,onChange:a=>h("durationDays",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Стоимость (₽)"}),(0,b.jsx)("input",{type:"number",min:0,value:d.price,onChange:a=>h("price",a.target.value),className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-foreground text-[10px] mb-2",children:"Описание"}),(0,b.jsx)("textarea",{value:d.description,onChange:a=>h("description",a.target.value),rows:3,className:"w-full bg-secondary border border-border px-4 py-2 text-foreground text-[10px] focus:outline-none focus:border-primary resize-none"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)("button",{onClick:g,className:"flex-1 border border-border text-foreground py-2 text-[10px] hover:border-primary",children:"Отмена"}),(0,b.jsx)("button",{onClick:f,className:"flex-1 bg-primary text-primary-foreground py-2 text-[10px] hover:bg-primary/80",children:c?"Сохранить":"Добавить"})]})]})]})})}var y=a.i(37565),z=a.i(19480);let A=[{id:"1",heroHighlight:"VPN",heroDescription:"Безопасность • Гайд",title:"Как выбрать лучший VPN",excerpt:"Разбираемся в критериях...",content:"Полный текст статьи...",tags:["VPN","Безопасность","Гайд"],publishedAt:"2025-12-10",createdAt:"2025-12-10",updatedAt:"2025-12-10"},{id:"2",heroHighlight:"Обновления",heroDescription:"Серверы • Новости",title:"Обновление серверов",excerpt:"Новые локации...",content:"Полный текст...",tags:["Обновления","Серверы","Новости"],publishedAt:"2025-12-05",createdAt:"2025-12-05",updatedAt:"2025-12-05"}];function B(){let[a,e]=(0,c.useState)("keys"),[f,g]=(0,c.useState)([]),[h,j]=(0,c.useState)(A),[k,l]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[q,t]=(0,c.useState)([]),[v,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)(null),[$,_]=(0,c.useState)({userId:"",name:"",deviceInfo:"",expiresAt:""}),aa=()=>({heroHighlight:"",heroDescription:"",title:"",excerpt:"",content:"",tags:"",publishedAt:new Date().toISOString().split("T")[0]}),[ab,ac]=(0,c.useState)(aa()),[ad,ae]=(0,c.useState)({name:"",durationDays:"30",price:"0",description:""}),af=()=>_({userId:q[0]?.id??"",name:"",deviceInfo:"",expiresAt:""}),ag=async()=>{B(!0);let a=await (0,z.adminListVPNClients)();a.data?(g(a.data),J("")):J(a.error||"Не удалось загрузить VPN ключи"),B(!1)},ah=async()=>{D(!0);let a=await (0,z.adminListTariffs)();a.data?(l(a.data),L("")):L(a.error||"Не удалось загрузить тарифы"),D(!1)},ai=async()=>{F(!0);let a=await (0,z.adminListSubscriptions)();a.data?(o(a.data),N("")):N(a.error||"Не удалось загрузить подписки"),F(!1)},aj=async()=>{H(!0);let a=await (0,z.adminListUsers)();a.data&&t(a.data),H(!1)};(0,c.useEffect)(()=>{ag(),ah(),ai(),aj()},[]),(0,c.useEffect)(()=>{_(a=>a.userId?a:{...a,userId:q[0]?.id?.toString()??""})},[q]);let ak=async()=>{if(!$.userId)return void J("Выберите пользователя");let a={user_id:parseInt($.userId),name:$.name||void 0,device_info:$.deviceInfo||void 0},b=U?await (0,z.adminUpdateVPNClient)(U.id.toString(),a):await (0,z.adminCreateVPNClient)(a);b.error?J(b.error):(P(!1),V(null),af(),ag())},al=async a=>{let b=await (0,z.adminExtendVPNClient)(a.toString());b.error&&J(b.error),ag()},am=async a=>{let b=await (0,z.adminDeleteVPNClient)(a.toString());b.error&&J(b.error),ag()},an=a=>a.split(",").map(a=>a.trim()).filter(Boolean),ao=()=>ae({name:"",durationDays:"30",price:"0",description:""}),ap=a=>{let b=a?.duration_months?.toString()??ad.durationDays,c=a?.price?.toString()??ad.price;return{name:(a?.name??ad.name).trim(),durationMonths:Math.max(1,Number(b)||1),price:Math.max(0,Number(c)||0),description:(a?.description??ad.description).trim()}},aq=async()=>{let a=ap(),b=await (0,z.adminCreateTariff)({name:a.name||`Тариф ${k.length+1}`,duration_months:a.durationMonths,price:a.price,description:a.description});b.error?L(b.error):(T(!1),Z(null),ao(),ah(),ai())},ar=async()=>{if(!Y)return;let a=ap({name:ad.name||Y.name,description:ad.description||Y.description}),b=await (0,z.adminUpdateTariff)(Y.id.toString(),{name:a.name,duration_months:a.durationMonths,price:a.price,description:a.description});b.error?L(b.error):(Z(null),T(!1),ao(),ah(),ai())},as=async a=>{let b=await (0,z.adminDeleteTariff)(a.toString());b.error&&L(b.error),ah(),ai()},at=async a=>{let b=await (0,z.adminToggleTariff)(a.toString());b.error&&L(b.error),ah()},au=(0,c.useMemo)(()=>n.reduce((a,b)=>{let c="string"==typeof b.tariff_id?parseInt(b.tariff_id):b.tariff_id,d=k.find(a=>a.id===c);return a+(d?.price??0)},0),[n,k]),av=f.length;f.length;let aw=n.filter(a=>a.is_active).length,ax=[...n].sort((a,b)=>{let c=new Date(a.created_at||a.start_date).getTime();return new Date(b.created_at||b.start_date).getTime()-c}).slice(0,10);return(0,b.jsxs)("div",{className:"min-h-screen bg-background relative",children:[(0,b.jsx)(d.PixelStars,{}),(0,b.jsx)(i,{}),(0,b.jsxs)("div",{className:"flex pt-16",children:[(0,b.jsx)(m,{activeTab:a,onChange:e,balance:au}),(0,b.jsxs)("main",{className:"flex-1 ml-64 p-6 relative z-10",children:["keys"===a&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-foreground text-sm",children:"VPN КЛЮЧИ"}),(0,b.jsxs)("button",{onClick:()=>{V(null),af(),P(!0)},className:"bg-primary text-primary-foreground px-4 py-2 text-[10px] flex items-center gap-2 hover:bg-primary/80",children:[(0,b.jsx)(y.Plus,{size:14}),"Создать ключ"]})]}),I&&(0,b.jsx)("p",{className:"text-red-400 text-[10px] mb-3",children:I}),v?(0,b.jsx)("div",{className:"bg-card border border-border p-6 text-[10px] text-muted-foreground",children:"Загрузка ключей..."}):(0,b.jsx)(u,{keys:f,onEdit:a=>{V(a),_({userId:a.user_id.toString(),name:a.name||"",deviceInfo:a.device_info||"",expiresAt:""}),P(!0)},onExtend:al,onDelete:am,onToggle:()=>{}})]}),"blog"===a&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-foreground text-sm",children:"БЛОГ"}),(0,b.jsxs)("button",{onClick:()=>{X(null),ac(aa()),R(!0)},className:"bg-primary text-primary-foreground px-4 py-2 text-[10px] flex items-center gap-2 hover:bg-primary/80",children:[(0,b.jsx)(y.Plus,{size:14}),"Создать статью"]})]}),(0,b.jsx)(p,{posts:h,onEdit:a=>{X(a),ac({heroHighlight:a.heroHighlight,heroDescription:a.heroDescription,title:a.title,excerpt:a.excerpt,content:a.content,tags:a.tags.join(", "),publishedAt:a.publishedAt}),R(!0)},onDelete:a=>{j(h.filter(b=>b.id!==a))}})]}),"tariffs"===a&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-foreground text-sm",children:"ТАРИФЫ"}),(0,b.jsxs)("button",{onClick:()=>{Z(null),ao(),T(!0)},className:"bg-primary text-primary-foreground px-4 py-2 text-[10px] flex items-center gap-2 hover:bg-primary/80",children:[(0,b.jsx)(y.Plus,{size:14}),"Добавить тариф"]})]}),K&&(0,b.jsx)("p",{className:"text-red-400 text-[10px] mb-3",children:K}),C?(0,b.jsx)("div",{className:"bg-card border border-border p-6 text-[10px] text-muted-foreground",children:"Загрузка тарифов..."}):(0,b.jsx)(w,{tariffs:k,onEdit:a=>{Z(a),ae({name:a.name,durationDays:a.duration_months.toString(),price:a.price.toString(),description:a.description||""}),T(!0)},onDelete:as,onToggle:at})]}),"balance"===a&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-foreground text-sm mb-6",children:"БАЛАНС"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-card border border-border p-6",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-[8px] mb-2",children:"ОБЩИЙ БАЛАНС"}),(0,b.jsxs)("div",{className:"text-primary text-2xl",children:[au.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," ₽"]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border p-6",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-[8px] mb-2",children:"АКТИВНЫХ КЛЮЧЕЙ"}),(0,b.jsx)("div",{className:"text-accent text-2xl",children:av})]}),(0,b.jsxs)("div",{className:"bg-card border border-border p-6",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-[8px] mb-2",children:"АКТИВНЫХ ПОДПИСОК"}),(0,b.jsx)("div",{className:"text-foreground text-2xl",children:aw})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border p-6",children:[(0,b.jsx)("h2",{className:"text-foreground text-[11px] mb-4",children:"ИСТОРИЯ ПОСТУПЛЕНИЙ"}),M&&(0,b.jsx)("p",{className:"text-red-400 text-[10px] mb-3",children:M}),E?(0,b.jsx)("div",{className:"text-muted-foreground text-[10px]",children:"Загрузка подписок..."}):(0,b.jsx)("div",{className:"space-y-3",children:ax.map(a=>{var c;let d="string"==typeof a.tariff_id?parseInt(a.tariff_id):a.tariff_id,e=k.find(a=>a.id===d);return(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-foreground text-[9px]",children:a.user?.email||a.user_id}),(0,b.jsxs)("div",{className:"text-muted-foreground text-[8px]",children:[e?.name||a.tariff_id||"Тариф"," • ",(c=a.created_at||a.start_date)?new Date(c).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"—"]})]}),(0,b.jsxs)("div",{className:"text-primary text-[10px]",children:["+",e?.price??0," ₽"]})]},a.id)})})]})]})]})]}),(0,b.jsx)(s,{open:O,isEditing:!!U,form:$,users:q,onChange:_,onSubmit:ak,onClose:()=>{P(!1),V(null),J(""),af()}}),(0,b.jsx)(r,{open:Q,isEditing:!!W,form:ab,onChange:ac,onSubmit:W?()=>{if(!W)return;let a=an(ab.tags),b=new Date().toISOString().split("T")[0];j(h.map(c=>c.id===W.id?{...W,heroHighlight:ab.heroHighlight,heroDescription:ab.heroDescription,title:ab.title,excerpt:ab.excerpt,content:ab.content,tags:a,publishedAt:ab.publishedAt||W.publishedAt,updatedAt:b}:c)),X(null),R(!1),ac(aa())}:()=>{let a=an(ab.tags),b=new Date().toISOString().split("T")[0];j([...h,{id:Date.now().toString(),heroHighlight:ab.heroHighlight,heroDescription:ab.heroDescription,title:ab.title,excerpt:ab.excerpt,content:ab.content,tags:a,publishedAt:ab.publishedAt||b,createdAt:b,updatedAt:b}]),R(!1),ac(aa())},onClose:()=>{R(!1)}}),(0,b.jsx)(x,{open:S,isEditing:!!Y,form:ad,onChange:ae,onSubmit:Y?ar:aq,onClose:()=>{T(!1),Z(null),ao()}})]})}a.s(["default",()=>B],99280)}];

//# sourceMappingURL=Documents_programming_pixel-space-vpn_app_admin_page_tsx_4ee9bd57._.js.map