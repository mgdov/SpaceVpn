{"version":3,"sources":["../../../../../../../Documents/programming/pixel-space-vpn/app/redirect/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useSearchParams } from 'next/navigation'\nimport { useEffect, useState, Suspense } from 'react'\n\nfunction RedirectContent() {\n  const searchParams = useSearchParams()\n  const redirectTo = searchParams.get('redirect_to')\n\n  const [message, setMessage] = useState('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...')\n  const [showRetry, setShowRetry] = useState(false)\n  const [showSpinner, setShowSpinner] = useState(true)\n  const [decodedUrl, setDecodedUrl] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (!redirectTo) {\n      setMessage('–û—à–∏–±–∫–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä redirect_to')\n      setShowSpinner(false)\n      return\n    }\n\n    let decoded = redirectTo\n    try {\n      if (redirectTo.includes('%')) {\n        decoded = decodeURIComponent(redirectTo)\n      }\n    } catch (_) { }\n\n    setDecodedUrl(decoded)\n    tryOpenApp(decoded)\n\n    const timer = setTimeout(() => {\n      setMessage('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å?')\n      setShowRetry(true)\n      setShowSpinner(false)\n    }, 2000)\n\n    return () => clearTimeout(timer)\n  }, [redirectTo])\n\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        setMessage('–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —Å–∞–π—Ç')\n      }\n    }\n    document.addEventListener('visibilitychange', handleVisibilityChange)\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange)\n  }, [])\n\n  useEffect(() => {\n    let blurTime: number | null = null\n    const handleBlur = () => {\n      blurTime = Date.now()\n    }\n    const handleFocus = () => {\n      if (blurTime && Date.now() - blurTime > 1000) {\n        setMessage('‚úÖ –ü–æ—Ö–æ–∂–µ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å. –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç.')\n      }\n    }\n    window.addEventListener('blur', handleBlur)\n    window.addEventListener('focus', handleFocus)\n    return () => {\n      window.removeEventListener('blur', handleBlur)\n      window.removeEventListener('focus', handleFocus)\n    }\n  }, [])\n\n  const tryOpenApp = (url: string) => {\n    if (!url) return\n    // –û—Å–Ω–æ–≤–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞\n    window.location.href = url\n    // –î–æ–ø. –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ iframe\n    setTimeout(() => {\n      const iframe = document.createElement('iframe')\n      iframe.style.display = 'none'\n      iframe.src = url\n      document.body.appendChild(iframe)\n      setTimeout(() => {\n        try { document.body.removeChild(iframe) } catch { }\n      }, 1000)\n    }, 100)\n    setMessage('–û—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...')\n  }\n\n  const handleRetry = () => {\n    if (decodedUrl) tryOpenApp(decodedUrl)\n  }\n\n  return (\n    <div className=\"flex justify-center items-center min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 text-white p-5\">\n      <div className=\"text-center max-w-lg p-8 bg-white/10 rounded-3xl backdrop-blur-xl shadow-2xl border border-white/20\">\n        {showSpinner && (\n          <div className=\"w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin mx-auto mb-5\" />\n        )}\n\n        <h2 className=\"text-3xl font-bold mb-5\">–û—Ç–∫—Ä—ã–≤–∞–µ–º VPN –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ‚Ä¶</h2>\n        <p className=\"text-lg leading-relaxed mb-6\">{message}</p>\n\n        <div className=\"flex flex-col gap-3\">\n          {showRetry && (\n            <button\n              onClick={handleRetry}\n              className=\"px-7 py-3.5 bg-gradient-to-r from-green-500 to-green-600 rounded-xl text-white font-bold text-base transition-all duration-300 hover:-translate-y-0.5 hover:shadow-xl shadow-lg shadow-green-500/40\"\n            >\n              üöÄ –î–æ–±–∞–≤–∏—Ç—å VPN –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n            </button>\n          )}\n\n          <a\n            href=\"/account/keys\"\n            className=\"px-6 py-3 bg-white/15 border-2 border-white/50 rounded-xl text-white font-semibold transition-all duration-300 hover:bg-white/25 hover:border-white\"\n          >\n            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default function RedirectPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"flex justify-center items-center min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 text-white\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin mx-auto mb-5\" />\n          <p className=\"text-lg\">–ó–∞–≥—Ä—É–∑–∫–∞...</p>\n        </div>\n      </div>\n    }>\n      <RedirectContent />\n    </Suspense>\n  )\n}\n"],"names":[],"mappings":"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"}