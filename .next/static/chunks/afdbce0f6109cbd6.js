(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11991,e=>{"use strict";let s=(0,e.i(95026).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>s],11991)},84375,e=>{"use strict";let s=(0,e.i(95026).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],84375)},25098,e=>{"use strict";let s=(0,e.i(95026).default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>s],25098)},36311,e=>{"use strict";let s=(0,e.i(95026).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],36311)},53966,e=>{"use strict";var s=e.i(19212),t=e.i(20278),r=e.i(25098),a=e.i(11991);let i=(0,e.i(95026).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var l=e.i(84375),n=e.i(36311),o=e.i(9586),d=e.i(54761),c=e.i(87991),x=e.i(99866),m=e.i(96636),p=e.i(49051);let h=(0,m.withAuth)(function(){let{user:e}=(0,m.useAuth)(),[h,u]=(0,t.useState)([]),[b,g]=(0,t.useState)(new Map),[f,j]=(0,t.useState)(!0),[y,N]=(0,t.useState)("");(0,t.useEffect)(()=>{v()},[]);let v=async()=>{j(!0),N("");let e=await (0,p.listUserVPNClients)();if(e.data){u(e.data);let s=new Map;for(let t of e.data){let e=await (0,p.getUserVPNClientConfig)(t.id.toString());e.data&&s.set(t.id,e.data)}g(s)}else N(e.error||"Не удалось загрузить список VPN ключей");j(!1)},w=()=>{let e=navigator.userAgent.toLowerCase();e.includes("android")?window.open("https://play.google.com/store/apps/details?id=com.v2ray.ang","_blank"):e.includes("iphone")||e.includes("ipad")?window.open("https://apps.apple.com/app/streisand/id6450534064","_blank"):window.open("https://github.com/2dust/v2rayN/releases","_blank")},k=h.length>0;return(0,s.jsxs)("div",{className:"min-h-screen bg-background relative",children:[(0,s.jsx)(x.PixelStars,{}),(0,s.jsx)(d.Header,{}),(0,s.jsx)("main",{className:"pt-24 pb-20 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"bg-card border border-border p-6",children:[(0,s.jsxs)(o.default,{href:"/account",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors text-sm mb-4",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Назад в личный кабинет"]}),(0,s.jsx)("p",{className:"text-accent text-[9px] tracking-[0.35em] mb-2",children:"[ МОИ VPN КЛЮЧИ ]"}),(0,s.jsx)("h1",{className:"text-foreground text-3xl font-bold",children:"Подключение к VPN"})]}),y&&(0,s.jsx)("div",{className:"bg-red-500/10 border-2 border-red-500 p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-red-400 text-sm",children:y})]})}),f&&(0,s.jsxs)("div",{className:"bg-card border border-border p-12 text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm mt-4",children:"Загрузка ваших ключей..."})]}),!f&&!k&&(0,s.jsxs)("div",{className:"bg-gradient-to-br from-primary/10 to-accent/5 border-2 border-primary p-8 md:p-12 text-center space-y-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/20 mb-4",children:(0,s.jsx)(r.Key,{className:"w-10 h-10 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-foreground text-2xl font-bold mb-3",children:"У вас пока нет VPN ключа"}),(0,s.jsx)("p",{className:"text-muted-foreground text-base max-w-md mx-auto",children:"Купите тариф, чтобы получить доступ к защищенному VPN подключению"})]}),(0,s.jsxs)(o.default,{href:"/pricing",className:"inline-flex items-center gap-3 bg-primary text-primary-foreground px-8 py-4 text-sm font-semibold hover:bg-primary/90 transition-colors",children:[(0,s.jsx)(r.Key,{size:20}),"Купить доступ"]})]}),!f&&k&&(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:h.map(e=>{let t=b.get(e.id),o=e.expires_at&&new Date(e.expires_at).getTime()<Date.now();return e.expires_at&&!o&&(new Date(e.expires_at).getTime(),Date.now()),(0,s.jsxs)("div",{className:"bg-card border-2 border-border p-4 flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"bg-primary/20 p-2 rounded",children:(0,s.jsx)(r.Key,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-foreground text-base font-bold",children:"Ключ"}),(0,s.jsx)("span",{className:"bg-accent/20 border border-accent text-accent px-2 py-0.5 text-xs font-mono font-semibold",children:e.name})]})]}),o?(0,s.jsx)("div",{className:"bg-red-500/20 border-2 border-red-500 text-red-400 px-3 py-1 text-xs font-semibold",children:"Истек"}):(0,s.jsx)("div",{className:"bg-primary/20 border-2 border-primary text-primary px-3 py-1 text-xs font-semibold",children:"Активен"})]}),e.expires_at&&(0,s.jsx)("div",{className:"bg-orange-500/10 border-2 border-orange-500 p-2 mb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(l.Clock,{className:"w-4 h-4 text-orange-400"}),(0,s.jsxs)("span",{className:"text-orange-300 text-xs font-semibold",children:["Истекает: ",new Date(e.expires_at).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,s.jsx)("div",{className:"bg-orange-500/20 border border-orange-500 text-orange-300 px-2 py-1 text-xs font-semibold",children:o?"Истёк":`Осталось ${(e=>{let s=new Date().getTime(),t=new Date(e).getTime()-s;if(t<=0)return"Истёк";let r=Math.floor(t/36e5),a=Math.floor(r/24);return a>0?`${a} д.`:`${r} ч.`})(e.expires_at)}`})]})}),(0,s.jsxs)("div",{className:"bg-purple-500/10 border-2 border-purple-500 p-3 space-y-2 mb-3 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i,{className:"w-4 h-4 text-purple-400"}),(0,s.jsx)("h3",{className:"text-purple-300 text-sm font-semibold",children:"Инструкция:"})]}),(0,s.jsxs)("ol",{className:"space-y-1.5 text-muted-foreground text-xs",children:[(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"text-purple-400 font-bold flex-shrink-0",children:"1."}),(0,s.jsx)("span",{children:"Установите приложение для VPN нажав на первую кнопку, а затем вернитесь снова на сайт"})]}),(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"text-purple-400 font-bold flex-shrink-0",children:"2."}),(0,s.jsx)("span",{children:"После установки приложения нажмите вторую кнопку «Добавить VPN в приложение»"})]})]})]}),o?(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("button",{onClick:()=>window.location.href="/pricing",className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white p-2.5 text-sm font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)(l.Clock,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Продлить ключ"})]})}):(0,s.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,s.jsxs)("button",{onClick:w,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground p-2.5 text-sm font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"text-base",children:"1."}),(0,s.jsx)(a.Download,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Установить приложение для VPN"})]}),t&&(0,s.jsxs)("button",{onClick:()=>{var e;return e=t.subscription_url,void navigator.clipboard.writeText(e).then(()=>{alert("Ссылка скопирована! Вставьте её в приложение VPN.")})},className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2.5 text-sm font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"text-base",children:"2."}),(0,s.jsx)(i,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Добавить VPN в приложение"})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-1 mt-auto",children:(0,s.jsxs)("button",{onClick:()=>{var s;return s=e.id,void(confirm("Вы уверены, что хотите удалить этот ключ?")&&console.log("Deleting key:",s))},className:"text-red-500 hover:text-red-400 text-xs font-semibold transition-colors flex items-center gap-1",children:["Удалить",(0,s.jsx)(n.Trash2,{className:"w-3 h-3"})]})})]},e.id)})})]})}),(0,s.jsx)(c.Footer,{})]})});e.s(["default",0,h],53966)}]);