(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45153,e=>{"use strict";let r=(0,e.i(95026).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>r],45153)},84375,e=>{"use strict";let r=(0,e.i(95026).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>r],84375)},51871,e=>{"use strict";let r=(0,e.i(95026).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],51871)},25149,e=>{"use strict";let r=(0,e.i(95026).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],25149)},32180,e=>{"use strict";let r=(0,e.i(95026).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],32180)},62062,e=>{"use strict";let r=(0,e.i(95026).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>r],62062)},31009,e=>{"use strict";var r=e.i(19212),s=e.i(20278),t=e.i(9586),a=e.i(54761),i=e.i(87991),l=e.i(99866),d=e.i(32180),c=e.i(51871);let n=(0,e.i(95026).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var x=e.i(25149),o=e.i(84375),m=e.i(62062),u=e.i(45153),p=e.i(49051);function h(){let[e,h]=(0,s.useState)("search"),[b,f]=(0,s.useState)(""),[y,g]=(0,s.useState)(null),[j,N]=(0,s.useState)([]),[v,k]=(0,s.useState)(null),[C,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[z,L]=(0,s.useState)(!1),[A,T]=(0,s.useState)(""),[P,K]=(0,s.useState)(!1),M=async()=>{if(!b.trim())return void T("Введите идентификатор ключа");w(!0),T(""),g(null);let e=await (0,p.searchKeyPublic)(b.trim());e.data?.found?(g(e.data),await $(),h("select-tariff")):e.data&&!e.data.found?T("Ключ не найден. Проверьте идентификатор и попробуйте снова."):T(e.error||"Ошибка поиска"),w(!1)},$=async()=>{_(!0);let e=await (0,p.getPublicTariffsNoAuth)();e.data?.tariffs&&N(e.data.tariffs),_(!1)},E=async e=>{L(!0),T("");let r=await (0,p.renewKeyPublic)({key_identifier:b,tariff_id:e});r.data?.success?(k(r.data),h("success")):T(r.error||"Ошибка продления"),L(!1)},V=async e=>{await navigator.clipboard.writeText(e),K(!0),setTimeout(()=>K(!1),2e3)},W=e=>new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return"success"===e&&v?(0,r.jsxs)("div",{className:"min-h-screen bg-background relative",children:[(0,r.jsx)(l.PixelStars,{}),(0,r.jsx)(a.Header,{}),(0,r.jsx)("main",{className:"relative z-10 px-4 pt-24 pb-20",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-card border-2 border-green-500 p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(x.CheckCircle2,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Ключ продлён!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:v.message})]}),(0,r.jsxs)("div",{className:"bg-primary/10 border border-primary p-4 text-center",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Ваш ключ:"}),(0,r.jsx)("p",{className:"text-3xl font-mono font-bold text-primary",children:v.key_id}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Новая дата истечения: ",W(v.new_expires_at)]})]}),v.subscription_url&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"VLESS ссылка:"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("code",{className:"block bg-muted p-4 text-xs break-all rounded",children:v.subscription_url}),(0,r.jsx)("button",{onClick:()=>V(v.subscription_url),className:"absolute top-2 right-2 p-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded",children:P?(0,r.jsx)(x.CheckCircle2,{size:16}):(0,r.jsx)(u.Copy,{size:16})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)(t.default,{href:"/",className:"block text-center bg-primary text-primary-foreground py-3 font-semibold hover:bg-primary/90",children:"На главную"}),(0,r.jsx)("button",{onClick:()=>{h("search"),f(""),g(null),k(null)},className:"text-muted-foreground hover:text-primary text-sm",children:"Продлить другой ключ"})]})]})})}),(0,r.jsx)(i.Footer,{})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-background relative",children:[(0,r.jsx)(l.PixelStars,{}),(0,r.jsx)(a.Header,{}),(0,r.jsx)("main",{className:"relative z-10 px-4 pt-24 pb-20",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(t.default,{href:"/buy-no-register",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-primary text-sm mb-8",children:[(0,r.jsx)(d.ArrowLeft,{size:16}),"Назад"]}),(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-4",children:"Продлить ключ"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Введите идентификатор ключа или VLESS ссылку"})]}),A&&(0,r.jsxs)("div",{className:"bg-red-500/10 border border-red-500 p-4 mb-6 flex items-center gap-3",children:[(0,r.jsx)(m.AlertCircle,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-red-400 text-sm",children:A})]}),"search"===e&&(0,r.jsx)("div",{className:"bg-card border-2 border-border p-6 space-y-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-foreground mb-2",children:"Идентификатор ключа"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("input",{type:"text",value:b,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&M()},placeholder:"TJWMW или vless://...",className:"flex-1 bg-background border border-border px-4 py-3 text-foreground placeholder:text-muted-foreground focus:outline-none focus:border-primary"}),(0,r.jsxs)("button",{onClick:M,disabled:C,className:"bg-primary text-primary-foreground px-6 py-3 font-semibold hover:bg-primary/90 disabled:opacity-50 flex items-center gap-2",children:[C?(0,r.jsx)(c.Loader2,{size:18,className:"animate-spin"}):(0,r.jsx)(n,{size:18}),"Найти"]})]}),(0,r.jsx)("p",{className:"text-muted-foreground text-xs mt-2",children:"Введите 5-буквенный код ключа (например TJWMW) или полную VLESS ссылку"})]})}),"select-tariff"===e&&y&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:`bg-card border-2 p-6 ${y.is_expired?"border-red-500":"border-green-500"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Найден ключ:"}),(0,r.jsx)("p",{className:"text-2xl font-mono font-bold text-primary",children:y.key_id})]}),(0,r.jsx)("span",{className:`px-3 py-1 text-xs font-semibold ${y.is_expired?"bg-red-500/20 text-red-500 border border-red-500":"bg-green-500/20 text-green-500 border border-green-500"}`,children:y.is_expired?"Истёк":"Активен"})]}),y.expires_at&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,r.jsx)(o.Clock,{size:14}),(0,r.jsxs)("span",{children:[y.is_expired?"Истёк: ":"Истекает: ",W(y.expires_at)]}),y.time_remaining&&!y.is_expired&&(0,r.jsxs)("span",{className:"text-primary",children:["(",y.time_remaining,")"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Выберите тариф для продления:"}),S?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)(c.Loader2,{className:"w-6 h-6 animate-spin text-primary mx-auto"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:j.map(e=>(0,r.jsxs)("button",{onClick:()=>E(e.id),disabled:z||e.price>0,className:`p-4 border-2 text-left transition-all disabled:opacity-50 ${e.is_featured?"border-primary bg-primary/5 hover:bg-primary/10":"border-border hover:border-primary"}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-foreground",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["+",e.duration_days," дней"]})]}),(0,r.jsx)("span",{className:`font-bold ${0===e.price?"text-green-500":"text-primary"}`,children:0===e.price?"Бесплатно":`${e.price} ₽`})]}),e.price>0&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Скоро"})]},e.id))})]}),(0,r.jsx)("button",{onClick:()=>{h("search"),g(null)},className:"text-muted-foreground hover:text-primary text-sm",children:"← Искать другой ключ"})]})]})}),(0,r.jsx)(i.Footer,{})]})}e.s(["default",()=>h],31009)}]);