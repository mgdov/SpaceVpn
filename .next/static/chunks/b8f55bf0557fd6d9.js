(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95026,e=>{"use strict";var t=e.i(20278);let n=(...e)=>e.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:c="",children:o,iconNode:l,...d},u)=>(0,t.createElement)("svg",{ref:u,...r,width:i,height:i,stroke:e,strokeWidth:s?24*Number(a)/Number(i):a,className:n("lucide",c),...d},[...l.map(([e,n])=>(0,t.createElement)(e,n)),...Array.isArray(o)?o:[o]])),a=(e,r)=>{let a=(0,t.forwardRef)(({className:a,...s},c)=>(0,t.createElement)(i,{ref:c,iconNode:r,className:n(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...s}));return a.displayName=`${e}`,a};e.s(["default",()=>a],95026)},99866,e=>{"use strict";var t=e.i(19212),n=e.i(20278);function r(){let[e,r]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=[];for(let t=0;t<100;t++)e.push({id:t,x:100*Math.random(),y:100*Math.random(),size:Math.random()>.8?2:1,delay:3*Math.random(),type:Math.random()>.7?"cross":"dot"});r(e)},[]),(0,t.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:e.map(e=>(0,t.jsx)("div",{className:"absolute star",style:{left:`${e.x}%`,top:`${e.y}%`,animationDelay:`${e.delay}s`},children:"cross"===e.type?(0,t.jsx)("div",{className:"text-blue-300 text-opacity-60",style:{fontSize:`${6*e.size}px`},children:"+"}):(0,t.jsx)("div",{className:"bg-cyan-300 rounded-none",style:{width:`${2*e.size}px`,height:`${2*e.size}px`}})},e.id))})}e.s(["PixelStars",()=>r])},11817,73812,68603,26835,55746,69506,13142,e=>{"use strict";var t=e.i(50419);async function n(e){return(0,t.fetchAPI)("/subscriptions/purchase-free",{method:"POST",body:JSON.stringify(e)})}async function r(){return(0,t.fetchAPI)("/tariffs/")}async function i(){return(0,t.fetchAPI)("/public/tariffs")}async function a(e){return(0,t.fetchAPI)("/public/key/search",{method:"POST",body:JSON.stringify({key_identifier:e})})}async function s(e){return(0,t.fetchAPI)("/public/key/create",{method:"POST",body:JSON.stringify(e)})}async function c(e){return(0,t.fetchAPI)("/public/key/renew",{method:"POST",body:JSON.stringify(e)})}async function o(e){return(0,t.fetchAPI)(`/public/key/by-payment/${e}`)}async function l(e,t=15,n=2e3){for(let r=0;r<t;r++){let i=await o(e);if(200===i.status&&i.data||202!==i.status)return i;r<t-1&&await new Promise(e=>setTimeout(e,n))}return{error:"Timeout: не удалось получить ключ после оплаты"}}async function d(e){return(0,t.fetchAPI)("/payments/create",{method:"POST",body:JSON.stringify(e)})}async function u(e){let t=window.location.origin+`/account/keys?tariff_id=${encodeURIComponent(String(e.tariffId))}&plan=${encodeURIComponent(e.plan)}`;return d({tariff_id:e.tariffId,return_url:t})}async function f(e,t){let n=await d({tariff_id:e,return_url:t||window.location.origin+"/account/keys"});return n.data?.confirmation_url&&(window.location.href=n.data.confirmation_url),n}async function m(){return(0,t.fetchAPI)("/vpn-clients")}async function h(e){return(0,t.fetchAPI)(`/vpn-clients/${e}/config`)}async function y(){return(0,t.fetchAPI)("/vpn-clients/bypass-presets")}async function p(e){return(0,t.fetchAPI)((0,t.withQuery)("/admin/users",e))}async function g(e){return(0,t.fetchAPI)(`/admin/users/${e}`,{method:"DELETE"})}async function x(e){return(0,t.fetchAPI)(`/admin/users/${e}/toggle-active`,{method:"POST"})}async function P(e){return(0,t.fetchAPI)((0,t.withQuery)("/admin/subscriptions",e))}async function N(e){return(0,t.fetchAPI)((0,t.withQuery)("/admin/vpn/clients",e))}async function v(e){return(0,t.fetchAPI)("/admin/vpn/clients",{method:"POST",body:JSON.stringify(e)})}async function b(e,n){return(0,t.fetchAPI)(`/admin/vpn/clients/${e}`,{method:"PUT",body:JSON.stringify(n)})}async function A(e){return(0,t.fetchAPI)(`/admin/vpn/clients/${e}`,{method:"DELETE"})}async function w(e,n){return(0,t.fetchAPI)(`/admin/vpn/clients/${e}/extend`,{method:"POST",body:n?JSON.stringify(n):void 0})}async function j(e){return(0,t.fetchAPI)(`/admin/vpn/clients/${e}/toggle`,{method:"POST"})}async function T(e){return(0,t.fetchAPI)((0,t.withQuery)("/admin/tariffs",e))}async function I(e){return(0,t.fetchAPI)("/admin/tariffs",{method:"POST",body:JSON.stringify(e)})}async function S(e,n){return(0,t.fetchAPI)(`/admin/tariffs/${e}`,{method:"PATCH",body:JSON.stringify(n)})}async function C(e){return(0,t.fetchAPI)(`/admin/tariffs/${e}`,{method:"DELETE"})}async function k(e){return(0,t.fetchAPI)(`/admin/tariffs/${e}/toggle`,{method:"POST"})}async function O(){return(0,t.fetchAPI)("/admin/finance/stats")}async function $(e){return(0,t.fetchAPI)(`/admin/finance/chart/${e}`)}async function _(e){return(0,t.fetchAPI)((0,t.withQuery)("/admin/finance/payments",e))}e.i(96134),e.i(74349),e.s(["purchaseFreeTariff",()=>n],73812),e.s(["getPublicTariffs",()=>r],68603),e.s(["createKeyPublic",()=>s,"getPublicTariffs",()=>i,"pollKeyByPayment",()=>l,"renewKey",()=>c,"searchKey",()=>a],26835),e.s(["createYookassaPayment",()=>u,"initiatePayment",()=>f],55746),e.s(["getBypassPresets",()=>y,"getUserVPNClientConfig",()=>h,"getUserVPNClients",()=>m],69506),e.s(["adminCreateTariff",()=>I,"adminCreateVPNClient",()=>v,"adminDeleteTariff",()=>C,"adminDeleteUser",()=>g,"adminDeleteVPNClient",()=>A,"adminExtendVPNClient",()=>w,"adminListSubscriptions",()=>P,"adminListTariffs",()=>T,"adminListUsers",()=>p,"adminListVPNClients",()=>N,"adminToggleTariff",()=>k,"adminToggleUserActive",()=>x,"adminToggleVPNClient",()=>j,"adminUpdateTariff",()=>S,"adminUpdateVPNClient",()=>b,"getAdminFinanceChart",()=>$,"getAdminFinanceStats",()=>O,"getAdminPayments",()=>_],13142),e.s([],11817)},51871,e=>{"use strict";let t=(0,e.i(95026).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],51871)},25149,e=>{"use strict";let t=(0,e.i(95026).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],25149)},20201,e=>{"use strict";let t=(0,e.i(95026).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],20201)},35557,e=>{"use strict";var t=e.i(19212),n=e.i(20278),r=e.i(84654),i=e.i(51871),a=e.i(25149),s=e.i(20201),c=e.i(99866);e.i(11817);var o=e.i(96134),l=e.i(74349);function d(){let e=(0,r.useRouter)(),d=(0,r.useSearchParams)(),[u,f]=(0,n.useState)("loading"),[m,h]=(0,n.useState)("");(0,n.useEffect)(()=>{y()},[]);let y=async()=>{let t=d.get("id"),n=d.get("first_name"),r=d.get("last_name"),i=d.get("username"),a=d.get("photo_url"),s=d.get("auth_date"),c=d.get("hash");if(!t||!c||!s){f("error"),h("Данные авторизации Telegram не найдены");return}try{let d=await (0,o.telegramAuthCallback)({id:parseInt(t),first_name:n||"",last_name:r||void 0,username:i||void 0,photo_url:a||void 0,auth_date:parseInt(s),hash:c});if(d.data?.access_token){let t=await (0,l.getCurrentUserInfo)();t.data&&(0,l.setCurrentUser)(t.data),f("success"),setTimeout(()=>{e.push("/account")},1500)}else f("error"),h(d.error||"Ошибка авторизации через Telegram")}catch(e){f("error"),h("Ошибка подключения")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-background relative flex items-center justify-center px-4",children:[(0,t.jsx)(c.PixelStars,{}),(0,t.jsxs)("div",{className:"w-full max-w-md relative z-10 text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-primary flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-background text-sm",children:"S"})})}),"loading"===u&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto"}),(0,t.jsx)("p",{className:"text-foreground",children:"Авторизация через Telegram..."}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Пожалуйста, подождите"})]}),"success"===u&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(a.CheckCircle2,{className:"w-12 h-12 text-green-500 mx-auto"}),(0,t.jsx)("p",{className:"text-foreground",children:"Вход выполнен успешно!"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Перенаправление в личный кабинет..."})]}),"error"===u&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(s.XCircle,{className:"w-12 h-12 text-red-500 mx-auto"}),(0,t.jsx)("p",{className:"text-foreground",children:"Ошибка авторизации"}),(0,t.jsx)("p",{className:"text-red-400 text-sm",children:m}),(0,t.jsx)("button",{onClick:()=>e.push("/login"),className:"mt-4 bg-primary text-primary-foreground px-6 py-2 text-sm hover:bg-primary/80 transition-colors",children:"Вернуться к входу"})]})]})]})}function u(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-background relative overflow-hidden",children:[(0,t.jsx)(c.PixelStars,{}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 relative z-10",children:[(0,t.jsx)(i.Loader2,{className:"w-12 h-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-foreground",children:"Загрузка..."})]})]}),children:(0,t.jsx)(d,{})})}e.s(["default",()=>u])}]);