# Backend API Integration - Summary

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω API –∫–ª–∏–µ–Ω—Ç (`lib/api.ts`)

#### –ù–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

- `VPNStatus` - —Å—Ç–∞—Ç—É—Å VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `MySubscriptionsResponse` - –æ—Ç–≤–µ—Ç –æ—Ç /subscriptions/my
- `BypassPreset` –∏ `BypassPresetsResponse` - –ø—Ä–µ—Å–µ—Ç—ã –æ–±—Ö–æ–¥–∞
- `RegenerateVPNClientPayload` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ VPN –∫–ª–∏–µ–Ω—Ç–∞
- `CreateVPNClientResponse` - –æ—Ç–≤–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

#### –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã:

- `Subscription` - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `status: 'active' | 'expired' | 'cancelled'`
- `VPNClient` - —É–ø—Ä–æ—â–µ–Ω—ã –ø–æ–ª—è, –¥–æ–±–∞–≤–ª–µ–Ω–æ `qr_code`

#### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API:

- `getUserVPNStatus()` - ‚≠ê –≥–ª–∞–≤–Ω—ã–π endpoint –¥–ª—è /account —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `getMySubscriptions()` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ /subscriptions/my
- `getBypassPresets()` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ –æ–±—Ö–æ–¥–∞
- `createUserVPNClient()` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞
- `regenerateUserVPNClient()` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã bypass

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- –ò–∑–º–µ–Ω–µ–Ω endpoint –ª–æ–≥–∏–Ω–∞: `/auth/token` ‚Üí `/auth/login`
- –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### `/account` (app/account/page.tsx)

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getUserVPNStatus()` –≤–º–µ—Å—Ç–æ `getUserSubscriptions()`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å VPN: active/expired/cancelled/none
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–∞—Ñ–∏–∫–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ/–ª–∏–º–∏—Ç)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏

#### `/account/tariffs` (app/account/tariffs/page.tsx)

- ‚úÖ –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API `getPublicTariffs()`
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ `purchaseFreeTariff()`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

#### `/account/keys` (app/account/keys/page.tsx)

- ‚úÖ –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `listUserVPNClients()`
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `getUserVPNClientConfig()`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π
- ‚úÖ –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π bypass –ø—Ä–µ—Å–µ—Ç–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è

#### `/login` –∏ `/register`

- ‚úÖ –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π AuthContext
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –ì–ª–∞–≤–Ω–∞—è –∏ `/pricing`

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç `getPublicTariffs()`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã

### 3. AuthContext (lib/auth-context.tsx)

- ‚úÖ –£–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `API_INTEGRATION.md` —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º API
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- `POST /auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` - –≤—Ö–æ–¥

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

- `GET /users/me` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /users/me/vpn` ‚≠ê - VPN —Å—Ç–∞—Ç—É—Å (–≥–ª–∞–≤–Ω—ã–π –¥–ª—è /account)
- `PUT /users/me` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### –¢–∞—Ä–∏—Ñ—ã

- `GET /tariffs/` - —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ (–ø—É–±–ª–∏—á–Ω—ã–π)
- `GET /tariffs/{id}` - –æ–¥–∏–Ω —Ç–∞—Ä–∏—Ñ

### –ü–æ–¥–ø–∏—Å–∫–∏

- `POST /subscriptions/purchase-free` - –∫—É–ø–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ
- `GET /subscriptions/my` - –º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏

### VPN –ö–ª–∏–µ–Ω—Ç—ã

- `GET /vpn-clients/` - —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
- `POST /vpn-clients/` - —Å–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç
- `GET /vpn-clients/{id}/config` - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `POST /vpn-clients/{id}/regenerate` - –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
- `DELETE /vpn-clients/{id}` - —É–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç

### Bypass Presets

- `GET /vpn-clients/bypass-presets` - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã (–ø—É–±–ª–∏—á–Ω—ã–π)

## üìù –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **API Base URL**: `/api/v1` - –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ nginx
2. **JWT —Ç–æ–∫–µ–Ω—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ localStorage
3. **GET /users/me/vpn**: –≥–ª–∞–≤–Ω—ã–π endpoint –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã /account
4. **duration_months: 0**: —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ –Ω–∞ 1 –¥–µ–Ω—å
5. **data_limit_gb: 0**: –±–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
6. **QR –∫–æ–¥**: base64 PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
7. **VLESS URI**: –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –ª—é–±–æ–π VPN –∫–ª–∏–µ–Ω—Ç

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –±—ç–∫–µ–Ω–¥ API:

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ VPN —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VPN –∫–ª—é—á–∞–º–∏
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞—Ä–∏—Ñ–æ–≤ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. —Ñ–∞–π–ª `API_INTEGRATION.md` –¥–ª—è:

- –ü–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö endpoints
- –ü—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
